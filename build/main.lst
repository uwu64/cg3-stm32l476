ARM GAS  /tmp/ccY6rBif.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "src/main.c"
  20              		.section	.text.reverse,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	reverse:
  27              	.LVL0:
  28              	.LFB132:
   1:src/main.c    **** // common-ground-v3
   2:src/main.c    **** // targeting stm32l476
   3:src/main.c    **** // "minimal project" modified from STM32CubeMX generated code
   4:src/main.c    **** //
   5:src/main.c    **** // TCS 202403. Yume Research & Friends.
   6:src/main.c    **** // The above attribution must be included regardless of license.
   7:src/main.c    **** // This is not permissively licensed software.
   8:src/main.c    **** //
   9:src/main.c    **** #include <stm32l476xx.h>
  10:src/main.c    **** // the following is previous code used for testing
  11:src/main.c    **** 
  12:src/main.c    **** // opr2-quickstart1
  13:src/main.c    **** // Quick start for Orbital Platform R2
  14:src/main.c    **** // TCS 202310. Yume Research & Friends.
  15:src/main.c    **** // The above attribution must be included regardless of license.
  16:src/main.c    **** // This is not permissively licensed software.
  17:src/main.c    **** 
  18:src/main.c    **** #include <stm32l476xx.h>
  19:src/main.c    **** #include <math.h> // for sqrt 
  20:src/main.c    **** typedef enum { false, true } bool;
  21:src/main.c    **** 
  22:src/main.c    **** #include <string.h>
  23:src/main.c    **** /* reverse:  reverse string s in place */
  24:src/main.c    **** static void reverse(char s[]) {
  29              		.loc 1 24 31 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 24 31 is_stmt 0 view .LVU1
  34 0000 10B5     		push	{r4, lr}
ARM GAS  /tmp/ccY6rBif.s 			page 2


  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 14, -4
  39 0002 0446     		mov	r4, r0
  25:src/main.c    **** 	int i, j;
  40              		.loc 1 25 2 is_stmt 1 view .LVU2
  26:src/main.c    **** 	char c;
  41              		.loc 1 26 2 view .LVU3
  27:src/main.c    **** 
  28:src/main.c    **** 	for (i = 0, j = strlen(s)-1; i<j; i++, j--) {
  42              		.loc 1 28 2 view .LVU4
  43              	.LVL1:
  44              		.loc 1 28 18 is_stmt 0 view .LVU5
  45 0004 FFF7FEFF 		bl	strlen
  46              	.LVL2:
  47              		.loc 1 28 27 view .LVU6
  48 0008 431E     		subs	r3, r0, #1
  49              	.LVL3:
  50              		.loc 1 28 9 view .LVU7
  51 000a 0022     		movs	r2, #0
  52              		.loc 1 28 2 view .LVU8
  53 000c 05E0     		b	.L2
  54              	.LVL4:
  55              	.L3:
  29:src/main.c    **** 		c = s[i];
  56              		.loc 1 29 3 is_stmt 1 discriminator 3 view .LVU9
  57              		.loc 1 29 5 is_stmt 0 discriminator 3 view .LVU10
  58 000e A15C     		ldrb	r1, [r4, r2]	@ zero_extendqisi2
  59              	.LVL5:
  30:src/main.c    **** 		s[i] = s[j];
  60              		.loc 1 30 3 is_stmt 1 discriminator 3 view .LVU11
  61              		.loc 1 30 11 is_stmt 0 discriminator 3 view .LVU12
  62 0010 E05C     		ldrb	r0, [r4, r3]	@ zero_extendqisi2
  63              		.loc 1 30 8 discriminator 3 view .LVU13
  64 0012 A054     		strb	r0, [r4, r2]
  31:src/main.c    **** 		s[j] = c;
  65              		.loc 1 31 3 is_stmt 1 discriminator 3 view .LVU14
  66              		.loc 1 31 8 is_stmt 0 discriminator 3 view .LVU15
  67 0014 E154     		strb	r1, [r4, r3]
  28:src/main.c    **** 		c = s[i];
  68              		.loc 1 28 39 is_stmt 1 discriminator 3 view .LVU16
  28:src/main.c    **** 		c = s[i];
  69              		.loc 1 28 37 is_stmt 0 discriminator 3 view .LVU17
  70 0016 0132     		adds	r2, r2, #1
  71              	.LVL6:
  28:src/main.c    **** 		c = s[i];
  72              		.loc 1 28 42 discriminator 3 view .LVU18
  73 0018 013B     		subs	r3, r3, #1
  74              	.LVL7:
  75              	.L2:
  28:src/main.c    **** 		c = s[i];
  76              		.loc 1 28 32 is_stmt 1 discriminator 1 view .LVU19
  77 001a 9A42     		cmp	r2, r3
  78 001c F7DB     		blt	.L3
  32:src/main.c    **** 	}
  33:src/main.c    **** }  
ARM GAS  /tmp/ccY6rBif.s 			page 3


  79              		.loc 1 33 1 is_stmt 0 view .LVU20
  80 001e 10BD     		pop	{r4, pc}
  81              		.loc 1 33 1 view .LVU21
  82              		.cfi_endproc
  83              	.LFE132:
  85              		.section	.text.itoa,"ax",%progbits
  86              		.align	1
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  91              	itoa:
  92              	.LVL8:
  93              	.LFB133:
  34:src/main.c    **** 
  35:src/main.c    ****  /* itoa:  convert n to characters in s */
  36:src/main.c    **** static void itoa(int n, char s[]) {
  94              		.loc 1 36 35 is_stmt 1 view -0
  95              		.cfi_startproc
  96              		@ args = 0, pretend = 0, frame = 0
  97              		@ frame_needed = 0, uses_anonymous_args = 0
  98              		.loc 1 36 35 is_stmt 0 view .LVU23
  99 0000 10B5     		push	{r4, lr}
 100              	.LCFI1:
 101              		.cfi_def_cfa_offset 8
 102              		.cfi_offset 4, -8
 103              		.cfi_offset 14, -4
  37:src/main.c    **** 	int i, sign;
 104              		.loc 1 37 2 is_stmt 1 view .LVU24
  38:src/main.c    **** 	if ((sign = n) < 0)  /* record sign */
 105              		.loc 1 38 2 view .LVU25
 106              	.LVL9:
 107              		.loc 1 38 5 is_stmt 0 view .LVU26
 108 0002 0028     		cmp	r0, #0
 109              		.loc 1 38 5 view .LVU27
 110 0004 20DB     		blt	.L11
 111 0006 0246     		mov	r2, r0
 112              	.LVL10:
 113              	.L6:
 114              		.loc 1 38 5 view .LVU28
 115 0008 4FF0000E 		mov	lr, #0
 116              	.LVL11:
 117              	.L7:
  39:src/main.c    **** 		n = -n;          /* make n positive */
  40:src/main.c    **** 	i = 0;
  41:src/main.c    **** 	do {       /* generate digits in reverse order */
 118              		.loc 1 41 2 is_stmt 1 discriminator 1 view .LVU29
  42:src/main.c    **** 		s[i++] = n % 10 + '0';   /* get next digit */
 119              		.loc 1 42 3 discriminator 1 view .LVU30
 120              		.loc 1 42 14 is_stmt 0 discriminator 1 view .LVU31
 121 000c 124B     		ldr	r3, .L13
 122 000e 83FB023C 		smull	r3, ip, r3, r2
 123 0012 D317     		asrs	r3, r2, #31
 124 0014 C3EBAC03 		rsb	r3, r3, ip, asr #2
 125 0018 1C46     		mov	r4, r3
 126 001a 03EB8303 		add	r3, r3, r3, lsl #2
 127 001e A2EB4303 		sub	r3, r2, r3, lsl #1
 128 0022 F446     		mov	ip, lr
ARM GAS  /tmp/ccY6rBif.s 			page 4


 129              		.loc 1 42 6 discriminator 1 view .LVU32
 130 0024 0EF1010E 		add	lr, lr, #1
 131              	.LVL12:
 132              		.loc 1 42 19 discriminator 1 view .LVU33
 133 0028 3033     		adds	r3, r3, #48
 134              		.loc 1 42 10 discriminator 1 view .LVU34
 135 002a 01F80C30 		strb	r3, [r1, ip]
  43:src/main.c    **** 	} while ((n /= 10) > 0);     /* delete it */
 136              		.loc 1 43 21 is_stmt 1 discriminator 1 view .LVU35
 137 002e 1346     		mov	r3, r2
 138              		.loc 1 43 14 is_stmt 0 discriminator 1 view .LVU36
 139 0030 2246     		mov	r2, r4
 140              	.LVL13:
 141              		.loc 1 43 21 discriminator 1 view .LVU37
 142 0032 092B     		cmp	r3, #9
 143 0034 EADC     		bgt	.L7
  44:src/main.c    **** 	if (sign < 0)
 144              		.loc 1 44 2 is_stmt 1 view .LVU38
 145              		.loc 1 44 5 is_stmt 0 view .LVU39
 146 0036 0028     		cmp	r0, #0
 147 0038 08DB     		blt	.L12
 148              	.L8:
  45:src/main.c    **** 		s[i++] = '-';
  46:src/main.c    **** 	s[i] = '\0';
 149              		.loc 1 46 2 is_stmt 1 view .LVU40
 150              		.loc 1 46 7 is_stmt 0 view .LVU41
 151 003a 0023     		movs	r3, #0
 152 003c 01F80E30 		strb	r3, [r1, lr]
  47:src/main.c    **** 	reverse(s);
 153              		.loc 1 47 2 is_stmt 1 view .LVU42
 154 0040 0846     		mov	r0, r1
 155              	.LVL14:
 156              		.loc 1 47 2 is_stmt 0 view .LVU43
 157 0042 FFF7FEFF 		bl	reverse
 158              	.LVL15:
  48:src/main.c    **** }  
 159              		.loc 1 48 1 view .LVU44
 160 0046 10BD     		pop	{r4, pc}
 161              	.LVL16:
 162              	.L11:
  39:src/main.c    **** 	i = 0;
 163              		.loc 1 39 3 is_stmt 1 view .LVU45
  39:src/main.c    **** 	i = 0;
 164              		.loc 1 39 5 is_stmt 0 view .LVU46
 165 0048 4242     		rsbs	r2, r0, #0
 166              	.LVL17:
  39:src/main.c    **** 	i = 0;
 167              		.loc 1 39 5 view .LVU47
 168 004a DDE7     		b	.L6
 169              	.LVL18:
 170              	.L12:
  45:src/main.c    **** 	s[i] = '\0';
 171              		.loc 1 45 3 is_stmt 1 view .LVU48
  45:src/main.c    **** 	s[i] = '\0';
 172              		.loc 1 45 10 is_stmt 0 view .LVU49
 173 004c 2D23     		movs	r3, #45
 174 004e 01F80E30 		strb	r3, [r1, lr]
ARM GAS  /tmp/ccY6rBif.s 			page 5


  45:src/main.c    **** 	s[i] = '\0';
 175              		.loc 1 45 6 view .LVU50
 176 0052 0CF1020E 		add	lr, ip, #2
 177              	.LVL19:
  45:src/main.c    **** 	s[i] = '\0';
 178              		.loc 1 45 6 view .LVU51
 179 0056 F0E7     		b	.L8
 180              	.L14:
 181              		.align	2
 182              	.L13:
 183 0058 67666666 		.word	1717986919
 184              		.cfi_endproc
 185              	.LFE133:
 187              		.section	.text.abs16,"ax",%progbits
 188              		.align	1
 189              		.global	abs16
 190              		.syntax unified
 191              		.thumb
 192              		.thumb_func
 194              	abs16:
 195              	.LVL20:
 196              	.LFB134:
  49:src/main.c    **** 
  50:src/main.c    **** unsigned int abs16(int16_t a) {
 197              		.loc 1 50 31 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 0
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201              		@ link register save eliminated.
  51:src/main.c    **** 	if (a < 0) {
 202              		.loc 1 51 2 view .LVU53
 203              		.loc 1 51 5 is_stmt 0 view .LVU54
 204 0000 0028     		cmp	r0, #0
 205              	.LVL21:
 206              		.loc 1 51 5 view .LVU55
 207 0002 00DB     		blt	.L18
 208              	.L15:
  52:src/main.c    **** 		return (a * -1);
  53:src/main.c    **** 	} else {
  54:src/main.c    **** 		return a;
  55:src/main.c    **** 	}
  56:src/main.c    **** }
 209              		.loc 1 56 1 view .LVU56
 210 0004 7047     		bx	lr
 211              	.L18:
  52:src/main.c    **** 		return (a * -1);
 212              		.loc 1 52 3 is_stmt 1 view .LVU57
  52:src/main.c    **** 		return (a * -1);
 213              		.loc 1 52 13 is_stmt 0 view .LVU58
 214 0006 4042     		rsbs	r0, r0, #0
 215 0008 FCE7     		b	.L15
 216              		.cfi_endproc
 217              	.LFE134:
 219              		.section	.text.nop,"ax",%progbits
 220              		.align	1
 221              		.global	nop
 222              		.syntax unified
ARM GAS  /tmp/ccY6rBif.s 			page 6


 223              		.thumb
 224              		.thumb_func
 226              	nop:
 227              	.LVL22:
 228              	.LFB135:
  57:src/main.c    **** 
  58:src/main.c    **** void nop(int nop_loops) {
 229              		.loc 1 58 25 is_stmt 1 view -0
 230              		.cfi_startproc
 231              		@ args = 0, pretend = 0, frame = 0
 232              		@ frame_needed = 0, uses_anonymous_args = 0
 233              		@ link register save eliminated.
  59:src/main.c    **** 	for (int i = 0; i < nop_loops; i++) {__NOP();}
 234              		.loc 1 59 2 view .LVU60
 235              	.LBB12:
 236              		.loc 1 59 7 view .LVU61
 237              		.loc 1 59 11 is_stmt 0 view .LVU62
 238 0000 0023     		movs	r3, #0
 239              		.loc 1 59 2 view .LVU63
 240 0002 01E0     		b	.L20
 241              	.LVL23:
 242              	.L21:
 243              		.loc 1 59 39 is_stmt 1 discriminator 3 view .LVU64
 244              		.syntax unified
 245              	@ 59 "src/main.c" 1
 246 0004 00BF     		nop
 247              	@ 0 "" 2
 248              		.loc 1 59 34 discriminator 3 view .LVU65
 249              		.thumb
 250              		.syntax unified
 251 0006 0133     		adds	r3, r3, #1
 252              	.LVL24:
 253              	.L20:
 254              		.loc 1 59 20 discriminator 1 view .LVU66
 255 0008 8342     		cmp	r3, r0
 256 000a FBDB     		blt	.L21
 257              	.LBE12:
  60:src/main.c    **** }
 258              		.loc 1 60 1 is_stmt 0 view .LVU67
 259 000c 7047     		bx	lr
 260              		.cfi_endproc
 261              	.LFE135:
 263              		.section	.text.nop_ms,"ax",%progbits
 264              		.align	1
 265              		.global	nop_ms
 266              		.syntax unified
 267              		.thumb
 268              		.thumb_func
 270              	nop_ms:
 271              	.LVL25:
 272              	.LFB136:
  61:src/main.c    **** 
  62:src/main.c    **** void nop_ms(int ms) {
 273              		.loc 1 62 21 is_stmt 1 view -0
 274              		.cfi_startproc
 275              		@ args = 0, pretend = 0, frame = 0
 276              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccY6rBif.s 			page 7


 277              		.loc 1 62 21 is_stmt 0 view .LVU69
 278 0000 08B5     		push	{r3, lr}
 279              	.LCFI2:
 280              		.cfi_def_cfa_offset 8
 281              		.cfi_offset 3, -8
 282              		.cfi_offset 14, -4
  63:src/main.c    **** 	nop(80 * 250 * ms); // assume 80 MHz 
 283              		.loc 1 63 2 is_stmt 1 view .LVU70
 284 0002 44F62063 		movw	r3, #20000
 285 0006 03FB00F0 		mul	r0, r3, r0
 286              	.LVL26:
 287              		.loc 1 63 2 is_stmt 0 view .LVU71
 288 000a FFF7FEFF 		bl	nop
 289              	.LVL27:
  64:src/main.c    **** }
 290              		.loc 1 64 1 view .LVU72
 291 000e 08BD     		pop	{r3, pc}
 292              		.cfi_endproc
 293              	.LFE136:
 295              		.section	.text.init_clocks,"ax",%progbits
 296              		.align	1
 297              		.global	init_clocks
 298              		.syntax unified
 299              		.thumb
 300              		.thumb_func
 302              	init_clocks:
 303              	.LFB137:
  65:src/main.c    **** 
  66:src/main.c    **** int core_MHz = 0; // please update when configuring pll. not really used rn 
  67:src/main.c    **** void init_clocks() {
 304              		.loc 1 67 20 is_stmt 1 view -0
 305              		.cfi_startproc
 306              		@ args = 0, pretend = 0, frame = 40
 307              		@ frame_needed = 0, uses_anonymous_args = 0
 308              		@ link register save eliminated.
 309 0000 8AB0     		sub	sp, sp, #40
 310              	.LCFI3:
 311              		.cfi_def_cfa_offset 40
  68:src/main.c    **** 	// read chip identification information. only useful when watching memory through debugger 
  69:src/main.c    **** 	volatile int id_w_x = (*(uint32_t*)(UID_BASE) & 0xFFFF0000) >> 16;
 312              		.loc 1 69 2 view .LVU74
 313              		.loc 1 69 25 is_stmt 0 view .LVU75
 314 0002 314B     		ldr	r3, .L28
 315              		.loc 1 69 62 view .LVU76
 316 0004 B3F89225 		ldrh	r2, [r3, #1426]
 317              		.loc 1 69 15 view .LVU77
 318 0008 0792     		str	r2, [sp, #28]
  70:src/main.c    **** 	volatile int id_w_y = *(uint32_t*)(UID_BASE) & 0xFFFF;
 319              		.loc 1 70 2 is_stmt 1 view .LVU78
 320              		.loc 1 70 47 is_stmt 0 view .LVU79
 321 000a B3F89025 		ldrh	r2, [r3, #1424]
 322              		.loc 1 70 15 view .LVU80
 323 000e 0692     		str	r2, [sp, #24]
  71:src/main.c    **** 	volatile int id_w_n = *(uint32_t*)(UID_BASE+0x4) & 0xFF;
 324              		.loc 1 71 2 is_stmt 1 view .LVU81
 325              		.loc 1 71 51 is_stmt 0 view .LVU82
 326 0010 93F89425 		ldrb	r2, [r3, #1428]	@ zero_extendqisi2
ARM GAS  /tmp/ccY6rBif.s 			page 8


 327              		.loc 1 71 15 view .LVU83
 328 0014 0592     		str	r2, [sp, #20]
  72:src/main.c    **** 	volatile int id_lot_l = *(uint32_t*)(UID_BASE+0x4) & 0xFFFFFF00;
 329              		.loc 1 72 2 is_stmt 1 view .LVU84
 330              		.loc 1 72 26 is_stmt 0 view .LVU85
 331 0016 D3F89425 		ldr	r2, [r3, #1428]
 332              		.loc 1 72 53 view .LVU86
 333 001a 22F0FF02 		bic	r2, r2, #255
 334              		.loc 1 72 15 view .LVU87
 335 001e 0492     		str	r2, [sp, #16]
  73:src/main.c    **** 	volatile int id_lot_h = *(uint32_t*)(UID_BASE+0x8);
 336              		.loc 1 73 2 is_stmt 1 view .LVU88
 337              		.loc 1 73 26 is_stmt 0 view .LVU89
 338 0020 D3F89835 		ldr	r3, [r3, #1432]
 339              		.loc 1 73 15 view .LVU90
 340 0024 0393     		str	r3, [sp, #12]
  74:src/main.c    **** 	volatile char id_lot[7] = {
 341              		.loc 1 74 2 is_stmt 1 view .LVU91
  75:src/main.c    **** 		(id_lot_l >> 8) & 0xFF,
 342              		.loc 1 75 13 is_stmt 0 view .LVU92
 343 0026 049B     		ldr	r3, [sp, #16]
 344 0028 1B12     		asrs	r3, r3, #8
  74:src/main.c    **** 	volatile char id_lot[7] = {
 345              		.loc 1 74 16 view .LVU93
 346 002a 8DF82030 		strb	r3, [sp, #32]
  76:src/main.c    **** 		(id_lot_l >> 16) & 0xFF,
 347              		.loc 1 76 13 view .LVU94
 348 002e 049B     		ldr	r3, [sp, #16]
 349 0030 1B14     		asrs	r3, r3, #16
  74:src/main.c    **** 	volatile char id_lot[7] = {
 350              		.loc 1 74 16 view .LVU95
 351 0032 8DF82130 		strb	r3, [sp, #33]
  77:src/main.c    **** 		(id_lot_l >> 24) & 0xFF,
 352              		.loc 1 77 13 view .LVU96
 353 0036 049B     		ldr	r3, [sp, #16]
 354 0038 1B16     		asrs	r3, r3, #24
  74:src/main.c    **** 		(id_lot_l >> 8) & 0xFF,
 355              		.loc 1 74 16 view .LVU97
 356 003a 8DF82230 		strb	r3, [sp, #34]
 357 003e 039B     		ldr	r3, [sp, #12]
 358 0040 8DF82330 		strb	r3, [sp, #35]
  78:src/main.c    **** 		(id_lot_h) & 0xFF,
  79:src/main.c    **** 		(id_lot_h >> 8) & 0xFF,
 359              		.loc 1 79 13 view .LVU98
 360 0044 039B     		ldr	r3, [sp, #12]
 361 0046 1B12     		asrs	r3, r3, #8
  74:src/main.c    **** 		(id_lot_l >> 8) & 0xFF,
 362              		.loc 1 74 16 view .LVU99
 363 0048 8DF82430 		strb	r3, [sp, #36]
  80:src/main.c    **** 		(id_lot_h >> 16) & 0xFF,
 364              		.loc 1 80 13 view .LVU100
 365 004c 039B     		ldr	r3, [sp, #12]
 366 004e 1B14     		asrs	r3, r3, #16
  74:src/main.c    **** 		(id_lot_l >> 8) & 0xFF,
 367              		.loc 1 74 16 view .LVU101
 368 0050 8DF82530 		strb	r3, [sp, #37]
  81:src/main.c    **** 		(id_lot_h >> 24) & 0xFF
ARM GAS  /tmp/ccY6rBif.s 			page 9


 369              		.loc 1 81 13 view .LVU102
 370 0054 039B     		ldr	r3, [sp, #12]
 371 0056 1B16     		asrs	r3, r3, #24
  74:src/main.c    **** 		(id_lot_l >> 8) & 0xFF,
 372              		.loc 1 74 16 view .LVU103
 373 0058 8DF82630 		strb	r3, [sp, #38]
 374 005c 0AAB     		add	r3, sp, #40
 375 005e 13E90300 		ldmdb	r3, {r0, r1}
 376 0062 0190     		str	r0, [sp, #4]
 377 0064 ADF80810 		strh	r1, [sp, #8]	@ movhi
 378 0068 090C     		lsrs	r1, r1, #16
 379 006a 8DF80A10 		strb	r1, [sp, #10]
  82:src/main.c    **** 	};
  83:src/main.c    **** 	RCC->AHB2ENR = 0x000530FF; // enable clock to all gpio banks, usb otg, adc, crypto 
 380              		.loc 1 83 2 is_stmt 1 view .LVU104
 381              		.loc 1 83 15 is_stmt 0 view .LVU105
 382 006e 174B     		ldr	r3, .L28+4
 383 0070 174A     		ldr	r2, .L28+8
 384 0072 DA64     		str	r2, [r3, #76]
  84:src/main.c    **** 	RCC->AHB3ENR = 0x00000100; // enable clock to QSPI 
 385              		.loc 1 84 2 is_stmt 1 view .LVU106
 386              		.loc 1 84 15 is_stmt 0 view .LVU107
 387 0074 4FF48072 		mov	r2, #256
 388 0078 1A65     		str	r2, [r3, #80]
  85:src/main.c    **** 	RCC->APB1ENR1 = 
 389              		.loc 1 85 2 is_stmt 1 view .LVU108
 390              		.loc 1 85 16 is_stmt 0 view .LVU109
 391 007a 164A     		ldr	r2, .L28+12
 392 007c 9A65     		str	r2, [r3, #88]
  86:src/main.c    **** 		1 << 28 // enable power control 
  87:src/main.c    **** 		| 1 << 22 // enable i2c2 
  88:src/main.c    **** 		| 1 << 15 // enable spi3 
  89:src/main.c    **** 		| 1 << 14 // enable spi2 
  90:src/main.c    **** 		| 1 << 10; // enable rtc apb 
  91:src/main.c    **** 	RCC->APB1ENR2 = 
 393              		.loc 1 91 2 is_stmt 1 view .LVU110
 394              		.loc 1 91 16 is_stmt 0 view .LVU111
 395 007e 0122     		movs	r2, #1
 396 0080 DA65     		str	r2, [r3, #92]
  92:src/main.c    **** 		1 << 0; // enable lpuart1 
  93:src/main.c    **** 	RCC->APB2ENR = 1; // enable syscfg 
 397              		.loc 1 93 2 is_stmt 1 view .LVU112
 398              		.loc 1 93 15 is_stmt 0 view .LVU113
 399 0082 1A66     		str	r2, [r3, #96]
  94:src/main.c    **** 	FLASH->ACR = 0x600 | 4 | 1<<8; // flash access latency to four wait states, prefetch enable lol 
 400              		.loc 1 94 2 is_stmt 1 view .LVU114
 401              		.loc 1 94 13 is_stmt 0 view .LVU115
 402 0084 144A     		ldr	r2, .L28+16
 403 0086 40F20471 		movw	r1, #1796
 404 008a 1160     		str	r1, [r2]
  95:src/main.c    **** 	//FLASH->ACR = 0x604; // OVERCLOCK! for testing only 
  96:src/main.c    **** 	RCC->CR |= 1 << 8; // enable HSI 
 405              		.loc 1 96 2 is_stmt 1 view .LVU116
 406              		.loc 1 96 5 is_stmt 0 view .LVU117
 407 008c 1A68     		ldr	r2, [r3]
 408              		.loc 1 96 10 view .LVU118
 409 008e 42F48072 		orr	r2, r2, #256
ARM GAS  /tmp/ccY6rBif.s 			page 10


 410 0092 1A60     		str	r2, [r3]
  97:src/main.c    **** 	RCC->PLLCFGR = 
 411              		.loc 1 97 2 is_stmt 1 view .LVU119
 412              		.loc 1 97 15 is_stmt 0 view .LVU120
 413 0094 114A     		ldr	r2, .L28+20
 414 0096 DA60     		str	r2, [r3, #12]
  98:src/main.c    **** 		0x0 << 25 // PLLR = 2 
  99:src/main.c    **** 		| 1 << 24 // PLLREN = 1 
 100:src/main.c    **** 		| 0x0 << 21 // PLLQ = 2 
 101:src/main.c    **** 		| 1 << 20 // PLLQEN (PLL48M1CLK) output enabled 
 102:src/main.c    **** 		| 0x0 << 17 // PLLP default 
 103:src/main.c    **** 		| 0 << 16 // PLLSAI3 not enabled  
 104:src/main.c    **** 		 | 10 << 8 // PLLN = 10 
 105:src/main.c    **** 	//	| 20 << 8 // OVERCLOCK! for testing only 
 106:src/main.c    **** 		| 0 << 4 // PLLM = 1 
 107:src/main.c    **** 		| 0x2; // HSI16 as input clock to PLLs 
 108:src/main.c    **** 	RCC->PLLSAI1CFGR = 
 415              		.loc 1 108 2 is_stmt 1 view .LVU121
 416              		.loc 1 108 19 is_stmt 0 view .LVU122
 417 0098 114A     		ldr	r2, .L28+24
 418 009a 1A61     		str	r2, [r3, #16]
 109:src/main.c    **** 		0x1 << 25 // PLLSAI1R = 4 
 110:src/main.c    **** 		| 1 << 24 // PLLSAI1REN = PLLADC1CLK enable 
 111:src/main.c    **** 		| 0x1 << 21 // PLLSAI1Q = 4
 112:src/main.c    **** 		| 1 << 20 // PLLSAI1QEN = PLL48M2CLK enable
 113:src/main.c    **** 		| 0x0 << 17 // PLLSAI1P = default 
 114:src/main.c    **** 		| 0 << 16 // PLLSAI1PEN = 0
 115:src/main.c    **** 		| 12 << 8; // PLLSAI1N = 12 
 116:src/main.c    **** 	RCC->CR |= (1 << 24) | (1 << 26); // enable PLL and PLLSAI1 
 419              		.loc 1 116 2 is_stmt 1 view .LVU123
 420              		.loc 1 116 5 is_stmt 0 view .LVU124
 421 009c 1A68     		ldr	r2, [r3]
 422              		.loc 1 116 10 view .LVU125
 423 009e 42F0A062 		orr	r2, r2, #83886080
 424 00a2 1A60     		str	r2, [r3]
 117:src/main.c    **** 	while (!(RCC->CR & (1 << 25))); // wait for PLL lock 
 425              		.loc 1 117 2 is_stmt 1 view .LVU126
 426              	.L25:
 427              		.loc 1 117 9 discriminator 1 view .LVU127
 428              		.loc 1 117 14 is_stmt 0 discriminator 1 view .LVU128
 429 00a4 094B     		ldr	r3, .L28+4
 430 00a6 1B68     		ldr	r3, [r3]
 431              		.loc 1 117 9 discriminator 1 view .LVU129
 432 00a8 13F0007F 		tst	r3, #33554432
 433 00ac FAD0     		beq	.L25
 434              	.L26:
 118:src/main.c    **** 	while (!(RCC->CR & (1 << 27))); // wait for PLLSAI1 lock 
 435              		.loc 1 118 9 is_stmt 1 discriminator 1 view .LVU130
 436              		.loc 1 118 14 is_stmt 0 discriminator 1 view .LVU131
 437 00ae 074B     		ldr	r3, .L28+4
 438 00b0 1B68     		ldr	r3, [r3]
 439              		.loc 1 118 9 discriminator 1 view .LVU132
 440 00b2 13F0006F 		tst	r3, #134217728
 441 00b6 FAD0     		beq	.L26
 119:src/main.c    **** 	RCC->CFGR = 0x3; // system clock to PLL 
 442              		.loc 1 119 2 is_stmt 1 view .LVU133
 443              		.loc 1 119 12 is_stmt 0 view .LVU134
ARM GAS  /tmp/ccY6rBif.s 			page 11


 444 00b8 044B     		ldr	r3, .L28+4
 445 00ba 0322     		movs	r2, #3
 446 00bc 9A60     		str	r2, [r3, #8]
 120:src/main.c    **** 	core_MHz = 80;
 447              		.loc 1 120 2 is_stmt 1 view .LVU135
 448              		.loc 1 120 11 is_stmt 0 view .LVU136
 449 00be 094B     		ldr	r3, .L28+28
 450 00c0 5022     		movs	r2, #80
 451 00c2 1A60     		str	r2, [r3]
 121:src/main.c    **** }
 452              		.loc 1 121 1 view .LVU137
 453 00c4 0AB0     		add	sp, sp, #40
 454              	.LCFI4:
 455              		.cfi_def_cfa_offset 0
 456              		@ sp needed
 457 00c6 7047     		bx	lr
 458              	.L29:
 459              		.align	2
 460              	.L28:
 461 00c8 0070FF1F 		.word	536834048
 462 00cc 00100240 		.word	1073876992
 463 00d0 FF300500 		.word	340223
 464 00d4 00C44010 		.word	272679936
 465 00d8 00200240 		.word	1073881088
 466 00dc 020A1001 		.word	17828354
 467 00e0 000C3003 		.word	53480448
 468 00e4 00000000 		.word	core_MHz
 469              		.cfi_endproc
 470              	.LFE137:
 472              		.section	.text.gpio_high,"ax",%progbits
 473              		.align	1
 474              		.global	gpio_high
 475              		.syntax unified
 476              		.thumb
 477              		.thumb_func
 479              	gpio_high:
 480              	.LVL28:
 481              	.LFB138:
 122:src/main.c    **** 
 123:src/main.c    **** void gpio_high(GPIO_TypeDef * port, int pin) {
 482              		.loc 1 123 46 is_stmt 1 view -0
 483              		.cfi_startproc
 484              		@ args = 0, pretend = 0, frame = 0
 485              		@ frame_needed = 0, uses_anonymous_args = 0
 486              		@ link register save eliminated.
 124:src/main.c    **** 	port->BSRR = 1 << pin;
 487              		.loc 1 124 2 view .LVU139
 488              		.loc 1 124 17 is_stmt 0 view .LVU140
 489 0000 0123     		movs	r3, #1
 490 0002 8B40     		lsls	r3, r3, r1
 491              		.loc 1 124 13 view .LVU141
 492 0004 8361     		str	r3, [r0, #24]
 125:src/main.c    **** }
 493              		.loc 1 125 1 view .LVU142
 494 0006 7047     		bx	lr
 495              		.cfi_endproc
 496              	.LFE138:
ARM GAS  /tmp/ccY6rBif.s 			page 12


 498              		.section	.text.gpio_low,"ax",%progbits
 499              		.align	1
 500              		.global	gpio_low
 501              		.syntax unified
 502              		.thumb
 503              		.thumb_func
 505              	gpio_low:
 506              	.LVL29:
 507              	.LFB139:
 126:src/main.c    **** 
 127:src/main.c    **** void gpio_low(GPIO_TypeDef * port, int pin) {
 508              		.loc 1 127 45 is_stmt 1 view -0
 509              		.cfi_startproc
 510              		@ args = 0, pretend = 0, frame = 0
 511              		@ frame_needed = 0, uses_anonymous_args = 0
 512              		@ link register save eliminated.
 128:src/main.c    **** 	port->BSRR = 1 << (pin+16);
 513              		.loc 1 128 2 view .LVU144
 514              		.loc 1 128 24 is_stmt 0 view .LVU145
 515 0000 1031     		adds	r1, r1, #16
 516              	.LVL30:
 517              		.loc 1 128 17 view .LVU146
 518 0002 0123     		movs	r3, #1
 519 0004 8B40     		lsls	r3, r3, r1
 520              		.loc 1 128 13 view .LVU147
 521 0006 8361     		str	r3, [r0, #24]
 129:src/main.c    **** }
 522              		.loc 1 129 1 view .LVU148
 523 0008 7047     		bx	lr
 524              		.cfi_endproc
 525              	.LFE139:
 527              		.section	.text.gpio_set,"ax",%progbits
 528              		.align	1
 529              		.global	gpio_set
 530              		.syntax unified
 531              		.thumb
 532              		.thumb_func
 534              	gpio_set:
 535              	.LVL31:
 536              	.LFB140:
 130:src/main.c    **** 
 131:src/main.c    **** void gpio_set(GPIO_TypeDef * port, int pin, int value) {
 537              		.loc 1 131 56 is_stmt 1 view -0
 538              		.cfi_startproc
 539              		@ args = 0, pretend = 0, frame = 0
 540              		@ frame_needed = 0, uses_anonymous_args = 0
 541              		.loc 1 131 56 is_stmt 0 view .LVU150
 542 0000 08B5     		push	{r3, lr}
 543              	.LCFI5:
 544              		.cfi_def_cfa_offset 8
 545              		.cfi_offset 3, -8
 546              		.cfi_offset 14, -4
 132:src/main.c    **** 	if (value) {
 547              		.loc 1 132 2 is_stmt 1 view .LVU151
 548              		.loc 1 132 5 is_stmt 0 view .LVU152
 549 0002 12B1     		cbz	r2, .L33
 133:src/main.c    **** 		gpio_high(port, pin);
ARM GAS  /tmp/ccY6rBif.s 			page 13


 550              		.loc 1 133 3 is_stmt 1 view .LVU153
 551 0004 FFF7FEFF 		bl	gpio_high
 552              	.LVL32:
 553              	.L32:
 134:src/main.c    **** 	} else {
 135:src/main.c    **** 		gpio_low(port, pin);
 136:src/main.c    **** 	}
 137:src/main.c    **** }
 554              		.loc 1 137 1 is_stmt 0 view .LVU154
 555 0008 08BD     		pop	{r3, pc}
 556              	.LVL33:
 557              	.L33:
 135:src/main.c    **** 	}
 558              		.loc 1 135 3 is_stmt 1 view .LVU155
 559 000a FFF7FEFF 		bl	gpio_low
 560              	.LVL34:
 561              		.loc 1 137 1 is_stmt 0 view .LVU156
 562 000e FBE7     		b	.L32
 563              		.cfi_endproc
 564              	.LFE140:
 566              		.section	.text.gpio_read,"ax",%progbits
 567              		.align	1
 568              		.global	gpio_read
 569              		.syntax unified
 570              		.thumb
 571              		.thumb_func
 573              	gpio_read:
 574              	.LVL35:
 575              	.LFB141:
 138:src/main.c    **** 
 139:src/main.c    **** int gpio_read(GPIO_TypeDef * port, int pin) {
 576              		.loc 1 139 45 is_stmt 1 view -0
 577              		.cfi_startproc
 578              		@ args = 0, pretend = 0, frame = 0
 579              		@ frame_needed = 0, uses_anonymous_args = 0
 580              		@ link register save eliminated.
 140:src/main.c    **** 	if (port->IDR & (1 << pin)) {
 581              		.loc 1 140 2 view .LVU158
 582              		.loc 1 140 10 is_stmt 0 view .LVU159
 583 0000 0269     		ldr	r2, [r0, #16]
 584              		.loc 1 140 21 view .LVU160
 585 0002 0123     		movs	r3, #1
 586 0004 8B40     		lsls	r3, r3, r1
 587              		.loc 1 140 5 view .LVU161
 588 0006 1A42     		tst	r2, r3
 589 0008 01D0     		beq	.L38
 141:src/main.c    **** 		return 1;
 590              		.loc 1 141 10 view .LVU162
 591 000a 0120     		movs	r0, #1
 592              	.LVL36:
 593              		.loc 1 141 10 view .LVU163
 594 000c 7047     		bx	lr
 595              	.LVL37:
 596              	.L38:
 142:src/main.c    **** 	} else {
 143:src/main.c    **** 		return 0;
 597              		.loc 1 143 10 view .LVU164
ARM GAS  /tmp/ccY6rBif.s 			page 14


 598 000e 0020     		movs	r0, #0
 599              	.LVL38:
 144:src/main.c    **** 	}
 145:src/main.c    **** }
 600              		.loc 1 145 1 view .LVU165
 601 0010 7047     		bx	lr
 602              		.cfi_endproc
 603              	.LFE141:
 605              		.section	.text.gpio_mode,"ax",%progbits
 606              		.align	1
 607              		.global	gpio_mode
 608              		.syntax unified
 609              		.thumb
 610              		.thumb_func
 612              	gpio_mode:
 613              	.LVL39:
 614              	.LFB142:
 146:src/main.c    **** 
 147:src/main.c    **** 
 148:src/main.c    **** #define GPIO_DIGITAL_IN		0 
 149:src/main.c    **** #define GPIO_DIGITAL_OUT	1 
 150:src/main.c    **** #define GPIO_AF 			2 
 151:src/main.c    **** #define GPIO_ANALOG_IN 		3 
 152:src/main.c    **** #define GPIO_PUSH_PULL 		0 
 153:src/main.c    **** #define GPIO_OPEN_DRAIN		1 
 154:src/main.c    **** #define GPIO_LOW_SPEED		0 
 155:src/main.c    **** #define GPIO_MED_SPEED		1 
 156:src/main.c    **** #define GPIO_HI_SPEED		2 
 157:src/main.c    **** #define GPIO_VERY_HI_SPEED	3 
 158:src/main.c    **** #define GPIO_NO_PULL		0 
 159:src/main.c    **** #define GPIO_PULL_UP		1 
 160:src/main.c    **** #define GPIO_PULL_DOWN		2 
 161:src/main.c    **** 
 162:src/main.c    **** void gpio_mode(GPIO_TypeDef * port, int pin, int mode, int open_drain, int speed, int pull) {
 615              		.loc 1 162 93 is_stmt 1 view -0
 616              		.cfi_startproc
 617              		@ args = 8, pretend = 0, frame = 0
 618              		@ frame_needed = 0, uses_anonymous_args = 0
 619              		.loc 1 162 93 is_stmt 0 view .LVU167
 620 0000 10B5     		push	{r4, lr}
 621              	.LCFI6:
 622              		.cfi_def_cfa_offset 8
 623              		.cfi_offset 4, -8
 624              		.cfi_offset 14, -4
 163:src/main.c    **** 	port->MODER = (port->MODER & ~(0x3 << (pin*2))) | ((mode & 0x3) << (pin*2)); // 0 digital in with 
 625              		.loc 1 163 2 is_stmt 1 view .LVU168
 626              		.loc 1 163 21 is_stmt 0 view .LVU169
 627 0002 0468     		ldr	r4, [r0]
 628              		.loc 1 163 44 view .LVU170
 629 0004 4FEA410E 		lsl	lr, r1, #1
 630              		.loc 1 163 37 view .LVU171
 631 0008 4FF0030C 		mov	ip, #3
 632 000c 0CFA0EFC 		lsl	ip, ip, lr
 633              		.loc 1 163 29 view .LVU172
 634 0010 24EA0C04 		bic	r4, r4, ip
 635              		.loc 1 163 59 view .LVU173
 636 0014 02F00302 		and	r2, r2, #3
ARM GAS  /tmp/ccY6rBif.s 			page 15


 637              	.LVL40:
 638              		.loc 1 163 66 view .LVU174
 639 0018 02FA0EF2 		lsl	r2, r2, lr
 640              		.loc 1 163 50 view .LVU175
 641 001c 1443     		orrs	r4, r4, r2
 642              		.loc 1 163 14 view .LVU176
 643 001e 0460     		str	r4, [r0]
 164:src/main.c    **** 	port->OTYPER = (port->OTYPER & ~(0x1 << pin)) | ((open_drain & 0x1) << pin); // 0 is normal push p
 644              		.loc 1 164 2 is_stmt 1 view .LVU177
 645              		.loc 1 164 22 is_stmt 0 view .LVU178
 646 0020 4268     		ldr	r2, [r0, #4]
 647              		.loc 1 164 39 view .LVU179
 648 0022 0124     		movs	r4, #1
 649 0024 8C40     		lsls	r4, r4, r1
 650              		.loc 1 164 31 view .LVU180
 651 0026 22EA0402 		bic	r2, r2, r4
 652              		.loc 1 164 63 view .LVU181
 653 002a 03F00103 		and	r3, r3, #1
 654              	.LVL41:
 655              		.loc 1 164 70 view .LVU182
 656 002e 03FA01F1 		lsl	r1, r3, r1
 657              	.LVL42:
 658              		.loc 1 164 48 view .LVU183
 659 0032 0A43     		orrs	r2, r2, r1
 660              		.loc 1 164 15 view .LVU184
 661 0034 4260     		str	r2, [r0, #4]
 165:src/main.c    **** 	port->OSPEEDR = (port->OSPEEDR & ~(0x3 << (pin*2))) | ((speed & 0x3) << (pin*2)); // 0x3 is very h
 662              		.loc 1 165 2 is_stmt 1 view .LVU185
 663              		.loc 1 165 23 is_stmt 0 view .LVU186
 664 0036 8368     		ldr	r3, [r0, #8]
 665              		.loc 1 165 33 view .LVU187
 666 0038 23EA0C03 		bic	r3, r3, ip
 667              		.loc 1 165 64 view .LVU188
 668 003c 029A     		ldr	r2, [sp, #8]
 669 003e 02F00302 		and	r2, r2, #3
 670              		.loc 1 165 71 view .LVU189
 671 0042 02FA0EF2 		lsl	r2, r2, lr
 672              		.loc 1 165 54 view .LVU190
 673 0046 1343     		orrs	r3, r3, r2
 674              		.loc 1 165 16 view .LVU191
 675 0048 8360     		str	r3, [r0, #8]
 166:src/main.c    **** 	port->PUPDR = (port->PUPDR & ~(0x3 << (pin*2))) | ((pull & 0x3) << (pin*2)); // 0 no pupd, 1 pu, 2
 676              		.loc 1 166 2 is_stmt 1 view .LVU192
 677              		.loc 1 166 21 is_stmt 0 view .LVU193
 678 004a C368     		ldr	r3, [r0, #12]
 679              		.loc 1 166 29 view .LVU194
 680 004c 23EA0C03 		bic	r3, r3, ip
 681              		.loc 1 166 59 view .LVU195
 682 0050 039A     		ldr	r2, [sp, #12]
 683 0052 02F00302 		and	r2, r2, #3
 684              		.loc 1 166 66 view .LVU196
 685 0056 02FA0EF2 		lsl	r2, r2, lr
 686              		.loc 1 166 50 view .LVU197
 687 005a 1343     		orrs	r3, r3, r2
 688              		.loc 1 166 14 view .LVU198
 689 005c C360     		str	r3, [r0, #12]
 167:src/main.c    **** }
ARM GAS  /tmp/ccY6rBif.s 			page 16


 690              		.loc 1 167 1 view .LVU199
 691 005e 10BD     		pop	{r4, pc}
 692              		.loc 1 167 1 view .LVU200
 693              		.cfi_endproc
 694              	.LFE142:
 696              		.section	.text.gpio_af,"ax",%progbits
 697              		.align	1
 698              		.global	gpio_af
 699              		.syntax unified
 700              		.thumb
 701              		.thumb_func
 703              	gpio_af:
 704              	.LVL43:
 705              	.LFB143:
 168:src/main.c    **** 
 169:src/main.c    **** void gpio_af(GPIO_TypeDef * port, uint8_t pin, uint8_t afn) {
 706              		.loc 1 169 61 is_stmt 1 view -0
 707              		.cfi_startproc
 708              		@ args = 0, pretend = 0, frame = 0
 709              		@ frame_needed = 0, uses_anonymous_args = 0
 710              		.loc 1 169 61 is_stmt 0 view .LVU202
 711 0000 08B5     		push	{r3, lr}
 712              	.LCFI7:
 713              		.cfi_def_cfa_offset 8
 714              		.cfi_offset 3, -8
 715              		.cfi_offset 14, -4
 170:src/main.c    **** 	port->MODER = (port->MODER & ~(0x3 << (pin*2))) | ((0x2) << (pin*2)); 
 716              		.loc 1 170 2 is_stmt 1 view .LVU203
 717              		.loc 1 170 21 is_stmt 0 view .LVU204
 718 0002 0368     		ldr	r3, [r0]
 719              		.loc 1 170 44 view .LVU205
 720 0004 4FEA410E 		lsl	lr, r1, #1
 721              		.loc 1 170 37 view .LVU206
 722 0008 4FF0030C 		mov	ip, #3
 723 000c 0CFA0EFC 		lsl	ip, ip, lr
 724              		.loc 1 170 29 view .LVU207
 725 0010 23EA0C03 		bic	r3, r3, ip
 726              		.loc 1 170 59 view .LVU208
 727 0014 4FF0020C 		mov	ip, #2
 728 0018 0CFA0EFC 		lsl	ip, ip, lr
 729              		.loc 1 170 50 view .LVU209
 730 001c 43EA0C03 		orr	r3, r3, ip
 731              		.loc 1 170 14 view .LVU210
 732 0020 0360     		str	r3, [r0]
 171:src/main.c    **** 	if (pin > 7) {
 733              		.loc 1 171 2 is_stmt 1 view .LVU211
 734              		.loc 1 171 5 is_stmt 0 view .LVU212
 735 0022 0729     		cmp	r1, #7
 736 0024 13D9     		bls	.L42
 172:src/main.c    **** 		port->AFR[1] = (port->AFR[1] & ~(0xF << ((pin-8)*4))) | ((afn & 0xF) << ((pin-8)*4)); 
 737              		.loc 1 172 3 is_stmt 1 view .LVU213
 738              		.loc 1 172 28 is_stmt 0 view .LVU214
 739 0026 436A     		ldr	r3, [r0, #36]
 740              		.loc 1 172 48 view .LVU215
 741 0028 A1F1080C 		sub	ip, r1, #8
 742              		.loc 1 172 51 view .LVU216
 743 002c 4FEA8C0C 		lsl	ip, ip, #2
ARM GAS  /tmp/ccY6rBif.s 			page 17


 744              		.loc 1 172 40 view .LVU217
 745 0030 4FF00F0E 		mov	lr, #15
 746 0034 0EFA0CFE 		lsl	lr, lr, ip
 747              		.loc 1 172 32 view .LVU218
 748 0038 23EA0E03 		bic	r3, r3, lr
 749              		.loc 1 172 65 view .LVU219
 750 003c 02F00F02 		and	r2, r2, #15
 751              	.LVL44:
 752              		.loc 1 172 72 view .LVU220
 753 0040 02FA0CF2 		lsl	r2, r2, ip
 754              		.loc 1 172 57 view .LVU221
 755 0044 1343     		orrs	r3, r3, r2
 756              		.loc 1 172 16 view .LVU222
 757 0046 4362     		str	r3, [r0, #36]
 758              	.L43:
 173:src/main.c    **** 	} else {
 174:src/main.c    **** 		port->AFR[0] = (port->AFR[0] & ~(0xF << (pin*4))) | ((afn & 0xF) << (pin*4)); 
 175:src/main.c    **** 	}
 176:src/main.c    **** 	gpio_low(port, pin); 
 759              		.loc 1 176 2 is_stmt 1 view .LVU223
 760 0048 FFF7FEFF 		bl	gpio_low
 761              	.LVL45:
 177:src/main.c    **** }
 762              		.loc 1 177 1 is_stmt 0 view .LVU224
 763 004c 08BD     		pop	{r3, pc}
 764              	.LVL46:
 765              	.L42:
 174:src/main.c    **** 	}
 766              		.loc 1 174 3 is_stmt 1 view .LVU225
 174:src/main.c    **** 	}
 767              		.loc 1 174 28 is_stmt 0 view .LVU226
 768 004e 036A     		ldr	r3, [r0, #32]
 174:src/main.c    **** 	}
 769              		.loc 1 174 47 view .LVU227
 770 0050 4FEA810E 		lsl	lr, r1, #2
 174:src/main.c    **** 	}
 771              		.loc 1 174 40 view .LVU228
 772 0054 4FF00F0C 		mov	ip, #15
 773 0058 0CFA0EFC 		lsl	ip, ip, lr
 174:src/main.c    **** 	}
 774              		.loc 1 174 32 view .LVU229
 775 005c 23EA0C03 		bic	r3, r3, ip
 174:src/main.c    **** 	}
 776              		.loc 1 174 61 view .LVU230
 777 0060 02F00F02 		and	r2, r2, #15
 778              	.LVL47:
 174:src/main.c    **** 	}
 779              		.loc 1 174 68 view .LVU231
 780 0064 02FA0EF2 		lsl	r2, r2, lr
 174:src/main.c    **** 	}
 781              		.loc 1 174 53 view .LVU232
 782 0068 1343     		orrs	r3, r3, r2
 174:src/main.c    **** 	}
 783              		.loc 1 174 16 view .LVU233
 784 006a 0362     		str	r3, [r0, #32]
 785 006c ECE7     		b	.L43
 786              		.cfi_endproc
ARM GAS  /tmp/ccY6rBif.s 			page 18


 787              	.LFE143:
 789              		.section	.text.init_gpio,"ax",%progbits
 790              		.align	1
 791              		.global	init_gpio
 792              		.syntax unified
 793              		.thumb
 794              		.thumb_func
 796              	init_gpio:
 797              	.LFB144:
 178:src/main.c    **** 
 179:src/main.c    **** void init_gpio() {
 798              		.loc 1 179 18 is_stmt 1 view -0
 799              		.cfi_startproc
 800              		@ args = 0, pretend = 0, frame = 0
 801              		@ frame_needed = 0, uses_anonymous_args = 0
 802 0000 70B5     		push	{r4, r5, r6, lr}
 803              	.LCFI8:
 804              		.cfi_def_cfa_offset 16
 805              		.cfi_offset 4, -16
 806              		.cfi_offset 5, -12
 807              		.cfi_offset 6, -8
 808              		.cfi_offset 14, -4
 809 0002 82B0     		sub	sp, sp, #8
 810              	.LCFI9:
 811              		.cfi_def_cfa_offset 24
 180:src/main.c    **** 	PWR->CR2 |= 1 << 9; // enable VDDIO2 supply for GPIOG 
 812              		.loc 1 180 2 view .LVU235
 813              		.loc 1 180 5 is_stmt 0 view .LVU236
 814 0004 334A     		ldr	r2, .L54
 815 0006 5368     		ldr	r3, [r2, #4]
 816              		.loc 1 180 11 view .LVU237
 817 0008 43F40073 		orr	r3, r3, #512
 818 000c 5360     		str	r3, [r2, #4]
 181:src/main.c    **** 	
 182:src/main.c    **** 	// wait until each GPIO is clocked and ready: 
 183:src/main.c    **** 	// (there is a delay before perph is enabled after RCC to synchronize internal bus stuff)
 184:src/main.c    **** 	while (GPIOA->OTYPER == 0xFFFFFFFF); 
 819              		.loc 1 184 2 is_stmt 1 view .LVU238
 820              	.L46:
 821              		.loc 1 184 23 discriminator 1 view .LVU239
 822              		.loc 1 184 14 is_stmt 0 discriminator 1 view .LVU240
 823 000e 4FF09043 		mov	r3, #1207959552
 824 0012 5B68     		ldr	r3, [r3, #4]
 825              		.loc 1 184 23 discriminator 1 view .LVU241
 826 0014 B3F1FF3F 		cmp	r3, #-1
 827 0018 F9D0     		beq	.L46
 828              	.L47:
 185:src/main.c    **** 	while (GPIOB->OTYPER == 0xFFFFFFFF); 
 829              		.loc 1 185 23 is_stmt 1 discriminator 1 view .LVU242
 830              		.loc 1 185 14 is_stmt 0 discriminator 1 view .LVU243
 831 001a 2F4B     		ldr	r3, .L54+4
 832 001c 5B68     		ldr	r3, [r3, #4]
 833              		.loc 1 185 23 discriminator 1 view .LVU244
 834 001e B3F1FF3F 		cmp	r3, #-1
 835 0022 FAD0     		beq	.L47
 836              	.L48:
 186:src/main.c    **** 	while (GPIOC->OTYPER == 0xFFFFFFFF); 
ARM GAS  /tmp/ccY6rBif.s 			page 19


 837              		.loc 1 186 23 is_stmt 1 discriminator 1 view .LVU245
 838              		.loc 1 186 14 is_stmt 0 discriminator 1 view .LVU246
 839 0024 2D4B     		ldr	r3, .L54+8
 840 0026 5B68     		ldr	r3, [r3, #4]
 841              		.loc 1 186 23 discriminator 1 view .LVU247
 842 0028 B3F1FF3F 		cmp	r3, #-1
 843 002c FAD0     		beq	.L48
 844              	.L49:
 187:src/main.c    **** 	while (GPIOD->OTYPER == 0xFFFFFFFF); 
 845              		.loc 1 187 23 is_stmt 1 discriminator 1 view .LVU248
 846              		.loc 1 187 14 is_stmt 0 discriminator 1 view .LVU249
 847 002e 2C4B     		ldr	r3, .L54+12
 848 0030 5B68     		ldr	r3, [r3, #4]
 849              		.loc 1 187 23 discriminator 1 view .LVU250
 850 0032 B3F1FF3F 		cmp	r3, #-1
 851 0036 FAD0     		beq	.L49
 852              	.L50:
 188:src/main.c    **** 	while (GPIOE->OTYPER == 0xFFFFFFFF); 
 853              		.loc 1 188 23 is_stmt 1 discriminator 1 view .LVU251
 854              		.loc 1 188 14 is_stmt 0 discriminator 1 view .LVU252
 855 0038 2A4B     		ldr	r3, .L54+16
 856 003a 5B68     		ldr	r3, [r3, #4]
 857              		.loc 1 188 23 discriminator 1 view .LVU253
 858 003c B3F1FF3F 		cmp	r3, #-1
 859 0040 FAD0     		beq	.L50
 860              	.L51:
 189:src/main.c    **** 	while (GPIOF->OTYPER == 0xFFFFFFFF); 
 861              		.loc 1 189 23 is_stmt 1 discriminator 1 view .LVU254
 862              		.loc 1 189 14 is_stmt 0 discriminator 1 view .LVU255
 863 0042 294B     		ldr	r3, .L54+20
 864 0044 5B68     		ldr	r3, [r3, #4]
 865              		.loc 1 189 23 discriminator 1 view .LVU256
 866 0046 B3F1FF3F 		cmp	r3, #-1
 867 004a FAD0     		beq	.L51
 868              	.L52:
 190:src/main.c    **** 	while (GPIOG->OTYPER == 0xFFFFFFFF); 
 869              		.loc 1 190 23 is_stmt 1 discriminator 1 view .LVU257
 870              		.loc 1 190 14 is_stmt 0 discriminator 1 view .LVU258
 871 004c 274B     		ldr	r3, .L54+24
 872 004e 5B68     		ldr	r3, [r3, #4]
 873              		.loc 1 190 23 discriminator 1 view .LVU259
 874 0050 B3F1FF3F 		cmp	r3, #-1
 875 0054 FAD0     		beq	.L52
 191:src/main.c    **** 	
 192:src/main.c    **** 	gpio_mode(GPIOB, 10, 0, 0, 0, 1); // BTNA - input with schmitt trigger, not open drain, low speed,
 876              		.loc 1 192 2 is_stmt 1 view .LVU260
 877 0056 204E     		ldr	r6, .L54+4
 878 0058 0125     		movs	r5, #1
 879 005a 0195     		str	r5, [sp, #4]
 880 005c 0024     		movs	r4, #0
 881 005e 0094     		str	r4, [sp]
 882 0060 2346     		mov	r3, r4
 883 0062 2246     		mov	r2, r4
 884 0064 0A21     		movs	r1, #10
 885 0066 3046     		mov	r0, r6
 886 0068 FFF7FEFF 		bl	gpio_mode
 887              	.LVL48:
ARM GAS  /tmp/ccY6rBif.s 			page 20


 193:src/main.c    **** 	gpio_mode(GPIOB, 11, 0, 0, 0, 1); // BTNB 
 888              		.loc 1 193 2 view .LVU261
 889 006c 0195     		str	r5, [sp, #4]
 890 006e 0094     		str	r4, [sp]
 891 0070 2346     		mov	r3, r4
 892 0072 2246     		mov	r2, r4
 893 0074 0B21     		movs	r1, #11
 894 0076 3046     		mov	r0, r6
 895 0078 FFF7FEFF 		bl	gpio_mode
 896              	.LVL49:
 194:src/main.c    **** 	
 195:src/main.c    **** 	gpio_mode(GPIOE, 6, 1, 0, 0, 0); // LED0 - output, not OD, low speed, no pull 
 897              		.loc 1 195 2 view .LVU262
 898 007c 06F54066 		add	r6, r6, #3072
 899 0080 0194     		str	r4, [sp, #4]
 900 0082 0094     		str	r4, [sp]
 901 0084 2346     		mov	r3, r4
 902 0086 2A46     		mov	r2, r5
 903 0088 0621     		movs	r1, #6
 904 008a 3046     		mov	r0, r6
 905 008c FFF7FEFF 		bl	gpio_mode
 906              	.LVL50:
 196:src/main.c    **** 	gpio_mode(GPIOE, 5, 1, 0, 0, 0); // LED1 
 907              		.loc 1 196 2 view .LVU263
 908 0090 0194     		str	r4, [sp, #4]
 909 0092 0094     		str	r4, [sp]
 910 0094 2346     		mov	r3, r4
 911 0096 2A46     		mov	r2, r5
 912 0098 0521     		movs	r1, #5
 913 009a 3046     		mov	r0, r6
 914 009c FFF7FEFF 		bl	gpio_mode
 915              	.LVL51:
 197:src/main.c    **** 	gpio_mode(GPIOE, 4, 1, 0, 0, 0); // LED2 
 916              		.loc 1 197 2 view .LVU264
 917 00a0 0194     		str	r4, [sp, #4]
 918 00a2 0094     		str	r4, [sp]
 919 00a4 2346     		mov	r3, r4
 920 00a6 2A46     		mov	r2, r5
 921 00a8 0421     		movs	r1, #4
 922 00aa 3046     		mov	r0, r6
 923 00ac FFF7FEFF 		bl	gpio_mode
 924              	.LVL52:
 198:src/main.c    **** 	gpio_mode(GPIOE, 3, 1, 0, 0, 0); // LED3 
 925              		.loc 1 198 2 view .LVU265
 926 00b0 0194     		str	r4, [sp, #4]
 927 00b2 0094     		str	r4, [sp]
 928 00b4 2346     		mov	r3, r4
 929 00b6 2A46     		mov	r2, r5
 930 00b8 0321     		movs	r1, #3
 931 00ba 3046     		mov	r0, r6
 932 00bc FFF7FEFF 		bl	gpio_mode
 933              	.LVL53:
 199:src/main.c    **** 	gpio_mode(GPIOE, 2, 1, 0, 0, 0); // LED4 
 934              		.loc 1 199 2 view .LVU266
 935 00c0 0194     		str	r4, [sp, #4]
 936 00c2 0094     		str	r4, [sp]
 937 00c4 2346     		mov	r3, r4
ARM GAS  /tmp/ccY6rBif.s 			page 21


 938 00c6 2A46     		mov	r2, r5
 939 00c8 0221     		movs	r1, #2
 940 00ca 3046     		mov	r0, r6
 941 00cc FFF7FEFF 		bl	gpio_mode
 942              	.LVL54:
 200:src/main.c    **** }
 943              		.loc 1 200 1 is_stmt 0 view .LVU267
 944 00d0 02B0     		add	sp, sp, #8
 945              	.LCFI10:
 946              		.cfi_def_cfa_offset 16
 947              		@ sp needed
 948 00d2 70BD     		pop	{r4, r5, r6, pc}
 949              	.L55:
 950              		.align	2
 951              	.L54:
 952 00d4 00700040 		.word	1073770496
 953 00d8 00040048 		.word	1207960576
 954 00dc 00080048 		.word	1207961600
 955 00e0 000C0048 		.word	1207962624
 956 00e4 00100048 		.word	1207963648
 957 00e8 00140048 		.word	1207964672
 958 00ec 00180048 		.word	1207965696
 959              		.cfi_endproc
 960              	.LFE144:
 962              		.section	.text.SysTick_Handler,"ax",%progbits
 963              		.align	1
 964              		.global	SysTick_Handler
 965              		.syntax unified
 966              		.thumb
 967              		.thumb_func
 969              	SysTick_Handler:
 970              	.LFB145:
 201:src/main.c    **** 
 202:src/main.c    **** unsigned int systick_time = 0; 
 203:src/main.c    **** void SysTick_Handler() {
 971              		.loc 1 203 24 is_stmt 1 view -0
 972              		.cfi_startproc
 973              		@ args = 0, pretend = 0, frame = 0
 974              		@ frame_needed = 0, uses_anonymous_args = 0
 975              		@ link register save eliminated.
 204:src/main.c    **** 	systick_time++;
 976              		.loc 1 204 2 view .LVU269
 977              		.loc 1 204 14 is_stmt 0 view .LVU270
 978 0000 024A     		ldr	r2, .L57
 979 0002 1368     		ldr	r3, [r2]
 980 0004 0133     		adds	r3, r3, #1
 981 0006 1360     		str	r3, [r2]
 205:src/main.c    **** }
 982              		.loc 1 205 1 view .LVU271
 983 0008 7047     		bx	lr
 984              	.L58:
 985 000a 00BF     		.align	2
 986              	.L57:
 987 000c 00000000 		.word	systick_time
 988              		.cfi_endproc
 989              	.LFE145:
 991              		.section	.text.delay_ms,"ax",%progbits
ARM GAS  /tmp/ccY6rBif.s 			page 22


 992              		.align	1
 993              		.global	delay_ms
 994              		.syntax unified
 995              		.thumb
 996              		.thumb_func
 998              	delay_ms:
 999              	.LVL55:
 1000              	.LFB146:
 206:src/main.c    **** 
 207:src/main.c    **** void delay_ms(unsigned int ms) {
 1001              		.loc 1 207 32 is_stmt 1 view -0
 1002              		.cfi_startproc
 1003              		@ args = 0, pretend = 0, frame = 0
 1004              		@ frame_needed = 0, uses_anonymous_args = 0
 1005              		@ link register save eliminated.
 208:src/main.c    **** 	if (!ms) return; 
 1006              		.loc 1 208 2 view .LVU273
 1007              		.loc 1 208 5 is_stmt 0 view .LVU274
 1008 0000 70B1     		cbz	r0, .L59
 209:src/main.c    **** 	unsigned int target = systick_time + ms; 
 1009              		.loc 1 209 2 is_stmt 1 view .LVU275
 1010              		.loc 1 209 37 is_stmt 0 view .LVU276
 1011 0002 084B     		ldr	r3, .L65
 1012 0004 1B68     		ldr	r3, [r3]
 1013              		.loc 1 209 15 view .LVU277
 1014 0006 0344     		add	r3, r3, r0
 1015              	.LVL56:
 210:src/main.c    **** 	while (target < systick_time) {__NOP();}; // in case overflow and wrapping 
 1016              		.loc 1 210 2 is_stmt 1 view .LVU278
 1017              		.loc 1 210 8 is_stmt 0 view .LVU279
 1018 0008 00E0     		b	.L61
 1019              	.L62:
 1020              		.loc 1 210 33 is_stmt 1 discriminator 2 view .LVU280
 1021              		.syntax unified
 1022              	@ 210 "src/main.c" 1
 1023 000a 00BF     		nop
 1024              	@ 0 "" 2
 1025              		.thumb
 1026              		.syntax unified
 1027              	.L61:
 1028              		.loc 1 210 16 discriminator 1 view .LVU281
 1029 000c 054A     		ldr	r2, .L65
 1030 000e 1268     		ldr	r2, [r2]
 1031 0010 9A42     		cmp	r2, r3
 1032 0012 FAD8     		bhi	.L62
 1033 0014 00E0     		b	.L63
 1034              	.L64:
 211:src/main.c    **** 	while (target > systick_time) {__NOP();}; 
 1035              		.loc 1 211 33 discriminator 2 view .LVU282
 1036              		.syntax unified
 1037              	@ 211 "src/main.c" 1
 1038 0016 00BF     		nop
 1039              	@ 0 "" 2
 1040              		.thumb
 1041              		.syntax unified
 1042              	.L63:
 1043              		.loc 1 211 16 discriminator 1 view .LVU283
ARM GAS  /tmp/ccY6rBif.s 			page 23


 1044 0018 024A     		ldr	r2, .L65
 1045 001a 1268     		ldr	r2, [r2]
 1046 001c 9A42     		cmp	r2, r3
 1047 001e FAD3     		bcc	.L64
 1048              	.LVL57:
 1049              	.L59:
 212:src/main.c    **** }
 1050              		.loc 1 212 1 is_stmt 0 view .LVU284
 1051 0020 7047     		bx	lr
 1052              	.L66:
 1053 0022 00BF     		.align	2
 1054              	.L65:
 1055 0024 00000000 		.word	systick_time
 1056              		.cfi_endproc
 1057              	.LFE146:
 1059              		.section	.text.init_nvic,"ax",%progbits
 1060              		.align	1
 1061              		.global	init_nvic
 1062              		.syntax unified
 1063              		.thumb
 1064              		.thumb_func
 1066              	init_nvic:
 1067              	.LFB147:
 213:src/main.c    **** 
 214:src/main.c    **** void init_nvic() {
 1068              		.loc 1 214 18 is_stmt 1 view -0
 1069              		.cfi_startproc
 1070              		@ args = 0, pretend = 0, frame = 0
 1071              		@ frame_needed = 0, uses_anonymous_args = 0
 1072              		@ link register save eliminated.
 215:src/main.c    **** 	__disable_irq();
 1073              		.loc 1 215 2 view .LVU286
 1074              	.LBB13:
 1075              	.LBI13:
 1076              		.file 2 "lib/st/cmsis_gcc.h"
   1:lib/st/cmsis_gcc.h **** /**************************************************************************//**
   2:lib/st/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:lib/st/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:lib/st/cmsis_gcc.h ****  * @version  V5.2.0
   5:lib/st/cmsis_gcc.h ****  * @date     08. May 2019
   6:lib/st/cmsis_gcc.h ****  ******************************************************************************/
   7:lib/st/cmsis_gcc.h **** /*
   8:lib/st/cmsis_gcc.h ****  * Copyright (c) 2009-2019 Arm Limited. All rights reserved.
   9:lib/st/cmsis_gcc.h ****  *
  10:lib/st/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:lib/st/cmsis_gcc.h ****  *
  12:lib/st/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:lib/st/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:lib/st/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:lib/st/cmsis_gcc.h ****  *
  16:lib/st/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:lib/st/cmsis_gcc.h ****  *
  18:lib/st/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:lib/st/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:lib/st/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:lib/st/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:lib/st/cmsis_gcc.h ****  * limitations under the License.
ARM GAS  /tmp/ccY6rBif.s 			page 24


  23:lib/st/cmsis_gcc.h ****  */
  24:lib/st/cmsis_gcc.h **** 
  25:lib/st/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:lib/st/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:lib/st/cmsis_gcc.h **** 
  28:lib/st/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:lib/st/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:lib/st/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:lib/st/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:lib/st/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:lib/st/cmsis_gcc.h **** 
  34:lib/st/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:lib/st/cmsis_gcc.h **** #ifndef __has_builtin
  36:lib/st/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:lib/st/cmsis_gcc.h **** #endif
  38:lib/st/cmsis_gcc.h **** 
  39:lib/st/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:lib/st/cmsis_gcc.h **** #ifndef   __ASM
  41:lib/st/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:lib/st/cmsis_gcc.h **** #endif
  43:lib/st/cmsis_gcc.h **** #ifndef   __INLINE
  44:lib/st/cmsis_gcc.h ****   #define __INLINE                               inline
  45:lib/st/cmsis_gcc.h **** #endif
  46:lib/st/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:lib/st/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:lib/st/cmsis_gcc.h **** #endif
  49:lib/st/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:lib/st/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:lib/st/cmsis_gcc.h **** #endif                                           
  52:lib/st/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:lib/st/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:lib/st/cmsis_gcc.h **** #endif
  55:lib/st/cmsis_gcc.h **** #ifndef   __USED
  56:lib/st/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:lib/st/cmsis_gcc.h **** #endif
  58:lib/st/cmsis_gcc.h **** #ifndef   __WEAK
  59:lib/st/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:lib/st/cmsis_gcc.h **** #endif
  61:lib/st/cmsis_gcc.h **** #ifndef   __PACKED
  62:lib/st/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:lib/st/cmsis_gcc.h **** #endif
  64:lib/st/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:lib/st/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:lib/st/cmsis_gcc.h **** #endif
  67:lib/st/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:lib/st/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:lib/st/cmsis_gcc.h **** #endif
  70:lib/st/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:lib/st/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:lib/st/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:lib/st/cmsis_gcc.h **** #endif
  78:lib/st/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic push
ARM GAS  /tmp/ccY6rBif.s 			page 25


  80:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:lib/st/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:lib/st/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:lib/st/cmsis_gcc.h **** #endif
  86:lib/st/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:lib/st/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:lib/st/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:lib/st/cmsis_gcc.h **** #endif
  94:lib/st/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:lib/st/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:lib/st/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:lib/st/cmsis_gcc.h **** #endif
 102:lib/st/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:lib/st/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:lib/st/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:lib/st/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:lib/st/cmsis_gcc.h **** #endif
 110:lib/st/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:lib/st/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:lib/st/cmsis_gcc.h **** #endif
 113:lib/st/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:lib/st/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:lib/st/cmsis_gcc.h **** #endif
 116:lib/st/cmsis_gcc.h **** #ifndef   __COMPILER_BARRIER
 117:lib/st/cmsis_gcc.h ****   #define __COMPILER_BARRIER()                   __ASM volatile("":::"memory")
 118:lib/st/cmsis_gcc.h **** #endif
 119:lib/st/cmsis_gcc.h **** 
 120:lib/st/cmsis_gcc.h **** /* #########################  Startup and Lowlevel Init  ######################## */
 121:lib/st/cmsis_gcc.h **** 
 122:lib/st/cmsis_gcc.h **** #ifndef __PROGRAM_START
 123:lib/st/cmsis_gcc.h **** 
 124:lib/st/cmsis_gcc.h **** /**
 125:lib/st/cmsis_gcc.h ****   \brief   Initializes data and bss sections
 126:lib/st/cmsis_gcc.h ****   \details This default implementations initialized all data and additional bss
 127:lib/st/cmsis_gcc.h ****            sections relying on .copy.table and .zero.table specified properly
 128:lib/st/cmsis_gcc.h ****            in the used linker script.
 129:lib/st/cmsis_gcc.h ****   
 130:lib/st/cmsis_gcc.h ****  */
 131:lib/st/cmsis_gcc.h **** __STATIC_FORCEINLINE __NO_RETURN void __cmsis_start(void)
 132:lib/st/cmsis_gcc.h **** {
 133:lib/st/cmsis_gcc.h ****   extern void _start(void) __NO_RETURN;
 134:lib/st/cmsis_gcc.h ****   
 135:lib/st/cmsis_gcc.h ****   typedef struct {
 136:lib/st/cmsis_gcc.h ****     uint32_t const* src;
ARM GAS  /tmp/ccY6rBif.s 			page 26


 137:lib/st/cmsis_gcc.h ****     uint32_t* dest;
 138:lib/st/cmsis_gcc.h ****     uint32_t  wlen;
 139:lib/st/cmsis_gcc.h ****   } __copy_table_t;
 140:lib/st/cmsis_gcc.h ****   
 141:lib/st/cmsis_gcc.h ****   typedef struct {
 142:lib/st/cmsis_gcc.h ****     uint32_t* dest;
 143:lib/st/cmsis_gcc.h ****     uint32_t  wlen;
 144:lib/st/cmsis_gcc.h ****   } __zero_table_t;
 145:lib/st/cmsis_gcc.h ****   
 146:lib/st/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_start__;
 147:lib/st/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_end__;
 148:lib/st/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_start__;
 149:lib/st/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_end__;
 150:lib/st/cmsis_gcc.h **** 
 151:lib/st/cmsis_gcc.h ****   for (__copy_table_t const* pTable = &__copy_table_start__; pTable < &__copy_table_end__; ++pTable
 152:lib/st/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 153:lib/st/cmsis_gcc.h ****       pTable->dest[i] = pTable->src[i];
 154:lib/st/cmsis_gcc.h ****     }
 155:lib/st/cmsis_gcc.h ****   }
 156:lib/st/cmsis_gcc.h ****  
 157:lib/st/cmsis_gcc.h ****   for (__zero_table_t const* pTable = &__zero_table_start__; pTable < &__zero_table_end__; ++pTable
 158:lib/st/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 159:lib/st/cmsis_gcc.h ****       pTable->dest[i] = 0u;
 160:lib/st/cmsis_gcc.h ****     }
 161:lib/st/cmsis_gcc.h ****   }
 162:lib/st/cmsis_gcc.h ****  
 163:lib/st/cmsis_gcc.h ****   _start();
 164:lib/st/cmsis_gcc.h **** }
 165:lib/st/cmsis_gcc.h ****   
 166:lib/st/cmsis_gcc.h **** #define __PROGRAM_START           __cmsis_start
 167:lib/st/cmsis_gcc.h **** #endif
 168:lib/st/cmsis_gcc.h **** 
 169:lib/st/cmsis_gcc.h **** #ifndef __INITIAL_SP
 170:lib/st/cmsis_gcc.h **** #define __INITIAL_SP              __StackTop
 171:lib/st/cmsis_gcc.h **** #endif
 172:lib/st/cmsis_gcc.h **** 
 173:lib/st/cmsis_gcc.h **** #ifndef __STACK_LIMIT
 174:lib/st/cmsis_gcc.h **** #define __STACK_LIMIT             __StackLimit
 175:lib/st/cmsis_gcc.h **** #endif
 176:lib/st/cmsis_gcc.h **** 
 177:lib/st/cmsis_gcc.h **** #ifndef __VECTOR_TABLE
 178:lib/st/cmsis_gcc.h **** #define __VECTOR_TABLE            __Vectors
 179:lib/st/cmsis_gcc.h **** #endif
 180:lib/st/cmsis_gcc.h **** 
 181:lib/st/cmsis_gcc.h **** #ifndef __VECTOR_TABLE_ATTRIBUTE
 182:lib/st/cmsis_gcc.h **** #define __VECTOR_TABLE_ATTRIBUTE  __attribute((used, section(".vectors")))
 183:lib/st/cmsis_gcc.h **** #endif
 184:lib/st/cmsis_gcc.h **** 
 185:lib/st/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 186:lib/st/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 187:lib/st/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 188:lib/st/cmsis_gcc.h ****   @{
 189:lib/st/cmsis_gcc.h ****  */
 190:lib/st/cmsis_gcc.h **** 
 191:lib/st/cmsis_gcc.h **** /**
 192:lib/st/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 193:lib/st/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
ARM GAS  /tmp/ccY6rBif.s 			page 27


 194:lib/st/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 195:lib/st/cmsis_gcc.h ****  */
 196:lib/st/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 197:lib/st/cmsis_gcc.h **** {
 198:lib/st/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 199:lib/st/cmsis_gcc.h **** }
 200:lib/st/cmsis_gcc.h **** 
 201:lib/st/cmsis_gcc.h **** 
 202:lib/st/cmsis_gcc.h **** /**
 203:lib/st/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 204:lib/st/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 205:lib/st/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 206:lib/st/cmsis_gcc.h ****  */
 207:lib/st/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 1077              		.loc 2 207 27 view .LVU287
 1078              	.LBB14:
 208:lib/st/cmsis_gcc.h **** {
 209:lib/st/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 1079              		.loc 2 209 3 view .LVU288
 1080              		.syntax unified
 1081              	@ 209 "lib/st/cmsis_gcc.h" 1
 1082 0000 72B6     		cpsid i
 1083              	@ 0 "" 2
 1084              		.thumb
 1085              		.syntax unified
 1086              	.LBE14:
 1087              	.LBE13:
 216:src/main.c    **** 	SysTick->LOAD = core_MHz/8*1000; // configure for 1 ms period, use AHB/8 
 1088              		.loc 1 216 2 view .LVU289
 1089              		.loc 1 216 26 is_stmt 0 view .LVU290
 1090 0002 094B     		ldr	r3, .L70
 1091 0004 1B68     		ldr	r3, [r3]
 1092 0006 002B     		cmp	r3, #0
 1093 0008 0BDB     		blt	.L69
 1094              	.L68:
 1095 000a DB10     		asrs	r3, r3, #3
 1096              		.loc 1 216 28 view .LVU291
 1097 000c 4FF47A72 		mov	r2, #1000
 1098 0010 02FB03F3 		mul	r3, r2, r3
 1099              		.loc 1 216 16 view .LVU292
 1100 0014 4FF0E022 		mov	r2, #-536813568
 1101 0018 5361     		str	r3, [r2, #20]
 217:src/main.c    **** 	SysTick->CTRL = 0x3; // use AHB/8 as input clock, enable interrupts and counter 
 1102              		.loc 1 217 2 is_stmt 1 view .LVU293
 1103              		.loc 1 217 16 is_stmt 0 view .LVU294
 1104 001a 0323     		movs	r3, #3
 1105 001c 1361     		str	r3, [r2, #16]
 218:src/main.c    **** 	NVIC_EnableIRQ(SysTick_IRQn);
 1106              		.loc 1 218 2 is_stmt 1 view .LVU295
 219:src/main.c    **** 	__enable_irq();
 1107              		.loc 1 219 2 view .LVU296
 1108              	.LBB15:
 1109              	.LBI15:
 196:lib/st/cmsis_gcc.h **** {
 1110              		.loc 2 196 27 view .LVU297
 1111              	.LBB16:
 198:lib/st/cmsis_gcc.h **** }
ARM GAS  /tmp/ccY6rBif.s 			page 28


 1112              		.loc 2 198 3 view .LVU298
 1113              		.syntax unified
 1114              	@ 198 "lib/st/cmsis_gcc.h" 1
 1115 001e 62B6     		cpsie i
 1116              	@ 0 "" 2
 1117              		.thumb
 1118              		.syntax unified
 1119              	.LBE16:
 1120              	.LBE15:
 220:src/main.c    **** }
 1121              		.loc 1 220 1 is_stmt 0 view .LVU299
 1122 0020 7047     		bx	lr
 1123              	.L69:
 216:src/main.c    **** 	SysTick->CTRL = 0x3; // use AHB/8 as input clock, enable interrupts and counter 
 1124              		.loc 1 216 26 view .LVU300
 1125 0022 0733     		adds	r3, r3, #7
 1126 0024 F1E7     		b	.L68
 1127              	.L71:
 1128 0026 00BF     		.align	2
 1129              	.L70:
 1130 0028 00000000 		.word	core_MHz
 1131              		.cfi_endproc
 1132              	.LFE147:
 1134              		.section	.text.init_lpuart,"ax",%progbits
 1135              		.align	1
 1136              		.global	init_lpuart
 1137              		.syntax unified
 1138              		.thumb
 1139              		.thumb_func
 1141              	init_lpuart:
 1142              	.LVL58:
 1143              	.LFB148:
 221:src/main.c    **** 
 222:src/main.c    **** // i just implemented against lpuart. brr calculation for normal u(s)art might differ 
 223:src/main.c    **** void init_lpuart(USART_TypeDef * uart,
 224:src/main.c    **** 	GPIO_TypeDef * tx_port, int tx_pin, int tx_afn, 
 225:src/main.c    **** 	GPIO_TypeDef * rx_port, int rx_pin, int rx_afn) {
 1144              		.loc 1 225 50 is_stmt 1 view -0
 1145              		.cfi_startproc
 1146              		@ args = 12, pretend = 0, frame = 0
 1147              		@ frame_needed = 0, uses_anonymous_args = 0
 1148              		.loc 1 225 50 is_stmt 0 view .LVU302
 1149 0000 10B5     		push	{r4, lr}
 1150              	.LCFI11:
 1151              		.cfi_def_cfa_offset 8
 1152              		.cfi_offset 4, -8
 1153              		.cfi_offset 14, -4
 1154 0002 0446     		mov	r4, r0
 1155 0004 0846     		mov	r0, r1
 1156              	.LVL59:
 1157              		.loc 1 225 50 view .LVU303
 1158 0006 1146     		mov	r1, r2
 1159              	.LVL60:
 226:src/main.c    **** 	// assume peripheral is already enabled in RCC 
 227:src/main.c    **** 	
 228:src/main.c    **** 	gpio_af(tx_port, tx_pin, tx_afn);
 1160              		.loc 1 228 2 is_stmt 1 view .LVU304
ARM GAS  /tmp/ccY6rBif.s 			page 29


 1161 0008 DAB2     		uxtb	r2, r3
 1162              	.LVL61:
 1163              		.loc 1 228 2 is_stmt 0 view .LVU305
 1164 000a C9B2     		uxtb	r1, r1
 1165              	.LVL62:
 1166              		.loc 1 228 2 view .LVU306
 1167 000c FFF7FEFF 		bl	gpio_af
 1168              	.LVL63:
 229:src/main.c    **** 	gpio_af(rx_port, rx_pin, rx_afn);
 1169              		.loc 1 229 2 is_stmt 1 view .LVU307
 1170 0010 9DF81020 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 1171 0014 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 1172 0018 0298     		ldr	r0, [sp, #8]
 1173 001a FFF7FEFF 		bl	gpio_af
 1174              	.LVL64:
 230:src/main.c    **** 	
 231:src/main.c    **** 	uart->BRR = 177778; // approx 115200 with 80 MHz: (25680MHz)/x = 115200Hz
 1175              		.loc 1 231 2 view .LVU308
 1176              		.loc 1 231 12 is_stmt 0 view .LVU309
 1177 001e 044B     		ldr	r3, .L74
 1178 0020 E360     		str	r3, [r4, #12]
 232:src/main.c    **** 	uart->CR3 = 0; // not really using anything here 
 1179              		.loc 1 232 2 is_stmt 1 view .LVU310
 1180              		.loc 1 232 12 is_stmt 0 view .LVU311
 1181 0022 0023     		movs	r3, #0
 1182 0024 A360     		str	r3, [r4, #8]
 233:src/main.c    **** 	uart->CR2 = 0 << 12; // 1 stop bit.. the defaults are fine here again 
 1183              		.loc 1 233 2 is_stmt 1 view .LVU312
 1184              		.loc 1 233 12 is_stmt 0 view .LVU313
 1185 0026 6360     		str	r3, [r4, #4]
 234:src/main.c    **** 	uart->CR1 = 
 1186              		.loc 1 234 2 is_stmt 1 view .LVU314
 1187              		.loc 1 234 12 is_stmt 0 view .LVU315
 1188 0028 0D23     		movs	r3, #13
 1189 002a 2360     		str	r3, [r4]
 235:src/main.c    **** 		(0 << 28)|(0 << 12) // 1 start bits, 8 data bits, n stop bits 
 236:src/main.c    **** 		| 1 << 3 // transmitter enable. this generates a preamble immediately 
 237:src/main.c    **** 		| 1 << 2 // receiver enable lol 
 238:src/main.c    **** 		| 1 << 0; // enable uart  
 239:src/main.c    **** }
 1190              		.loc 1 239 1 view .LVU316
 1191 002c 10BD     		pop	{r4, pc}
 1192              	.LVL65:
 1193              	.L75:
 1194              		.loc 1 239 1 view .LVU317
 1195 002e 00BF     		.align	2
 1196              	.L74:
 1197 0030 72B60200 		.word	177778
 1198              		.cfi_endproc
 1199              	.LFE148:
 1201              		.section	.text.uart_tx_char,"ax",%progbits
 1202              		.align	1
 1203              		.global	uart_tx_char
 1204              		.syntax unified
 1205              		.thumb
 1206              		.thumb_func
 1208              	uart_tx_char:
ARM GAS  /tmp/ccY6rBif.s 			page 30


 1209              	.LVL66:
 1210              	.LFB149:
 240:src/main.c    **** 
 241:src/main.c    **** void uart_tx_char(USART_TypeDef * uart, uint8_t data) {
 1211              		.loc 1 241 55 is_stmt 1 view -0
 1212              		.cfi_startproc
 1213              		@ args = 0, pretend = 0, frame = 0
 1214              		@ frame_needed = 0, uses_anonymous_args = 0
 1215              		@ link register save eliminated.
 242:src/main.c    **** 	while (!(uart->ISR & 1<<7)) {__NOP();}; // while not TXE 
 1216              		.loc 1 242 2 view .LVU319
 1217              		.loc 1 242 8 is_stmt 0 view .LVU320
 1218 0000 00E0     		b	.L77
 1219              	.L78:
 1220              		.loc 1 242 31 is_stmt 1 discriminator 2 view .LVU321
 1221              		.syntax unified
 1222              	@ 242 "src/main.c" 1
 1223 0002 00BF     		nop
 1224              	@ 0 "" 2
 1225              		.thumb
 1226              		.syntax unified
 1227              	.L77:
 1228              		.loc 1 242 9 discriminator 1 view .LVU322
 1229              		.loc 1 242 15 is_stmt 0 discriminator 1 view .LVU323
 1230 0004 C369     		ldr	r3, [r0, #28]
 1231              		.loc 1 242 9 discriminator 1 view .LVU324
 1232 0006 13F0800F 		tst	r3, #128
 1233 000a FAD0     		beq	.L78
 1234              		.loc 1 242 40 is_stmt 1 discriminator 3 view .LVU325
 243:src/main.c    **** 	uart->TDR = data; 
 1235              		.loc 1 243 2 discriminator 3 view .LVU326
 1236              		.loc 1 243 12 is_stmt 0 discriminator 3 view .LVU327
 1237 000c 0185     		strh	r1, [r0, #40]	@ movhi
 244:src/main.c    **** }
 1238              		.loc 1 244 1 discriminator 3 view .LVU328
 1239 000e 7047     		bx	lr
 1240              		.cfi_endproc
 1241              	.LFE149:
 1243              		.section	.text.uart_tx_long,"ax",%progbits
 1244              		.align	1
 1245              		.global	uart_tx_long
 1246              		.syntax unified
 1247              		.thumb
 1248              		.thumb_func
 1250              	uart_tx_long:
 1251              	.LVL67:
 1252              	.LFB150:
 245:src/main.c    **** 
 246:src/main.c    **** void uart_tx_long(USART_TypeDef * uart, int len, uint8_t * data) {
 1253              		.loc 1 246 66 is_stmt 1 view -0
 1254              		.cfi_startproc
 1255              		@ args = 0, pretend = 0, frame = 0
 1256              		@ frame_needed = 0, uses_anonymous_args = 0
 1257              		@ link register save eliminated.
 247:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1258              		.loc 1 247 2 view .LVU330
 1259              	.LBB17:
ARM GAS  /tmp/ccY6rBif.s 			page 31


 1260              		.loc 1 247 7 view .LVU331
 1261              		.loc 1 247 11 is_stmt 0 view .LVU332
 1262 0000 4FF0000C 		mov	ip, #0
 1263              		.loc 1 247 2 view .LVU333
 1264 0004 09E0     		b	.L80
 1265              	.LVL68:
 1266              	.L81:
 248:src/main.c    **** 		while (!(uart->ISR & 1<<7)) {__NOP();}; // while not TXE 
 1267              		.loc 1 248 32 is_stmt 1 discriminator 2 view .LVU334
 1268              		.syntax unified
 1269              	@ 248 "src/main.c" 1
 1270 0006 00BF     		nop
 1271              	@ 0 "" 2
 1272              		.thumb
 1273              		.syntax unified
 1274              	.L82:
 1275              		.loc 1 248 10 discriminator 1 view .LVU335
 1276              		.loc 1 248 16 is_stmt 0 discriminator 1 view .LVU336
 1277 0008 C369     		ldr	r3, [r0, #28]
 1278              		.loc 1 248 10 discriminator 1 view .LVU337
 1279 000a 13F0800F 		tst	r3, #128
 1280 000e FAD0     		beq	.L81
 1281              		.loc 1 248 41 is_stmt 1 discriminator 3 view .LVU338
 249:src/main.c    **** 		uart->TDR = data[i]; 
 1282              		.loc 1 249 3 discriminator 3 view .LVU339
 1283              		.loc 1 249 19 is_stmt 0 discriminator 3 view .LVU340
 1284 0010 12F80C30 		ldrb	r3, [r2, ip]	@ zero_extendqisi2
 1285              		.loc 1 249 13 discriminator 3 view .LVU341
 1286 0014 0385     		strh	r3, [r0, #40]	@ movhi
 247:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1287              		.loc 1 247 28 is_stmt 1 discriminator 3 view .LVU342
 1288 0016 0CF1010C 		add	ip, ip, #1
 1289              	.LVL69:
 1290              	.L80:
 247:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1291              		.loc 1 247 20 discriminator 2 view .LVU343
 1292 001a 8C45     		cmp	ip, r1
 1293 001c F4DB     		blt	.L82
 1294 001e 00E0     		b	.L83
 1295              	.L84:
 1296              	.LBE17:
 250:src/main.c    **** 	}
 251:src/main.c    **** 	while (!(uart->ISR & 1<<6)) {__NOP();}; // while not TC 
 1297              		.loc 1 251 31 discriminator 2 view .LVU344
 1298              		.syntax unified
 1299              	@ 251 "src/main.c" 1
 1300 0020 00BF     		nop
 1301              	@ 0 "" 2
 1302              		.thumb
 1303              		.syntax unified
 1304              	.L83:
 1305              		.loc 1 251 9 discriminator 1 view .LVU345
 1306              		.loc 1 251 15 is_stmt 0 discriminator 1 view .LVU346
 1307 0022 C369     		ldr	r3, [r0, #28]
 1308              		.loc 1 251 9 discriminator 1 view .LVU347
 1309 0024 13F0400F 		tst	r3, #64
 1310 0028 FAD0     		beq	.L84
ARM GAS  /tmp/ccY6rBif.s 			page 32


 252:src/main.c    **** }
 1311              		.loc 1 252 1 view .LVU348
 1312 002a 7047     		bx	lr
 1313              		.cfi_endproc
 1314              	.LFE150:
 1316              		.section	.text.init_softuart,"ax",%progbits
 1317              		.align	1
 1318              		.global	init_softuart
 1319              		.syntax unified
 1320              		.thumb
 1321              		.thumb_func
 1323              	init_softuart:
 1324              	.LVL70:
 1325              	.LFB151:
 253:src/main.c    **** 
 254:src/main.c    **** //UNUSED! (wanted to make sure we can hit 115200 baud for spin demo) 
 255:src/main.c    **** void init_softuart(GPIO_TypeDef * tx_port, int tx_pin, GPIO_TypeDef * rx_port, int rx_pin) {
 1326              		.loc 1 255 92 is_stmt 1 view -0
 1327              		.cfi_startproc
 1328              		@ args = 0, pretend = 0, frame = 0
 1329              		@ frame_needed = 0, uses_anonymous_args = 0
 1330              		.loc 1 255 92 is_stmt 0 view .LVU350
 1331 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1332              	.LCFI12:
 1333              		.cfi_def_cfa_offset 28
 1334              		.cfi_offset 4, -28
 1335              		.cfi_offset 5, -24
 1336              		.cfi_offset 6, -20
 1337              		.cfi_offset 7, -16
 1338              		.cfi_offset 8, -12
 1339              		.cfi_offset 9, -8
 1340              		.cfi_offset 14, -4
 1341 0004 83B0     		sub	sp, sp, #12
 1342              	.LCFI13:
 1343              		.cfi_def_cfa_offset 40
 1344 0006 8046     		mov	r8, r0
 1345 0008 8946     		mov	r9, r1
 1346 000a 1546     		mov	r5, r2
 1347 000c 1E46     		mov	r6, r3
 256:src/main.c    **** 	gpio_set(tx_port, tx_pin, 1); 
 1348              		.loc 1 256 2 is_stmt 1 view .LVU351
 1349 000e 0122     		movs	r2, #1
 1350              	.LVL71:
 1351              		.loc 1 256 2 is_stmt 0 view .LVU352
 1352 0010 FFF7FEFF 		bl	gpio_set
 1353              	.LVL72:
 257:src/main.c    **** 	gpio_mode(tx_port, tx_pin, GPIO_DIGITAL_OUT, GPIO_PUSH_PULL, GPIO_HI_SPEED, GPIO_NO_PULL);
 1354              		.loc 1 257 2 is_stmt 1 view .LVU353
 1355 0014 0024     		movs	r4, #0
 1356 0016 0194     		str	r4, [sp, #4]
 1357 0018 0227     		movs	r7, #2
 1358 001a 0097     		str	r7, [sp]
 1359 001c 2346     		mov	r3, r4
 1360 001e 0122     		movs	r2, #1
 1361 0020 4946     		mov	r1, r9
 1362 0022 4046     		mov	r0, r8
 1363 0024 FFF7FEFF 		bl	gpio_mode
ARM GAS  /tmp/ccY6rBif.s 			page 33


 1364              	.LVL73:
 258:src/main.c    **** 	gpio_mode(rx_port, rx_pin, GPIO_DIGITAL_IN, 0, GPIO_HI_SPEED, GPIO_PULL_DOWN);
 1365              		.loc 1 258 2 view .LVU354
 1366 0028 0197     		str	r7, [sp, #4]
 1367 002a 0097     		str	r7, [sp]
 1368 002c 2346     		mov	r3, r4
 1369 002e 2246     		mov	r2, r4
 1370 0030 3146     		mov	r1, r6
 1371 0032 2846     		mov	r0, r5
 1372 0034 FFF7FEFF 		bl	gpio_mode
 1373              	.LVL74:
 259:src/main.c    **** }
 1374              		.loc 1 259 1 is_stmt 0 view .LVU355
 1375 0038 03B0     		add	sp, sp, #12
 1376              	.LCFI14:
 1377              		.cfi_def_cfa_offset 28
 1378              		@ sp needed
 1379 003a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1380              		.loc 1 259 1 view .LVU356
 1381              		.cfi_endproc
 1382              	.LFE151:
 1384              		.section	.text.softuart_tx_char,"ax",%progbits
 1385              		.align	1
 1386              		.global	softuart_tx_char
 1387              		.syntax unified
 1388              		.thumb
 1389              		.thumb_func
 1391              	softuart_tx_char:
 1392              	.LVL75:
 1393              	.LFB152:
 260:src/main.c    **** 
 261:src/main.c    **** //UNUSED:
 262:src/main.c    **** void softuart_tx_char(GPIO_TypeDef * tx_port, int tx_pin, GPIO_TypeDef * rx_port, int rx_pin, int d
 1394              		.loc 1 262 105 is_stmt 1 view -0
 1395              		.cfi_startproc
 1396              		@ args = 4, pretend = 0, frame = 0
 1397              		@ frame_needed = 0, uses_anonymous_args = 0
 1398              		@ link register save eliminated.
 263:src/main.c    **** 	
 264:src/main.c    **** }
 1399              		.loc 1 264 1 view .LVU358
 1400 0000 7047     		bx	lr
 1401              		.cfi_endproc
 1402              	.LFE152:
 1404              		.section	.text.init_spi_master,"ax",%progbits
 1405              		.align	1
 1406              		.global	init_spi_master
 1407              		.syntax unified
 1408              		.thumb
 1409              		.thumb_func
 1411              	init_spi_master:
 1412              	.LVL76:
 1413              	.LFB153:
 265:src/main.c    **** 
 266:src/main.c    **** void init_spi_master(SPI_TypeDef * spi, 
 267:src/main.c    **** 	GPIO_TypeDef * mosi_port, int mosi_pin, int mosi_afn, 
 268:src/main.c    **** 	GPIO_TypeDef * miso_port, int miso_pin, int miso_afn, 
ARM GAS  /tmp/ccY6rBif.s 			page 34


 269:src/main.c    **** 	GPIO_TypeDef * sck_port, int sck_pin, int sck_afn, 
 270:src/main.c    **** 	GPIO_TypeDef * ncs_port, int ncs_pin) {
 1414              		.loc 1 270 40 view -0
 1415              		.cfi_startproc
 1416              		@ args = 32, pretend = 0, frame = 0
 1417              		@ frame_needed = 0, uses_anonymous_args = 0
 1418              		.loc 1 270 40 is_stmt 0 view .LVU360
 1419 0000 70B5     		push	{r4, r5, r6, lr}
 1420              	.LCFI15:
 1421              		.cfi_def_cfa_offset 16
 1422              		.cfi_offset 4, -16
 1423              		.cfi_offset 5, -12
 1424              		.cfi_offset 6, -8
 1425              		.cfi_offset 14, -4
 1426 0002 82B0     		sub	sp, sp, #8
 1427              	.LCFI16:
 1428              		.cfi_def_cfa_offset 24
 1429 0004 0446     		mov	r4, r0
 1430 0006 0846     		mov	r0, r1
 1431              	.LVL77:
 1432              		.loc 1 270 40 view .LVU361
 1433 0008 1146     		mov	r1, r2
 1434              	.LVL78:
 1435              		.loc 1 270 40 view .LVU362
 1436 000a 0C9D     		ldr	r5, [sp, #48]
 1437 000c 0D9E     		ldr	r6, [sp, #52]
 271:src/main.c    **** 	// assume peripheral is already enabled in RCC 
 272:src/main.c    **** 	
 273:src/main.c    **** 	gpio_af(mosi_port, mosi_pin, mosi_afn);
 1438              		.loc 1 273 2 is_stmt 1 view .LVU363
 1439 000e DAB2     		uxtb	r2, r3
 1440              	.LVL79:
 1441              		.loc 1 273 2 is_stmt 0 view .LVU364
 1442 0010 C9B2     		uxtb	r1, r1
 1443              	.LVL80:
 1444              		.loc 1 273 2 view .LVU365
 1445 0012 FFF7FEFF 		bl	gpio_af
 1446              	.LVL81:
 274:src/main.c    **** 	gpio_af(miso_port, miso_pin, miso_afn);
 1447              		.loc 1 274 2 is_stmt 1 view .LVU366
 1448 0016 9DF82020 		ldrb	r2, [sp, #32]	@ zero_extendqisi2
 1449 001a 9DF81C10 		ldrb	r1, [sp, #28]	@ zero_extendqisi2
 1450 001e 0698     		ldr	r0, [sp, #24]
 1451 0020 FFF7FEFF 		bl	gpio_af
 1452              	.LVL82:
 275:src/main.c    **** 	gpio_af(sck_port, sck_pin, sck_afn);
 1453              		.loc 1 275 2 view .LVU367
 1454 0024 9DF82C20 		ldrb	r2, [sp, #44]	@ zero_extendqisi2
 1455 0028 9DF82810 		ldrb	r1, [sp, #40]	@ zero_extendqisi2
 1456 002c 0998     		ldr	r0, [sp, #36]
 1457 002e FFF7FEFF 		bl	gpio_af
 1458              	.LVL83:
 276:src/main.c    **** 	gpio_set(ncs_port, ncs_pin, 1); 
 1459              		.loc 1 276 2 view .LVU368
 1460 0032 0122     		movs	r2, #1
 1461 0034 3146     		mov	r1, r6
 1462 0036 2846     		mov	r0, r5
ARM GAS  /tmp/ccY6rBif.s 			page 35


 1463 0038 FFF7FEFF 		bl	gpio_set
 1464              	.LVL84:
 277:src/main.c    **** 	gpio_mode(ncs_port, ncs_pin, 1, 0, 0, 0);
 1465              		.loc 1 277 2 view .LVU369
 1466 003c 0023     		movs	r3, #0
 1467 003e 0193     		str	r3, [sp, #4]
 1468 0040 0093     		str	r3, [sp]
 1469 0042 0122     		movs	r2, #1
 1470 0044 3146     		mov	r1, r6
 1471 0046 2846     		mov	r0, r5
 1472 0048 FFF7FEFF 		bl	gpio_mode
 1473              	.LVL85:
 278:src/main.c    **** 	
 279:src/main.c    **** 	spi->CR2 = 0x0700 // default value on reset.. ok this whole thing is redundant, default values are
 1474              		.loc 1 279 2 view .LVU370
 1475              		.loc 1 279 11 is_stmt 0 view .LVU371
 1476 004c 4FF4B853 		mov	r3, #5888
 1477 0050 6360     		str	r3, [r4, #4]
 280:src/main.c    **** 		| 1 << 12 // FRXTH: RXNE event generated if FIFO lvl >= 1/4 (for 8 bit)
 281:src/main.c    **** 		| 0x7 << 8 // data size: 8 bits 
 282:src/main.c    **** 		| 0 << 7 // TXE interrupt enable = disable 
 283:src/main.c    **** 		| 0 << 6 // RXNE i. disabled 
 284:src/main.c    **** 		| 0 << 5 // ERR i. disabled 
 285:src/main.c    **** 		| 0 << 4 // spi motorola mode 
 286:src/main.c    **** 		| 0 << 3 // no nss pulse between consecutive frames 
 287:src/main.c    **** 		| 0 << 2 // CS output disabled 
 288:src/main.c    **** 		| 0 << 1 // tx dma disabled 
 289:src/main.c    **** 		| 0 << 0; // rx dma disabled 
 290:src/main.c    **** 	spi->CR1 = 0 
 1478              		.loc 1 290 2 is_stmt 1 view .LVU372
 1479              		.loc 1 290 11 is_stmt 0 view .LVU373
 1480 0052 4FF45773 		mov	r3, #860
 1481 0056 2360     		str	r3, [r4]
 291:src/main.c    **** 		| 1 << 9 // software slave management enabled 
 292:src/main.c    **** 		| 1 << 8 // internal slave selected 
 293:src/main.c    **** 		| 0x7 << 2 // baud rate control: divide fpclk by 2^x 
 294:src/main.c    **** 		| 1 << 2 // master mode 
 295:src/main.c    **** 		| 0 << 1 // CPOL = 0: SCK to 0 when idle 
 296:src/main.c    **** 		| 0 << 0 // CPHA = 0: data capture edge is first clock transition 
 297:src/main.c    **** 		| 1 << 6; // enable SPI 
 298:src/main.c    **** }
 1482              		.loc 1 298 1 view .LVU374
 1483 0058 02B0     		add	sp, sp, #8
 1484              	.LCFI17:
 1485              		.cfi_def_cfa_offset 16
 1486              		@ sp needed
 1487 005a 70BD     		pop	{r4, r5, r6, pc}
 1488              		.loc 1 298 1 view .LVU375
 1489              		.cfi_endproc
 1490              	.LFE153:
 1492              		.section	.text.spi_block_while_busy,"ax",%progbits
 1493              		.align	1
 1494              		.global	spi_block_while_busy
 1495              		.syntax unified
 1496              		.thumb
 1497              		.thumb_func
 1499              	spi_block_while_busy:
ARM GAS  /tmp/ccY6rBif.s 			page 36


 1500              	.LVL86:
 1501              	.LFB154:
 299:src/main.c    **** 
 300:src/main.c    **** int spi_block_while_busy(SPI_TypeDef * spi) {
 1502              		.loc 1 300 45 is_stmt 1 view -0
 1503              		.cfi_startproc
 1504              		@ args = 0, pretend = 0, frame = 0
 1505              		@ frame_needed = 0, uses_anonymous_args = 0
 1506              		@ link register save eliminated.
 301:src/main.c    **** 	while (spi->SR & (1<<7)) {__NOP();} // wait while busy
 1507              		.loc 1 301 2 view .LVU377
 1508              		.loc 1 301 8 is_stmt 0 view .LVU378
 1509 0000 00E0     		b	.L91
 1510              	.L92:
 1511              		.loc 1 301 28 is_stmt 1 discriminator 2 view .LVU379
 1512              		.syntax unified
 1513              	@ 301 "src/main.c" 1
 1514 0002 00BF     		nop
 1515              	@ 0 "" 2
 1516              		.thumb
 1517              		.syntax unified
 1518              	.L91:
 1519              		.loc 1 301 9 discriminator 1 view .LVU380
 1520              		.loc 1 301 12 is_stmt 0 discriminator 1 view .LVU381
 1521 0004 8368     		ldr	r3, [r0, #8]
 1522              		.loc 1 301 9 discriminator 1 view .LVU382
 1523 0006 13F0800F 		tst	r3, #128
 1524 000a FAD1     		bne	.L92
 1525              	.LVL87:
 302:src/main.c    **** }
 1526              		.loc 1 302 1 view .LVU383
 1527 000c 7047     		bx	lr
 1528              		.cfi_endproc
 1529              	.LFE154:
 1531              		.section	.text.spi_tx8,"ax",%progbits
 1532              		.align	1
 1533              		.global	spi_tx8
 1534              		.syntax unified
 1535              		.thumb
 1536              		.thumb_func
 1538              	spi_tx8:
 1539              	.LVL88:
 1540              	.LFB155:
 303:src/main.c    **** 
 304:src/main.c    **** void spi_tx8(SPI_TypeDef * spi, int data) {
 1541              		.loc 1 304 43 is_stmt 1 view -0
 1542              		.cfi_startproc
 1543              		@ args = 0, pretend = 0, frame = 0
 1544              		@ frame_needed = 0, uses_anonymous_args = 0
 1545              		@ link register save eliminated.
 305:src/main.c    **** 	while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty
 1546              		.loc 1 305 2 view .LVU385
 1547              		.loc 1 305 8 is_stmt 0 view .LVU386
 1548 0000 00E0     		b	.L94
 1549              	.L95:
 1550              		.loc 1 305 31 is_stmt 1 discriminator 2 view .LVU387
 1551              		.syntax unified
ARM GAS  /tmp/ccY6rBif.s 			page 37


 1552              	@ 305 "src/main.c" 1
 1553 0002 00BF     		nop
 1554              	@ 0 "" 2
 1555              		.thumb
 1556              		.syntax unified
 1557              	.L94:
 1558              		.loc 1 305 9 discriminator 1 view .LVU388
 1559              		.loc 1 305 14 is_stmt 0 discriminator 1 view .LVU389
 1560 0004 8368     		ldr	r3, [r0, #8]
 1561              		.loc 1 305 9 discriminator 1 view .LVU390
 1562 0006 13F0020F 		tst	r3, #2
 1563 000a FAD0     		beq	.L95
 306:src/main.c    **** 	*(volatile uint8_t*)&spi->DR = data & 0xFF;
 1564              		.loc 1 306 2 is_stmt 1 view .LVU391
 1565              		.loc 1 306 31 is_stmt 0 view .LVU392
 1566 000c C9B2     		uxtb	r1, r1
 1567              	.LVL89:
 1568              		.loc 1 306 31 view .LVU393
 1569 000e 0173     		strb	r1, [r0, #12]
 307:src/main.c    **** 	while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty before checking bsy
 1570              		.loc 1 307 2 is_stmt 1 view .LVU394
 1571              		.loc 1 307 8 is_stmt 0 view .LVU395
 1572 0010 00E0     		b	.L96
 1573              	.L97:
 1574              		.loc 1 307 31 is_stmt 1 discriminator 2 view .LVU396
 1575              		.syntax unified
 1576              	@ 307 "src/main.c" 1
 1577 0012 00BF     		nop
 1578              	@ 0 "" 2
 1579              		.thumb
 1580              		.syntax unified
 1581              	.L96:
 1582              		.loc 1 307 9 discriminator 1 view .LVU397
 1583              		.loc 1 307 14 is_stmt 0 discriminator 1 view .LVU398
 1584 0014 8368     		ldr	r3, [r0, #8]
 1585              		.loc 1 307 9 discriminator 1 view .LVU399
 1586 0016 13F0020F 		tst	r3, #2
 1587 001a FAD0     		beq	.L97
 308:src/main.c    **** //	while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 309:src/main.c    **** //	return spi->DR; // if want to clear OVR flag, read DR then read SR. both fifo should be balanced
 310:src/main.c    **** }
 1588              		.loc 1 310 1 view .LVU400
 1589 001c 7047     		bx	lr
 1590              		.cfi_endproc
 1591              	.LFE155:
 1593              		.section	.text.spi_rx8,"ax",%progbits
 1594              		.align	1
 1595              		.global	spi_rx8
 1596              		.syntax unified
 1597              		.thumb
 1598              		.thumb_func
 1600              	spi_rx8:
 1601              	.LVL90:
 1602              	.LFB156:
 311:src/main.c    **** 
 312:src/main.c    **** uint16_t spi_rx8(SPI_TypeDef * spi) {
 1603              		.loc 1 312 37 is_stmt 1 view -0
ARM GAS  /tmp/ccY6rBif.s 			page 38


 1604              		.cfi_startproc
 1605              		@ args = 0, pretend = 0, frame = 0
 1606              		@ frame_needed = 0, uses_anonymous_args = 0
 1607              		@ link register save eliminated.
 313:src/main.c    **** 	return spi->DR; 
 1608              		.loc 1 313 2 view .LVU402
 1609              		.loc 1 313 12 is_stmt 0 view .LVU403
 1610 0000 C068     		ldr	r0, [r0, #12]
 1611              	.LVL91:
 314:src/main.c    **** }
 1612              		.loc 1 314 1 view .LVU404
 1613 0002 80B2     		uxth	r0, r0
 1614 0004 7047     		bx	lr
 1615              		.cfi_endproc
 1616              	.LFE156:
 1618              		.section	.text.spi_tx8x2,"ax",%progbits
 1619              		.align	1
 1620              		.global	spi_tx8x2
 1621              		.syntax unified
 1622              		.thumb
 1623              		.thumb_func
 1625              	spi_tx8x2:
 1626              	.LVL92:
 1627              	.LFB157:
 315:src/main.c    **** 
 316:src/main.c    **** void spi_tx8x2(SPI_TypeDef * spi, int data1, int data2) {
 1628              		.loc 1 316 57 is_stmt 1 view -0
 1629              		.cfi_startproc
 1630              		@ args = 0, pretend = 0, frame = 0
 1631              		@ frame_needed = 0, uses_anonymous_args = 0
 1632              		@ link register save eliminated.
 317:src/main.c    **** 	while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty
 1633              		.loc 1 317 2 view .LVU406
 1634              		.loc 1 317 8 is_stmt 0 view .LVU407
 1635 0000 00E0     		b	.L100
 1636              	.L101:
 1637              		.loc 1 317 31 is_stmt 1 discriminator 2 view .LVU408
 1638              		.syntax unified
 1639              	@ 317 "src/main.c" 1
 1640 0002 00BF     		nop
 1641              	@ 0 "" 2
 1642              		.thumb
 1643              		.syntax unified
 1644              	.L100:
 1645              		.loc 1 317 9 discriminator 1 view .LVU409
 1646              		.loc 1 317 14 is_stmt 0 discriminator 1 view .LVU410
 1647 0004 8368     		ldr	r3, [r0, #8]
 1648              		.loc 1 317 9 discriminator 1 view .LVU411
 1649 0006 13F0020F 		tst	r3, #2
 1650 000a FAD0     		beq	.L101
 318:src/main.c    **** 	*(volatile uint8_t*)&spi->DR = data1 & 0xFF;
 1651              		.loc 1 318 2 is_stmt 1 view .LVU412
 1652              		.loc 1 318 31 is_stmt 0 view .LVU413
 1653 000c C9B2     		uxtb	r1, r1
 1654              	.LVL93:
 1655              		.loc 1 318 31 view .LVU414
 1656 000e 0173     		strb	r1, [r0, #12]
ARM GAS  /tmp/ccY6rBif.s 			page 39


 319:src/main.c    **** 	while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty before checking bsy
 1657              		.loc 1 319 2 is_stmt 1 view .LVU415
 1658              		.loc 1 319 8 is_stmt 0 view .LVU416
 1659 0010 00E0     		b	.L102
 1660              	.L103:
 1661              		.loc 1 319 31 is_stmt 1 discriminator 2 view .LVU417
 1662              		.syntax unified
 1663              	@ 319 "src/main.c" 1
 1664 0012 00BF     		nop
 1665              	@ 0 "" 2
 1666              		.thumb
 1667              		.syntax unified
 1668              	.L102:
 1669              		.loc 1 319 9 discriminator 1 view .LVU418
 1670              		.loc 1 319 14 is_stmt 0 discriminator 1 view .LVU419
 1671 0014 8368     		ldr	r3, [r0, #8]
 1672              		.loc 1 319 9 discriminator 1 view .LVU420
 1673 0016 13F0020F 		tst	r3, #2
 1674 001a FAD0     		beq	.L103
 320:src/main.c    **** //	while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 321:src/main.c    **** //	int hi = spi->DR; // dummy read 
 322:src/main.c    **** 	*(volatile uint8_t*)&spi->DR = data2 & 0xFF;
 1675              		.loc 1 322 2 is_stmt 1 view .LVU421
 1676              		.loc 1 322 31 is_stmt 0 view .LVU422
 1677 001c D2B2     		uxtb	r2, r2
 1678              	.LVL94:
 1679              		.loc 1 322 31 view .LVU423
 1680 001e 0273     		strb	r2, [r0, #12]
 323:src/main.c    **** 	while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty before checking bsy
 1681              		.loc 1 323 2 is_stmt 1 view .LVU424
 1682              		.loc 1 323 8 is_stmt 0 view .LVU425
 1683 0020 00E0     		b	.L104
 1684              	.L105:
 1685              		.loc 1 323 31 is_stmt 1 discriminator 2 view .LVU426
 1686              		.syntax unified
 1687              	@ 323 "src/main.c" 1
 1688 0022 00BF     		nop
 1689              	@ 0 "" 2
 1690              		.thumb
 1691              		.syntax unified
 1692              	.L104:
 1693              		.loc 1 323 9 discriminator 1 view .LVU427
 1694              		.loc 1 323 14 is_stmt 0 discriminator 1 view .LVU428
 1695 0024 8368     		ldr	r3, [r0, #8]
 1696              		.loc 1 323 9 discriminator 1 view .LVU429
 1697 0026 13F0020F 		tst	r3, #2
 1698 002a FAD0     		beq	.L105
 324:src/main.c    **** //	while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 325:src/main.c    **** //	hi = spi->DR;
 326:src/main.c    **** //	return spi->DR; 
 327:src/main.c    **** }
 1699              		.loc 1 327 1 view .LVU430
 1700 002c 7047     		bx	lr
 1701              		.cfi_endproc
 1702              	.LFE157:
 1704              		.section	.text.spi_tx8_long,"ax",%progbits
 1705              		.align	1
ARM GAS  /tmp/ccY6rBif.s 			page 40


 1706              		.global	spi_tx8_long
 1707              		.syntax unified
 1708              		.thumb
 1709              		.thumb_func
 1711              	spi_tx8_long:
 1712              	.LVL95:
 1713              	.LFB158:
 328:src/main.c    **** 
 329:src/main.c    **** void spi_tx8_long(SPI_TypeDef * spi, int len, int * txdata) {
 1714              		.loc 1 329 61 is_stmt 1 view -0
 1715              		.cfi_startproc
 1716              		@ args = 0, pretend = 0, frame = 0
 1717              		@ frame_needed = 0, uses_anonymous_args = 0
 1718              		@ link register save eliminated.
 330:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1719              		.loc 1 330 2 view .LVU432
 1720              	.LBB18:
 1721              		.loc 1 330 7 view .LVU433
 1722              		.loc 1 330 11 is_stmt 0 view .LVU434
 1723 0000 4FF0000C 		mov	ip, #0
 1724              		.loc 1 330 2 view .LVU435
 1725 0004 09E0     		b	.L107
 1726              	.LVL96:
 1727              	.L108:
 331:src/main.c    **** 		while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty
 1728              		.loc 1 331 32 is_stmt 1 discriminator 2 view .LVU436
 1729              		.syntax unified
 1730              	@ 331 "src/main.c" 1
 1731 0006 00BF     		nop
 1732              	@ 0 "" 2
 1733              		.thumb
 1734              		.syntax unified
 1735              	.L109:
 1736              		.loc 1 331 10 discriminator 1 view .LVU437
 1737              		.loc 1 331 15 is_stmt 0 discriminator 1 view .LVU438
 1738 0008 8368     		ldr	r3, [r0, #8]
 1739              		.loc 1 331 10 discriminator 1 view .LVU439
 1740 000a 13F0020F 		tst	r3, #2
 1741 000e FAD0     		beq	.L108
 332:src/main.c    **** 		*(volatile uint8_t*)&spi->DR = txdata[i] & 0xFF;
 1742              		.loc 1 332 3 is_stmt 1 discriminator 2 view .LVU440
 1743              		.loc 1 332 32 is_stmt 0 discriminator 2 view .LVU441
 1744 0010 12F82C30 		ldrb	r3, [r2, ip, lsl #2]	@ zero_extendqisi2
 1745 0014 0373     		strb	r3, [r0, #12]
 330:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1746              		.loc 1 330 28 is_stmt 1 discriminator 2 view .LVU442
 1747 0016 0CF1010C 		add	ip, ip, #1
 1748              	.LVL97:
 1749              	.L107:
 330:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1750              		.loc 1 330 20 discriminator 1 view .LVU443
 1751 001a 8C45     		cmp	ip, r1
 1752 001c F4DB     		blt	.L109
 1753 001e 00E0     		b	.L110
 1754              	.L111:
 1755              	.LBE18:
 333:src/main.c    **** 	}
ARM GAS  /tmp/ccY6rBif.s 			page 41


 334:src/main.c    **** 	while (!(spi->SR & (1<<1))) {__NOP();} // wait while tx buffer is not empty before checking bsy
 1756              		.loc 1 334 31 discriminator 2 view .LVU444
 1757              		.syntax unified
 1758              	@ 334 "src/main.c" 1
 1759 0020 00BF     		nop
 1760              	@ 0 "" 2
 1761              		.thumb
 1762              		.syntax unified
 1763              	.L110:
 1764              		.loc 1 334 9 discriminator 1 view .LVU445
 1765              		.loc 1 334 14 is_stmt 0 discriminator 1 view .LVU446
 1766 0022 8368     		ldr	r3, [r0, #8]
 1767              		.loc 1 334 9 discriminator 1 view .LVU447
 1768 0024 13F0020F 		tst	r3, #2
 1769 0028 FAD0     		beq	.L111
 335:src/main.c    **** //	while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 336:src/main.c    **** 	int temp = spi->DR; // clearing OVR flag with dummy DR and SR read 
 1770              		.loc 1 336 2 is_stmt 1 view .LVU448
 1771              		.loc 1 336 16 is_stmt 0 view .LVU449
 1772 002a C368     		ldr	r3, [r0, #12]
 337:src/main.c    **** 	temp = spi->SR; 
 1773              		.loc 1 337 2 is_stmt 1 view .LVU450
 1774              		.loc 1 337 12 is_stmt 0 view .LVU451
 1775 002c 8368     		ldr	r3, [r0, #8]
 338:src/main.c    **** }
 1776              		.loc 1 338 1 view .LVU452
 1777 002e 7047     		bx	lr
 1778              		.cfi_endproc
 1779              	.LFE158:
 1781              		.section	.text.spi_txrx8_long,"ax",%progbits
 1782              		.align	1
 1783              		.global	spi_txrx8_long
 1784              		.syntax unified
 1785              		.thumb
 1786              		.thumb_func
 1788              	spi_txrx8_long:
 1789              	.LVL98:
 1790              	.LFB159:
 339:src/main.c    **** 
 340:src/main.c    **** void spi_txrx8_long(SPI_TypeDef * spi, int len, int * txdata, int * rxdata) {
 1791              		.loc 1 340 77 is_stmt 1 view -0
 1792              		.cfi_startproc
 1793              		@ args = 0, pretend = 0, frame = 0
 1794              		@ frame_needed = 0, uses_anonymous_args = 0
 1795              		.loc 1 340 77 is_stmt 0 view .LVU454
 1796 0000 10B5     		push	{r4, lr}
 1797              	.LCFI18:
 1798              		.cfi_def_cfa_offset 8
 1799              		.cfi_offset 4, -8
 1800              		.cfi_offset 14, -4
 1801 0002 1446     		mov	r4, r2
 1802 0004 1A46     		mov	r2, r3
 1803              	.LVL99:
 341:src/main.c    **** 	for (int i = 0; i < len; i++) {
 1804              		.loc 1 341 2 is_stmt 1 view .LVU455
 1805              	.LBB19:
 1806              		.loc 1 341 7 view .LVU456
ARM GAS  /tmp/ccY6rBif.s 			page 42


 1807              		.loc 1 341 11 is_stmt 0 view .LVU457
 1808 0006 4FF0000C 		mov	ip, #0
 1809              		.loc 1 341 2 view .LVU458
 1810 000a 14E0     		b	.L113
 1811              	.LVL100:
 1812              	.L114:
 342:src/main.c    **** 		while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 1813              		.loc 1 342 29 is_stmt 1 discriminator 2 view .LVU459
 1814              		.syntax unified
 1815              	@ 342 "src/main.c" 1
 1816 000c 00BF     		nop
 1817              	@ 0 "" 2
 1818              		.thumb
 1819              		.syntax unified
 1820              	.L117:
 1821              		.loc 1 342 10 discriminator 1 view .LVU460
 1822              		.loc 1 342 13 is_stmt 0 discriminator 1 view .LVU461
 1823 000e 8368     		ldr	r3, [r0, #8]
 1824              		.loc 1 342 10 discriminator 1 view .LVU462
 1825 0010 13F0800F 		tst	r3, #128
 1826 0014 FAD1     		bne	.L114
 343:src/main.c    **** 		*(volatile uint8_t*)&spi->DR = txdata[i] & 0xFF;
 1827              		.loc 1 343 3 is_stmt 1 view .LVU463
 1828              		.loc 1 343 40 is_stmt 0 view .LVU464
 1829 0016 4FEA8C0E 		lsl	lr, ip, #2
 1830              		.loc 1 343 32 view .LVU465
 1831 001a 14F82C30 		ldrb	r3, [r4, ip, lsl #2]	@ zero_extendqisi2
 1832 001e 0373     		strb	r3, [r0, #12]
 344:src/main.c    **** 		while (!(spi->SR & (1<<0))) {__NOP();} // wait while rx buf is empty 
 1833              		.loc 1 344 3 is_stmt 1 view .LVU466
 1834              		.loc 1 344 9 is_stmt 0 view .LVU467
 1835 0020 00E0     		b	.L115
 1836              	.L116:
 1837              		.loc 1 344 32 is_stmt 1 discriminator 2 view .LVU468
 1838              		.syntax unified
 1839              	@ 344 "src/main.c" 1
 1840 0022 00BF     		nop
 1841              	@ 0 "" 2
 1842              		.thumb
 1843              		.syntax unified
 1844              	.L115:
 1845              		.loc 1 344 10 discriminator 1 view .LVU469
 1846              		.loc 1 344 15 is_stmt 0 discriminator 1 view .LVU470
 1847 0024 8368     		ldr	r3, [r0, #8]
 1848              		.loc 1 344 10 discriminator 1 view .LVU471
 1849 0026 13F0010F 		tst	r3, #1
 1850 002a FAD0     		beq	.L116
 345:src/main.c    **** 		rxdata[i] = spi->DR; 
 1851              		.loc 1 345 3 is_stmt 1 discriminator 2 view .LVU472
 1852              		.loc 1 345 18 is_stmt 0 discriminator 2 view .LVU473
 1853 002c C368     		ldr	r3, [r0, #12]
 1854              		.loc 1 345 13 discriminator 2 view .LVU474
 1855 002e 42F80E30 		str	r3, [r2, lr]
 341:src/main.c    **** 		while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 1856              		.loc 1 341 28 is_stmt 1 discriminator 2 view .LVU475
 1857 0032 0CF1010C 		add	ip, ip, #1
 1858              	.LVL101:
ARM GAS  /tmp/ccY6rBif.s 			page 43


 1859              	.L113:
 341:src/main.c    **** 		while (spi->SR & (1<<7)) {__NOP();} // wait while busy 
 1860              		.loc 1 341 20 discriminator 1 view .LVU476
 1861 0036 8C45     		cmp	ip, r1
 1862 0038 E9DB     		blt	.L117
 1863              	.LBE19:
 346:src/main.c    **** 	}
 347:src/main.c    **** } 
 1864              		.loc 1 347 1 is_stmt 0 view .LVU477
 1865 003a 10BD     		pop	{r4, pc}
 1866              		.loc 1 347 1 view .LVU478
 1867              		.cfi_endproc
 1868              	.LFE159:
 1870              		.section	.text.softi2c_line_mode,"ax",%progbits
 1871              		.align	1
 1872              		.global	softi2c_line_mode
 1873              		.syntax unified
 1874              		.thumb
 1875              		.thumb_func
 1877              	softi2c_line_mode:
 1878              	.LVL102:
 1879              	.LFB160:
 348:src/main.c    **** 
 349:src/main.c    **** void softi2c_line_mode(GPIO_TypeDef * port, int pin, bool deassert_line) {
 1880              		.loc 1 349 74 is_stmt 1 view -0
 1881              		.cfi_startproc
 1882              		@ args = 0, pretend = 0, frame = 0
 1883              		@ frame_needed = 0, uses_anonymous_args = 0
 1884              		@ link register save eliminated.
 350:src/main.c    **** 	if (deassert_line) {
 1885              		.loc 1 350 2 view .LVU480
 1886              		.loc 1 350 5 is_stmt 0 view .LVU481
 1887 0000 3AB1     		cbz	r2, .L120
 351:src/main.c    **** 		port->MODER &= ~(0x3 << (pin*2)); 
 1888              		.loc 1 351 3 is_stmt 1 view .LVU482
 1889              		.loc 1 351 7 is_stmt 0 view .LVU483
 1890 0002 0368     		ldr	r3, [r0]
 1891              		.loc 1 351 31 view .LVU484
 1892 0004 4900     		lsls	r1, r1, #1
 1893              	.LVL103:
 1894              		.loc 1 351 24 view .LVU485
 1895 0006 0322     		movs	r2, #3
 1896              	.LVL104:
 1897              		.loc 1 351 24 view .LVU486
 1898 0008 8A40     		lsls	r2, r2, r1
 1899              		.loc 1 351 15 view .LVU487
 1900 000a 23EA0203 		bic	r3, r3, r2
 1901 000e 0360     		str	r3, [r0]
 1902 0010 7047     		bx	lr
 1903              	.LVL105:
 1904              	.L120:
 352:src/main.c    **** 	} else {
 353:src/main.c    **** 		port->MODER = (port->MODER & ~(0x3 << (pin*2))) | (1 << pin*2); 
 1905              		.loc 1 353 3 is_stmt 1 view .LVU488
 1906              		.loc 1 353 22 is_stmt 0 view .LVU489
 1907 0012 0368     		ldr	r3, [r0]
 1908              		.loc 1 353 45 view .LVU490
ARM GAS  /tmp/ccY6rBif.s 			page 44


 1909 0014 4900     		lsls	r1, r1, #1
 1910              	.LVL106:
 1911              		.loc 1 353 38 view .LVU491
 1912 0016 0322     		movs	r2, #3
 1913              	.LVL107:
 1914              		.loc 1 353 38 view .LVU492
 1915 0018 8A40     		lsls	r2, r2, r1
 1916              		.loc 1 353 30 view .LVU493
 1917 001a 23EA0203 		bic	r3, r3, r2
 1918              		.loc 1 353 56 view .LVU494
 1919 001e 0122     		movs	r2, #1
 1920 0020 8A40     		lsls	r2, r2, r1
 1921              		.loc 1 353 51 view .LVU495
 1922 0022 1343     		orrs	r3, r3, r2
 1923              		.loc 1 353 15 view .LVU496
 1924 0024 0360     		str	r3, [r0]
 354:src/main.c    **** 	}
 355:src/main.c    **** }
 1925              		.loc 1 355 1 view .LVU497
 1926 0026 7047     		bx	lr
 1927              		.cfi_endproc
 1928              	.LFE160:
 1930              		.section	.text.init_softi2c,"ax",%progbits
 1931              		.align	1
 1932              		.global	init_softi2c
 1933              		.syntax unified
 1934              		.thumb
 1935              		.thumb_func
 1937              	init_softi2c:
 1938              	.LVL108:
 1939              	.LFB161:
 356:src/main.c    **** 
 357:src/main.c    **** void init_softi2c(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin) {
 1940              		.loc 1 357 95 is_stmt 1 view -0
 1941              		.cfi_startproc
 1942              		@ args = 0, pretend = 0, frame = 0
 1943              		@ frame_needed = 0, uses_anonymous_args = 0
 1944              		.loc 1 357 95 is_stmt 0 view .LVU499
 1945 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1946              	.LCFI19:
 1947              		.cfi_def_cfa_offset 24
 1948              		.cfi_offset 3, -24
 1949              		.cfi_offset 4, -20
 1950              		.cfi_offset 5, -16
 1951              		.cfi_offset 6, -12
 1952              		.cfi_offset 7, -8
 1953              		.cfi_offset 14, -4
 1954 0002 1546     		mov	r5, r2
 1955 0004 1E46     		mov	r6, r3
 358:src/main.c    **** 	scl_port->OTYPER = (scl_port->OTYPER & ~(1 << scl_pin)) | (0 << scl_pin); // push pull 
 1956              		.loc 1 358 2 is_stmt 1 view .LVU500
 1957              		.loc 1 358 30 is_stmt 0 view .LVU501
 1958 0006 4368     		ldr	r3, [r0, #4]
 1959              	.LVL109:
 1960              		.loc 1 358 45 view .LVU502
 1961 0008 0127     		movs	r7, #1
 1962 000a 07FA01F2 		lsl	r2, r7, r1
ARM GAS  /tmp/ccY6rBif.s 			page 45


 1963              	.LVL110:
 1964              		.loc 1 358 58 view .LVU503
 1965 000e 23EA0203 		bic	r3, r3, r2
 1966              		.loc 1 358 19 view .LVU504
 1967 0012 4360     		str	r3, [r0, #4]
 359:src/main.c    **** 	sda_port->OTYPER = (sda_port->OTYPER & ~(1 << sda_pin)) | (0 << sda_pin); 
 1968              		.loc 1 359 2 is_stmt 1 view .LVU505
 1969              		.loc 1 359 30 is_stmt 0 view .LVU506
 1970 0014 6B68     		ldr	r3, [r5, #4]
 1971              		.loc 1 359 45 view .LVU507
 1972 0016 07FA06F2 		lsl	r2, r7, r6
 1973              		.loc 1 359 58 view .LVU508
 1974 001a 23EA0203 		bic	r3, r3, r2
 1975              		.loc 1 359 19 view .LVU509
 1976 001e 6B60     		str	r3, [r5, #4]
 360:src/main.c    **** 	scl_port->OSPEEDR = (scl_port->OSPEEDR & ~(0x3 << (scl_pin*2))) | (3 << scl_pin*2); // very high s
 1977              		.loc 1 360 2 is_stmt 1 view .LVU510
 1978              		.loc 1 360 31 is_stmt 0 view .LVU511
 1979 0020 8368     		ldr	r3, [r0, #8]
 1980              		.loc 1 360 60 view .LVU512
 1981 0022 01FA07F4 		lsl	r4, r1, r7
 1982              		.loc 1 360 49 view .LVU513
 1983 0026 0322     		movs	r2, #3
 1984 0028 02FA04F4 		lsl	r4, r2, r4
 1985              		.loc 1 360 41 view .LVU514
 1986 002c 23EA0403 		bic	r3, r3, r4
 1987              		.loc 1 360 66 view .LVU515
 1988 0030 2343     		orrs	r3, r3, r4
 1989              		.loc 1 360 20 view .LVU516
 1990 0032 8360     		str	r3, [r0, #8]
 361:src/main.c    **** 	sda_port->OSPEEDR = (sda_port->OSPEEDR & ~(0x3 << (sda_pin*2))) | (3 << sda_pin*2); 
 1991              		.loc 1 361 2 is_stmt 1 view .LVU517
 1992              		.loc 1 361 31 is_stmt 0 view .LVU518
 1993 0034 AB68     		ldr	r3, [r5, #8]
 1994              		.loc 1 361 60 view .LVU519
 1995 0036 06FA07F4 		lsl	r4, r6, r7
 1996              		.loc 1 361 49 view .LVU520
 1997 003a A240     		lsls	r2, r2, r4
 1998              		.loc 1 361 41 view .LVU521
 1999 003c 23EA0203 		bic	r3, r3, r2
 2000              		.loc 1 361 66 view .LVU522
 2001 0040 1343     		orrs	r3, r3, r2
 2002              		.loc 1 361 20 view .LVU523
 2003 0042 AB60     		str	r3, [r5, #8]
 362:src/main.c    **** 	scl_port->BSRR = 1 << (scl_pin + 16); // drive low when asserted 
 2004              		.loc 1 362 2 is_stmt 1 view .LVU524
 2005              		.loc 1 362 33 is_stmt 0 view .LVU525
 2006 0044 01F1100C 		add	ip, r1, #16
 2007              		.loc 1 362 21 view .LVU526
 2008 0048 07FA0CF4 		lsl	r4, r7, ip
 2009              		.loc 1 362 17 view .LVU527
 2010 004c 8461     		str	r4, [r0, #24]
 363:src/main.c    **** 	sda_port->BSRR = 1 << (sda_pin + 16);
 2011              		.loc 1 363 2 is_stmt 1 view .LVU528
 2012              		.loc 1 363 33 is_stmt 0 view .LVU529
 2013 004e 06F11003 		add	r3, r6, #16
 2014              		.loc 1 363 21 view .LVU530
ARM GAS  /tmp/ccY6rBif.s 			page 46


 2015 0052 07FA03F3 		lsl	r3, r7, r3
 2016              		.loc 1 363 17 view .LVU531
 2017 0056 AB61     		str	r3, [r5, #24]
 364:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 1); 
 2018              		.loc 1 364 2 is_stmt 1 view .LVU532
 2019 0058 3A46     		mov	r2, r7
 2020 005a FFF7FEFF 		bl	softi2c_line_mode
 2021              	.LVL111:
 365:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1); 
 2022              		.loc 1 365 2 view .LVU533
 2023 005e 3A46     		mov	r2, r7
 2024 0060 3146     		mov	r1, r6
 2025 0062 2846     		mov	r0, r5
 2026 0064 FFF7FEFF 		bl	softi2c_line_mode
 2027              	.LVL112:
 366:src/main.c    **** }
 2028              		.loc 1 366 1 is_stmt 0 view .LVU534
 2029 0068 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2030              		.loc 1 366 1 view .LVU535
 2031              		.cfi_endproc
 2032              	.LFE161:
 2034              		.section	.text.softi2c_delay,"ax",%progbits
 2035              		.align	1
 2036              		.global	softi2c_delay
 2037              		.syntax unified
 2038              		.thumb
 2039              		.thumb_func
 2041              	softi2c_delay:
 2042              	.LFB162:
 367:src/main.c    **** 
 368:src/main.c    **** void softi2c_delay() {
 2043              		.loc 1 368 22 is_stmt 1 view -0
 2044              		.cfi_startproc
 2045              		@ args = 0, pretend = 0, frame = 0
 2046              		@ frame_needed = 0, uses_anonymous_args = 0
 2047 0000 08B5     		push	{r3, lr}
 2048              	.LCFI20:
 2049              		.cfi_def_cfa_offset 8
 2050              		.cfi_offset 3, -8
 2051              		.cfi_offset 14, -4
 369:src/main.c    **** 	nop(30);
 2052              		.loc 1 369 2 view .LVU537
 2053 0002 1E20     		movs	r0, #30
 2054 0004 FFF7FEFF 		bl	nop
 2055              	.LVL113:
 370:src/main.c    **** }
 2056              		.loc 1 370 1 is_stmt 0 view .LVU538
 2057 0008 08BD     		pop	{r3, pc}
 2058              		.cfi_endproc
 2059              	.LFE162:
 2061              		.section	.text.softi2c_sig_start,"ax",%progbits
 2062              		.align	1
 2063              		.global	softi2c_sig_start
 2064              		.syntax unified
 2065              		.thumb
 2066              		.thumb_func
 2068              	softi2c_sig_start:
ARM GAS  /tmp/ccY6rBif.s 			page 47


 2069              	.LVL114:
 2070              	.LFB163:
 371:src/main.c    **** 
 372:src/main.c    **** void softi2c_sig_start(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin) 
 2071              		.loc 1 372 100 is_stmt 1 view -0
 2072              		.cfi_startproc
 2073              		@ args = 0, pretend = 0, frame = 0
 2074              		@ frame_needed = 0, uses_anonymous_args = 0
 2075              		.loc 1 372 100 is_stmt 0 view .LVU540
 2076 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2077              	.LCFI21:
 2078              		.cfi_def_cfa_offset 24
 2079              		.cfi_offset 3, -24
 2080              		.cfi_offset 4, -20
 2081              		.cfi_offset 5, -16
 2082              		.cfi_offset 6, -12
 2083              		.cfi_offset 7, -8
 2084              		.cfi_offset 14, -4
 2085 0002 0646     		mov	r6, r0
 2086 0004 0F46     		mov	r7, r1
 2087 0006 1446     		mov	r4, r2
 2088 0008 1D46     		mov	r5, r3
 373:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 1);
 2089              		.loc 1 373 2 is_stmt 1 view .LVU541
 2090 000a 0122     		movs	r2, #1
 2091              	.LVL115:
 2092              		.loc 1 373 2 is_stmt 0 view .LVU542
 2093 000c FFF7FEFF 		bl	softi2c_line_mode
 2094              	.LVL116:
 374:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1);
 2095              		.loc 1 374 2 is_stmt 1 view .LVU543
 2096 0010 0122     		movs	r2, #1
 2097 0012 2946     		mov	r1, r5
 2098 0014 2046     		mov	r0, r4
 2099 0016 FFF7FEFF 		bl	softi2c_line_mode
 2100              	.LVL117:
 375:src/main.c    **** 	softi2c_delay(); softi2c_delay();
 2101              		.loc 1 375 2 view .LVU544
 2102 001a FFF7FEFF 		bl	softi2c_delay
 2103              	.LVL118:
 2104              		.loc 1 375 19 view .LVU545
 2105 001e FFF7FEFF 		bl	softi2c_delay
 2106              	.LVL119:
 376:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 0);
 2107              		.loc 1 376 2 view .LVU546
 2108 0022 0022     		movs	r2, #0
 2109 0024 2946     		mov	r1, r5
 2110 0026 2046     		mov	r0, r4
 2111 0028 FFF7FEFF 		bl	softi2c_line_mode
 2112              	.LVL120:
 377:src/main.c    **** 	softi2c_delay(); softi2c_delay();
 2113              		.loc 1 377 2 view .LVU547
 2114 002c FFF7FEFF 		bl	softi2c_delay
 2115              	.LVL121:
 2116              		.loc 1 377 19 view .LVU548
 2117 0030 FFF7FEFF 		bl	softi2c_delay
 2118              	.LVL122:
ARM GAS  /tmp/ccY6rBif.s 			page 48


 378:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 0);
 2119              		.loc 1 378 2 view .LVU549
 2120 0034 0022     		movs	r2, #0
 2121 0036 3946     		mov	r1, r7
 2122 0038 3046     		mov	r0, r6
 2123 003a FFF7FEFF 		bl	softi2c_line_mode
 2124              	.LVL123:
 379:src/main.c    **** 	softi2c_delay(); 
 2125              		.loc 1 379 2 view .LVU550
 2126 003e FFF7FEFF 		bl	softi2c_delay
 2127              	.LVL124:
 380:src/main.c    **** }
 2128              		.loc 1 380 1 is_stmt 0 view .LVU551
 2129 0042 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2130              		.loc 1 380 1 view .LVU552
 2131              		.cfi_endproc
 2132              	.LFE163:
 2134              		.section	.text.softi2c_sig_repeated_start,"ax",%progbits
 2135              		.align	1
 2136              		.global	softi2c_sig_repeated_start
 2137              		.syntax unified
 2138              		.thumb
 2139              		.thumb_func
 2141              	softi2c_sig_repeated_start:
 2142              	.LVL125:
 2143              	.LFB164:
 381:src/main.c    **** 
 382:src/main.c    **** void softi2c_sig_repeated_start(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int 
 2144              		.loc 1 382 109 is_stmt 1 view -0
 2145              		.cfi_startproc
 2146              		@ args = 0, pretend = 0, frame = 0
 2147              		@ frame_needed = 0, uses_anonymous_args = 0
 2148              		.loc 1 382 109 is_stmt 0 view .LVU554
 2149 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2150              	.LCFI22:
 2151              		.cfi_def_cfa_offset 24
 2152              		.cfi_offset 3, -24
 2153              		.cfi_offset 4, -20
 2154              		.cfi_offset 5, -16
 2155              		.cfi_offset 6, -12
 2156              		.cfi_offset 7, -8
 2157              		.cfi_offset 14, -4
 2158 0002 0446     		mov	r4, r0
 2159 0004 0D46     		mov	r5, r1
 2160 0006 1646     		mov	r6, r2
 2161 0008 1F46     		mov	r7, r3
 383:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 0);
 2162              		.loc 1 383 2 is_stmt 1 view .LVU555
 2163 000a 0022     		movs	r2, #0
 2164              	.LVL126:
 2165              		.loc 1 383 2 is_stmt 0 view .LVU556
 2166 000c FFF7FEFF 		bl	softi2c_line_mode
 2167              	.LVL127:
 384:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1);
 2168              		.loc 1 384 2 is_stmt 1 view .LVU557
 2169 0010 0122     		movs	r2, #1
 2170 0012 3946     		mov	r1, r7
ARM GAS  /tmp/ccY6rBif.s 			page 49


 2171 0014 3046     		mov	r0, r6
 2172 0016 FFF7FEFF 		bl	softi2c_line_mode
 2173              	.LVL128:
 385:src/main.c    **** 	softi2c_delay();
 2174              		.loc 1 385 2 view .LVU558
 2175 001a FFF7FEFF 		bl	softi2c_delay
 2176              	.LVL129:
 386:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 1);
 2177              		.loc 1 386 2 view .LVU559
 2178 001e 0122     		movs	r2, #1
 2179 0020 2946     		mov	r1, r5
 2180 0022 2046     		mov	r0, r4
 2181 0024 FFF7FEFF 		bl	softi2c_line_mode
 2182              	.LVL130:
 387:src/main.c    **** 	softi2c_delay(); softi2c_delay();
 2183              		.loc 1 387 2 view .LVU560
 2184 0028 FFF7FEFF 		bl	softi2c_delay
 2185              	.LVL131:
 2186              		.loc 1 387 19 view .LVU561
 2187 002c FFF7FEFF 		bl	softi2c_delay
 2188              	.LVL132:
 388:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 0);
 2189              		.loc 1 388 2 view .LVU562
 2190 0030 0022     		movs	r2, #0
 2191 0032 3946     		mov	r1, r7
 2192 0034 3046     		mov	r0, r6
 2193 0036 FFF7FEFF 		bl	softi2c_line_mode
 2194              	.LVL133:
 389:src/main.c    **** 	softi2c_delay(); softi2c_delay();
 2195              		.loc 1 389 2 view .LVU563
 2196 003a FFF7FEFF 		bl	softi2c_delay
 2197              	.LVL134:
 2198              		.loc 1 389 19 view .LVU564
 2199 003e FFF7FEFF 		bl	softi2c_delay
 2200              	.LVL135:
 390:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 0);
 2201              		.loc 1 390 2 view .LVU565
 2202 0042 0022     		movs	r2, #0
 2203 0044 2946     		mov	r1, r5
 2204 0046 2046     		mov	r0, r4
 2205 0048 FFF7FEFF 		bl	softi2c_line_mode
 2206              	.LVL136:
 391:src/main.c    **** 	softi2c_delay(); 
 2207              		.loc 1 391 2 view .LVU566
 2208 004c FFF7FEFF 		bl	softi2c_delay
 2209              	.LVL137:
 392:src/main.c    **** }
 2210              		.loc 1 392 1 is_stmt 0 view .LVU567
 2211 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2212              		.loc 1 392 1 view .LVU568
 2213              		.cfi_endproc
 2214              	.LFE164:
 2216              		.section	.text.softi2c_sig_stop,"ax",%progbits
 2217              		.align	1
 2218              		.global	softi2c_sig_stop
 2219              		.syntax unified
 2220              		.thumb
ARM GAS  /tmp/ccY6rBif.s 			page 50


 2221              		.thumb_func
 2223              	softi2c_sig_stop:
 2224              	.LVL138:
 2225              	.LFB165:
 393:src/main.c    **** 
 394:src/main.c    **** void softi2c_sig_stop(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin) {
 2226              		.loc 1 394 99 is_stmt 1 view -0
 2227              		.cfi_startproc
 2228              		@ args = 0, pretend = 0, frame = 0
 2229              		@ frame_needed = 0, uses_anonymous_args = 0
 2230              		.loc 1 394 99 is_stmt 0 view .LVU570
 2231 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2232              	.LCFI23:
 2233              		.cfi_def_cfa_offset 24
 2234              		.cfi_offset 3, -24
 2235              		.cfi_offset 4, -20
 2236              		.cfi_offset 5, -16
 2237              		.cfi_offset 6, -12
 2238              		.cfi_offset 7, -8
 2239              		.cfi_offset 14, -4
 2240 0002 0646     		mov	r6, r0
 2241 0004 0F46     		mov	r7, r1
 2242 0006 1446     		mov	r4, r2
 2243 0008 1D46     		mov	r5, r3
 395:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 0);
 2244              		.loc 1 395 2 is_stmt 1 view .LVU571
 2245 000a 0022     		movs	r2, #0
 2246              	.LVL139:
 2247              		.loc 1 395 2 is_stmt 0 view .LVU572
 2248 000c FFF7FEFF 		bl	softi2c_line_mode
 2249              	.LVL140:
 396:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 0);
 2250              		.loc 1 396 2 is_stmt 1 view .LVU573
 2251 0010 0022     		movs	r2, #0
 2252 0012 2946     		mov	r1, r5
 2253 0014 2046     		mov	r0, r4
 2254 0016 FFF7FEFF 		bl	softi2c_line_mode
 2255              	.LVL141:
 397:src/main.c    **** 	softi2c_delay(); softi2c_delay();
 2256              		.loc 1 397 2 view .LVU574
 2257 001a FFF7FEFF 		bl	softi2c_delay
 2258              	.LVL142:
 2259              		.loc 1 397 19 view .LVU575
 2260 001e FFF7FEFF 		bl	softi2c_delay
 2261              	.LVL143:
 398:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 1);
 2262              		.loc 1 398 2 view .LVU576
 2263 0022 0122     		movs	r2, #1
 2264 0024 3946     		mov	r1, r7
 2265 0026 3046     		mov	r0, r6
 2266 0028 FFF7FEFF 		bl	softi2c_line_mode
 2267              	.LVL144:
 399:src/main.c    **** 	softi2c_delay(); softi2c_delay();
 2268              		.loc 1 399 2 view .LVU577
 2269 002c FFF7FEFF 		bl	softi2c_delay
 2270              	.LVL145:
 2271              		.loc 1 399 19 view .LVU578
ARM GAS  /tmp/ccY6rBif.s 			page 51


 2272 0030 FFF7FEFF 		bl	softi2c_delay
 2273              	.LVL146:
 400:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1);
 2274              		.loc 1 400 2 view .LVU579
 2275 0034 0122     		movs	r2, #1
 2276 0036 2946     		mov	r1, r5
 2277 0038 2046     		mov	r0, r4
 2278 003a FFF7FEFF 		bl	softi2c_line_mode
 2279              	.LVL147:
 401:src/main.c    **** 	softi2c_delay(); 
 2280              		.loc 1 401 2 view .LVU580
 2281 003e FFF7FEFF 		bl	softi2c_delay
 2282              	.LVL148:
 402:src/main.c    **** }
 2283              		.loc 1 402 1 is_stmt 0 view .LVU581
 2284 0042 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2285              		.loc 1 402 1 view .LVU582
 2286              		.cfi_endproc
 2287              	.LFE165:
 2289              		.section	.text.softi2c_send8,"ax",%progbits
 2290              		.align	1
 2291              		.global	softi2c_send8
 2292              		.syntax unified
 2293              		.thumb
 2294              		.thumb_func
 2296              	softi2c_send8:
 2297              	.LVL149:
 2298              	.LFB166:
 403:src/main.c    **** 
 404:src/main.c    **** void softi2c_send8(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin, int 
 2299              		.loc 1 404 107 is_stmt 1 view -0
 2300              		.cfi_startproc
 2301              		@ args = 4, pretend = 0, frame = 0
 2302              		@ frame_needed = 0, uses_anonymous_args = 0
 2303              		.loc 1 404 107 is_stmt 0 view .LVU584
 2304 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2305              	.LCFI24:
 2306              		.cfi_def_cfa_offset 32
 2307              		.cfi_offset 3, -32
 2308              		.cfi_offset 4, -28
 2309              		.cfi_offset 5, -24
 2310              		.cfi_offset 6, -20
 2311              		.cfi_offset 7, -16
 2312              		.cfi_offset 8, -12
 2313              		.cfi_offset 9, -8
 2314              		.cfi_offset 14, -4
 2315 0004 0646     		mov	r6, r0
 2316 0006 0D46     		mov	r5, r1
 2317 0008 9046     		mov	r8, r2
 2318 000a 1F46     		mov	r7, r3
 2319 000c DDF82090 		ldr	r9, [sp, #32]
 405:src/main.c    **** 	for (int i = 0; i < 8; i++) {
 2320              		.loc 1 405 2 is_stmt 1 view .LVU585
 2321              	.LBB20:
 2322              		.loc 1 405 7 view .LVU586
 2323              	.LVL150:
 2324              		.loc 1 405 11 is_stmt 0 view .LVU587
ARM GAS  /tmp/ccY6rBif.s 			page 52


 2325 0010 0024     		movs	r4, #0
 2326              		.loc 1 405 2 view .LVU588
 2327 0012 1AE0     		b	.L133
 2328              	.LVL151:
 2329              	.L134:
 406:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 0);
 2330              		.loc 1 406 3 is_stmt 1 discriminator 3 view .LVU589
 2331 0014 0022     		movs	r2, #0
 2332 0016 2946     		mov	r1, r5
 2333 0018 3046     		mov	r0, r6
 2334 001a FFF7FEFF 		bl	softi2c_line_mode
 2335              	.LVL152:
 407:src/main.c    **** 		softi2c_delay();
 2336              		.loc 1 407 3 discriminator 3 view .LVU590
 2337 001e FFF7FEFF 		bl	softi2c_delay
 2338              	.LVL153:
 408:src/main.c    **** 		softi2c_line_mode(sda_port, sda_pin, (data8 << i) & (1 << 7));
 2339              		.loc 1 408 3 discriminator 3 view .LVU591
 2340              		.loc 1 408 47 is_stmt 0 discriminator 3 view .LVU592
 2341 0022 09FA04F2 		lsl	r2, r9, r4
 2342              		.loc 1 408 3 discriminator 3 view .LVU593
 2343 0026 02F08002 		and	r2, r2, #128
 2344 002a 3946     		mov	r1, r7
 2345 002c 4046     		mov	r0, r8
 2346 002e FFF7FEFF 		bl	softi2c_line_mode
 2347              	.LVL154:
 409:src/main.c    **** 		softi2c_delay(); 
 2348              		.loc 1 409 3 is_stmt 1 discriminator 3 view .LVU594
 2349 0032 FFF7FEFF 		bl	softi2c_delay
 2350              	.LVL155:
 410:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 1);
 2351              		.loc 1 410 3 discriminator 3 view .LVU595
 2352 0036 0122     		movs	r2, #1
 2353 0038 2946     		mov	r1, r5
 2354 003a 3046     		mov	r0, r6
 2355 003c FFF7FEFF 		bl	softi2c_line_mode
 2356              	.LVL156:
 411:src/main.c    **** 		softi2c_delay(); softi2c_delay();
 2357              		.loc 1 411 3 discriminator 3 view .LVU596
 2358 0040 FFF7FEFF 		bl	softi2c_delay
 2359              	.LVL157:
 2360              		.loc 1 411 20 discriminator 3 view .LVU597
 2361 0044 FFF7FEFF 		bl	softi2c_delay
 2362              	.LVL158:
 405:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 0);
 2363              		.loc 1 405 26 discriminator 3 view .LVU598
 2364 0048 0134     		adds	r4, r4, #1
 2365              	.LVL159:
 2366              	.L133:
 405:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 0);
 2367              		.loc 1 405 20 discriminator 1 view .LVU599
 2368 004a 072C     		cmp	r4, #7
 2369 004c E2DD     		ble	.L134
 2370              	.LBE20:
 412:src/main.c    **** 	}
 413:src/main.c    **** }
 2371              		.loc 1 413 1 is_stmt 0 view .LVU600
ARM GAS  /tmp/ccY6rBif.s 			page 53


 2372 004e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 2373              		.loc 1 413 1 view .LVU601
 2374              		.cfi_endproc
 2375              	.LFE166:
 2377              		.section	.text.softi2c_read8,"ax",%progbits
 2378              		.align	1
 2379              		.global	softi2c_read8
 2380              		.syntax unified
 2381              		.thumb
 2382              		.thumb_func
 2384              	softi2c_read8:
 2385              	.LVL160:
 2386              	.LFB167:
 414:src/main.c    **** 
 415:src/main.c    **** int softi2c_read8(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin) {
 2387              		.loc 1 415 95 is_stmt 1 view -0
 2388              		.cfi_startproc
 2389              		@ args = 0, pretend = 0, frame = 0
 2390              		@ frame_needed = 0, uses_anonymous_args = 0
 2391              		.loc 1 415 95 is_stmt 0 view .LVU603
 2392 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2393              	.LCFI25:
 2394              		.cfi_def_cfa_offset 32
 2395              		.cfi_offset 3, -32
 2396              		.cfi_offset 4, -28
 2397              		.cfi_offset 5, -24
 2398              		.cfi_offset 6, -20
 2399              		.cfi_offset 7, -16
 2400              		.cfi_offset 8, -12
 2401              		.cfi_offset 9, -8
 2402              		.cfi_offset 14, -4
 2403 0004 0646     		mov	r6, r0
 2404 0006 0D46     		mov	r5, r1
 2405 0008 9046     		mov	r8, r2
 2406 000a 9946     		mov	r9, r3
 416:src/main.c    **** 	int data = 0; 
 2407              		.loc 1 416 2 is_stmt 1 view .LVU604
 2408              	.LVL161:
 417:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1);
 2409              		.loc 1 417 2 view .LVU605
 2410 000c 0122     		movs	r2, #1
 2411              	.LVL162:
 2412              		.loc 1 417 2 is_stmt 0 view .LVU606
 2413 000e 1946     		mov	r1, r3
 2414              	.LVL163:
 2415              		.loc 1 417 2 view .LVU607
 2416 0010 4046     		mov	r0, r8
 2417              	.LVL164:
 2418              		.loc 1 417 2 view .LVU608
 2419 0012 FFF7FEFF 		bl	softi2c_line_mode
 2420              	.LVL165:
 418:src/main.c    **** 	for (int i = 0; i < 8; i++) {
 2421              		.loc 1 418 2 is_stmt 1 view .LVU609
 2422              	.LBB21:
 2423              		.loc 1 418 7 view .LVU610
 2424              		.loc 1 418 11 is_stmt 0 view .LVU611
 2425 0016 0024     		movs	r4, #0
ARM GAS  /tmp/ccY6rBif.s 			page 54


 2426              	.LBE21:
 416:src/main.c    **** 	int data = 0; 
 2427              		.loc 1 416 6 view .LVU612
 2428 0018 2746     		mov	r7, r4
 2429              	.LBB22:
 2430              		.loc 1 418 2 view .LVU613
 2431 001a 1AE0     		b	.L137
 2432              	.LVL166:
 2433              	.L138:
 419:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 0);
 2434              		.loc 1 419 3 is_stmt 1 discriminator 3 view .LVU614
 2435 001c 0022     		movs	r2, #0
 2436 001e 2946     		mov	r1, r5
 2437 0020 3046     		mov	r0, r6
 2438 0022 FFF7FEFF 		bl	softi2c_line_mode
 2439              	.LVL167:
 420:src/main.c    **** 		softi2c_delay();
 2440              		.loc 1 420 3 discriminator 3 view .LVU615
 2441 0026 FFF7FEFF 		bl	softi2c_delay
 2442              	.LVL168:
 421:src/main.c    **** 		data |= gpio_read(sda_port, sda_pin) << (7-i);
 2443              		.loc 1 421 3 discriminator 3 view .LVU616
 2444              		.loc 1 421 11 is_stmt 0 discriminator 3 view .LVU617
 2445 002a 4946     		mov	r1, r9
 2446 002c 4046     		mov	r0, r8
 2447 002e FFF7FEFF 		bl	gpio_read
 2448              	.LVL169:
 2449              		.loc 1 421 45 discriminator 3 view .LVU618
 2450 0032 C4F10703 		rsb	r3, r4, #7
 2451              		.loc 1 421 40 discriminator 3 view .LVU619
 2452 0036 9840     		lsls	r0, r0, r3
 2453              		.loc 1 421 8 discriminator 3 view .LVU620
 2454 0038 0743     		orrs	r7, r7, r0
 2455              	.LVL170:
 422:src/main.c    **** 		softi2c_delay(); 
 2456              		.loc 1 422 3 is_stmt 1 discriminator 3 view .LVU621
 2457 003a FFF7FEFF 		bl	softi2c_delay
 2458              	.LVL171:
 423:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 1);
 2459              		.loc 1 423 3 discriminator 3 view .LVU622
 2460 003e 0122     		movs	r2, #1
 2461 0040 2946     		mov	r1, r5
 2462 0042 3046     		mov	r0, r6
 2463 0044 FFF7FEFF 		bl	softi2c_line_mode
 2464              	.LVL172:
 424:src/main.c    **** 		softi2c_delay(); softi2c_delay();
 2465              		.loc 1 424 3 discriminator 3 view .LVU623
 2466 0048 FFF7FEFF 		bl	softi2c_delay
 2467              	.LVL173:
 2468              		.loc 1 424 20 discriminator 3 view .LVU624
 2469 004c FFF7FEFF 		bl	softi2c_delay
 2470              	.LVL174:
 418:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 0);
 2471              		.loc 1 418 26 discriminator 3 view .LVU625
 2472 0050 0134     		adds	r4, r4, #1
 2473              	.LVL175:
 2474              	.L137:
ARM GAS  /tmp/ccY6rBif.s 			page 55


 418:src/main.c    **** 		softi2c_line_mode(scl_port, scl_pin, 0);
 2475              		.loc 1 418 20 discriminator 1 view .LVU626
 2476 0052 072C     		cmp	r4, #7
 2477 0054 E2DD     		ble	.L138
 2478              	.LBE22:
 425:src/main.c    **** 	}
 426:src/main.c    **** 	return data;
 2479              		.loc 1 426 2 view .LVU627
 427:src/main.c    **** }
 2480              		.loc 1 427 1 is_stmt 0 view .LVU628
 2481 0056 3846     		mov	r0, r7
 2482 0058 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 2483              		.loc 1 427 1 view .LVU629
 2484              		.cfi_endproc
 2485              	.LFE167:
 2487              		.section	.text.softi2c_send_nack,"ax",%progbits
 2488              		.align	1
 2489              		.global	softi2c_send_nack
 2490              		.syntax unified
 2491              		.thumb
 2492              		.thumb_func
 2494              	softi2c_send_nack:
 2495              	.LVL176:
 2496              	.LFB168:
 428:src/main.c    **** 
 429:src/main.c    **** void softi2c_send_nack(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin) 
 2497              		.loc 1 429 100 is_stmt 1 view -0
 2498              		.cfi_startproc
 2499              		@ args = 0, pretend = 0, frame = 0
 2500              		@ frame_needed = 0, uses_anonymous_args = 0
 2501              		.loc 1 429 100 is_stmt 0 view .LVU631
 2502 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2503              	.LCFI26:
 2504              		.cfi_def_cfa_offset 24
 2505              		.cfi_offset 3, -24
 2506              		.cfi_offset 4, -20
 2507              		.cfi_offset 5, -16
 2508              		.cfi_offset 6, -12
 2509              		.cfi_offset 7, -8
 2510              		.cfi_offset 14, -4
 2511 0002 0446     		mov	r4, r0
 2512 0004 0D46     		mov	r5, r1
 2513 0006 1646     		mov	r6, r2
 2514 0008 1F46     		mov	r7, r3
 430:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 0);
 2515              		.loc 1 430 2 is_stmt 1 view .LVU632
 2516 000a 0022     		movs	r2, #0
 2517              	.LVL177:
 2518              		.loc 1 430 2 is_stmt 0 view .LVU633
 2519 000c FFF7FEFF 		bl	softi2c_line_mode
 2520              	.LVL178:
 431:src/main.c    **** 	softi2c_delay();
 2521              		.loc 1 431 2 is_stmt 1 view .LVU634
 2522 0010 FFF7FEFF 		bl	softi2c_delay
 2523              	.LVL179:
 432:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1);
 2524              		.loc 1 432 2 view .LVU635
ARM GAS  /tmp/ccY6rBif.s 			page 56


 2525 0014 0122     		movs	r2, #1
 2526 0016 3946     		mov	r1, r7
 2527 0018 3046     		mov	r0, r6
 2528 001a FFF7FEFF 		bl	softi2c_line_mode
 2529              	.LVL180:
 433:src/main.c    **** 	softi2c_delay(); 
 2530              		.loc 1 433 2 view .LVU636
 2531 001e FFF7FEFF 		bl	softi2c_delay
 2532              	.LVL181:
 434:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 1);
 2533              		.loc 1 434 2 view .LVU637
 2534 0022 0122     		movs	r2, #1
 2535 0024 2946     		mov	r1, r5
 2536 0026 2046     		mov	r0, r4
 2537 0028 FFF7FEFF 		bl	softi2c_line_mode
 2538              	.LVL182:
 435:src/main.c    **** 	softi2c_delay(); 
 2539              		.loc 1 435 2 view .LVU638
 2540 002c FFF7FEFF 		bl	softi2c_delay
 2541              	.LVL183:
 436:src/main.c    **** }
 2542              		.loc 1 436 1 is_stmt 0 view .LVU639
 2543 0030 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2544              		.loc 1 436 1 view .LVU640
 2545              		.cfi_endproc
 2546              	.LFE168:
 2548              		.section	.text.softi2c_read_nack,"ax",%progbits
 2549              		.align	1
 2550              		.global	softi2c_read_nack
 2551              		.syntax unified
 2552              		.thumb
 2553              		.thumb_func
 2555              	softi2c_read_nack:
 2556              	.LVL184:
 2557              	.LFB169:
 437:src/main.c    **** 
 438:src/main.c    **** int softi2c_read_nack(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin) {
 2558              		.loc 1 438 99 is_stmt 1 view -0
 2559              		.cfi_startproc
 2560              		@ args = 0, pretend = 0, frame = 0
 2561              		@ frame_needed = 0, uses_anonymous_args = 0
 2562              		.loc 1 438 99 is_stmt 0 view .LVU642
 2563 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2564              	.LCFI27:
 2565              		.cfi_def_cfa_offset 24
 2566              		.cfi_offset 3, -24
 2567              		.cfi_offset 4, -20
 2568              		.cfi_offset 5, -16
 2569              		.cfi_offset 6, -12
 2570              		.cfi_offset 7, -8
 2571              		.cfi_offset 14, -4
 2572 0002 0646     		mov	r6, r0
 2573 0004 0F46     		mov	r7, r1
 2574 0006 1446     		mov	r4, r2
 2575 0008 1D46     		mov	r5, r3
 439:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 0);
 2576              		.loc 1 439 2 is_stmt 1 view .LVU643
ARM GAS  /tmp/ccY6rBif.s 			page 57


 2577 000a 0022     		movs	r2, #0
 2578              	.LVL185:
 2579              		.loc 1 439 2 is_stmt 0 view .LVU644
 2580 000c FFF7FEFF 		bl	softi2c_line_mode
 2581              	.LVL186:
 440:src/main.c    **** 	softi2c_delay();
 2582              		.loc 1 440 2 is_stmt 1 view .LVU645
 2583 0010 FFF7FEFF 		bl	softi2c_delay
 2584              	.LVL187:
 441:src/main.c    **** 	softi2c_line_mode(sda_port, sda_pin, 1);
 2585              		.loc 1 441 2 view .LVU646
 2586 0014 0122     		movs	r2, #1
 2587 0016 2946     		mov	r1, r5
 2588 0018 2046     		mov	r0, r4
 2589 001a FFF7FEFF 		bl	softi2c_line_mode
 2590              	.LVL188:
 442:src/main.c    **** 	softi2c_delay(); 
 2591              		.loc 1 442 2 view .LVU647
 2592 001e FFF7FEFF 		bl	softi2c_delay
 2593              	.LVL189:
 443:src/main.c    **** 	softi2c_line_mode(scl_port, scl_pin, 1);
 2594              		.loc 1 443 2 view .LVU648
 2595 0022 0122     		movs	r2, #1
 2596 0024 3946     		mov	r1, r7
 2597 0026 3046     		mov	r0, r6
 2598 0028 FFF7FEFF 		bl	softi2c_line_mode
 2599              	.LVL190:
 444:src/main.c    **** 	softi2c_delay(); 
 2600              		.loc 1 444 2 view .LVU649
 2601 002c FFF7FEFF 		bl	softi2c_delay
 2602              	.LVL191:
 445:src/main.c    **** 	int nack = gpio_read(sda_port, sda_pin);
 2603              		.loc 1 445 2 view .LVU650
 2604              		.loc 1 445 13 is_stmt 0 view .LVU651
 2605 0030 2946     		mov	r1, r5
 2606 0032 2046     		mov	r0, r4
 2607 0034 FFF7FEFF 		bl	gpio_read
 2608              	.LVL192:
 2609 0038 0446     		mov	r4, r0
 2610              	.LVL193:
 446:src/main.c    **** 	softi2c_delay();
 2611              		.loc 1 446 2 is_stmt 1 view .LVU652
 2612 003a FFF7FEFF 		bl	softi2c_delay
 2613              	.LVL194:
 447:src/main.c    **** 	return nack; 
 2614              		.loc 1 447 2 view .LVU653
 448:src/main.c    **** }
 2615              		.loc 1 448 1 is_stmt 0 view .LVU654
 2616 003e 2046     		mov	r0, r4
 2617 0040 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2618              		.loc 1 448 1 view .LVU655
 2619              		.cfi_endproc
 2620              	.LFE169:
 2622              		.section	.text.softi2c_write_reg,"ax",%progbits
 2623              		.align	1
 2624              		.global	softi2c_write_reg
 2625              		.syntax unified
ARM GAS  /tmp/ccY6rBif.s 			page 58


 2626              		.thumb
 2627              		.thumb_func
 2629              	softi2c_write_reg:
 2630              	.LVL195:
 2631              	.LFB170:
 449:src/main.c    **** 
 450:src/main.c    **** int softi2c_write_reg(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin, i
 2632              		.loc 1 450 140 is_stmt 1 view -0
 2633              		.cfi_startproc
 2634              		@ args = 12, pretend = 0, frame = 0
 2635              		@ frame_needed = 0, uses_anonymous_args = 0
 2636              		.loc 1 450 140 is_stmt 0 view .LVU657
 2637 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2638              	.LCFI28:
 2639              		.cfi_def_cfa_offset 24
 2640              		.cfi_offset 4, -24
 2641              		.cfi_offset 5, -20
 2642              		.cfi_offset 6, -16
 2643              		.cfi_offset 7, -12
 2644              		.cfi_offset 8, -8
 2645              		.cfi_offset 14, -4
 2646 0004 82B0     		sub	sp, sp, #8
 2647              	.LCFI29:
 2648              		.cfi_def_cfa_offset 32
 2649 0006 0446     		mov	r4, r0
 2650 0008 0D46     		mov	r5, r1
 2651 000a 1646     		mov	r6, r2
 2652 000c 1F46     		mov	r7, r3
 451:src/main.c    **** 	int nack = 0; 
 2653              		.loc 1 451 2 is_stmt 1 view .LVU658
 2654              	.LVL196:
 452:src/main.c    **** 	softi2c_sig_start(scl_port, scl_pin, sda_port, sda_pin);
 2655              		.loc 1 452 2 view .LVU659
 2656 000e FFF7FEFF 		bl	softi2c_sig_start
 2657              	.LVL197:
 453:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, device_addr << 1 | 0);
 2658              		.loc 1 453 2 view .LVU660
 2659 0012 089B     		ldr	r3, [sp, #32]
 2660 0014 5B00     		lsls	r3, r3, #1
 2661 0016 0093     		str	r3, [sp]
 2662 0018 3B46     		mov	r3, r7
 2663 001a 3246     		mov	r2, r6
 2664 001c 2946     		mov	r1, r5
 2665 001e 2046     		mov	r0, r4
 2666 0020 FFF7FEFF 		bl	softi2c_send8
 2667              	.LVL198:
 454:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2668              		.loc 1 454 2 view .LVU661
 2669              		.loc 1 454 10 is_stmt 0 view .LVU662
 2670 0024 3B46     		mov	r3, r7
 2671 0026 3246     		mov	r2, r6
 2672 0028 2946     		mov	r1, r5
 2673 002a 2046     		mov	r0, r4
 2674 002c FFF7FEFF 		bl	softi2c_read_nack
 2675              	.LVL199:
 2676 0030 8046     		mov	r8, r0
 2677              	.LVL200:
ARM GAS  /tmp/ccY6rBif.s 			page 59


 455:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, reg_addr);
 2678              		.loc 1 455 2 is_stmt 1 view .LVU663
 2679 0032 099B     		ldr	r3, [sp, #36]
 2680 0034 0093     		str	r3, [sp]
 2681 0036 3B46     		mov	r3, r7
 2682 0038 3246     		mov	r2, r6
 2683 003a 2946     		mov	r1, r5
 2684 003c 2046     		mov	r0, r4
 2685              	.LVL201:
 2686              		.loc 1 455 2 is_stmt 0 view .LVU664
 2687 003e FFF7FEFF 		bl	softi2c_send8
 2688              	.LVL202:
 456:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2689              		.loc 1 456 2 is_stmt 1 view .LVU665
 2690              		.loc 1 456 10 is_stmt 0 view .LVU666
 2691 0042 3B46     		mov	r3, r7
 2692 0044 3246     		mov	r2, r6
 2693 0046 2946     		mov	r1, r5
 2694 0048 2046     		mov	r0, r4
 2695 004a FFF7FEFF 		bl	softi2c_read_nack
 2696              	.LVL203:
 2697              		.loc 1 456 7 view .LVU667
 2698 004e 8044     		add	r8, r8, r0
 2699              	.LVL204:
 457:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, data);
 2700              		.loc 1 457 2 is_stmt 1 view .LVU668
 2701 0050 0A9B     		ldr	r3, [sp, #40]
 2702 0052 0093     		str	r3, [sp]
 2703 0054 3B46     		mov	r3, r7
 2704 0056 3246     		mov	r2, r6
 2705 0058 2946     		mov	r1, r5
 2706 005a 2046     		mov	r0, r4
 2707 005c FFF7FEFF 		bl	softi2c_send8
 2708              	.LVL205:
 458:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2709              		.loc 1 458 2 view .LVU669
 2710              		.loc 1 458 10 is_stmt 0 view .LVU670
 2711 0060 3B46     		mov	r3, r7
 2712 0062 3246     		mov	r2, r6
 2713 0064 2946     		mov	r1, r5
 2714 0066 2046     		mov	r0, r4
 2715 0068 FFF7FEFF 		bl	softi2c_read_nack
 2716              	.LVL206:
 2717              		.loc 1 458 7 view .LVU671
 2718 006c 8044     		add	r8, r8, r0
 2719              	.LVL207:
 459:src/main.c    **** 	softi2c_sig_stop(scl_port, scl_pin, sda_port, sda_pin);
 2720              		.loc 1 459 2 is_stmt 1 view .LVU672
 2721 006e 3B46     		mov	r3, r7
 2722 0070 3246     		mov	r2, r6
 2723 0072 2946     		mov	r1, r5
 2724 0074 2046     		mov	r0, r4
 2725 0076 FFF7FEFF 		bl	softi2c_sig_stop
 2726              	.LVL208:
 460:src/main.c    **** 	return nack; 
 2727              		.loc 1 460 2 view .LVU673
 461:src/main.c    **** }
ARM GAS  /tmp/ccY6rBif.s 			page 60


 2728              		.loc 1 461 1 is_stmt 0 view .LVU674
 2729 007a 4046     		mov	r0, r8
 2730 007c 02B0     		add	sp, sp, #8
 2731              	.LCFI30:
 2732              		.cfi_def_cfa_offset 24
 2733              		@ sp needed
 2734 007e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2735              		.loc 1 461 1 view .LVU675
 2736              		.cfi_endproc
 2737              	.LFE170:
 2739              		.section	.text.softi2c_read_reg,"ax",%progbits
 2740              		.align	1
 2741              		.global	softi2c_read_reg
 2742              		.syntax unified
 2743              		.thumb
 2744              		.thumb_func
 2746              	softi2c_read_reg:
 2747              	.LVL209:
 2748              	.LFB171:
 462:src/main.c    **** 
 463:src/main.c    **** int softi2c_read_reg(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin, in
 2749              		.loc 1 463 129 is_stmt 1 view -0
 2750              		.cfi_startproc
 2751              		@ args = 8, pretend = 0, frame = 0
 2752              		@ frame_needed = 0, uses_anonymous_args = 0
 2753              		.loc 1 463 129 is_stmt 0 view .LVU677
 2754 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2755              	.LCFI31:
 2756              		.cfi_def_cfa_offset 24
 2757              		.cfi_offset 4, -24
 2758              		.cfi_offset 5, -20
 2759              		.cfi_offset 6, -16
 2760              		.cfi_offset 7, -12
 2761              		.cfi_offset 8, -8
 2762              		.cfi_offset 14, -4
 2763 0004 82B0     		sub	sp, sp, #8
 2764              	.LCFI32:
 2765              		.cfi_def_cfa_offset 32
 2766 0006 0446     		mov	r4, r0
 2767 0008 0D46     		mov	r5, r1
 2768 000a 1646     		mov	r6, r2
 2769 000c 1F46     		mov	r7, r3
 464:src/main.c    **** 	int nack = 0; 
 2770              		.loc 1 464 2 is_stmt 1 view .LVU678
 2771              	.LVL210:
 465:src/main.c    **** 	softi2c_sig_start(scl_port, scl_pin, sda_port, sda_pin);
 2772              		.loc 1 465 2 view .LVU679
 2773 000e FFF7FEFF 		bl	softi2c_sig_start
 2774              	.LVL211:
 466:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, device_addr << 1 | 0);
 2775              		.loc 1 466 2 view .LVU680
 2776 0012 089B     		ldr	r3, [sp, #32]
 2777 0014 4FEA4308 		lsl	r8, r3, #1
 2778 0018 CDF80080 		str	r8, [sp]
 2779 001c 3B46     		mov	r3, r7
 2780 001e 3246     		mov	r2, r6
 2781 0020 2946     		mov	r1, r5
ARM GAS  /tmp/ccY6rBif.s 			page 61


 2782 0022 2046     		mov	r0, r4
 2783 0024 FFF7FEFF 		bl	softi2c_send8
 2784              	.LVL212:
 467:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2785              		.loc 1 467 2 view .LVU681
 2786              		.loc 1 467 10 is_stmt 0 view .LVU682
 2787 0028 3B46     		mov	r3, r7
 2788 002a 3246     		mov	r2, r6
 2789 002c 2946     		mov	r1, r5
 2790 002e 2046     		mov	r0, r4
 2791 0030 FFF7FEFF 		bl	softi2c_read_nack
 2792              	.LVL213:
 468:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, reg_addr);
 2793              		.loc 1 468 2 is_stmt 1 view .LVU683
 2794 0034 099B     		ldr	r3, [sp, #36]
 2795 0036 0093     		str	r3, [sp]
 2796 0038 3B46     		mov	r3, r7
 2797 003a 3246     		mov	r2, r6
 2798 003c 2946     		mov	r1, r5
 2799 003e 2046     		mov	r0, r4
 2800 0040 FFF7FEFF 		bl	softi2c_send8
 2801              	.LVL214:
 469:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2802              		.loc 1 469 2 view .LVU684
 2803              		.loc 1 469 10 is_stmt 0 view .LVU685
 2804 0044 3B46     		mov	r3, r7
 2805 0046 3246     		mov	r2, r6
 2806 0048 2946     		mov	r1, r5
 2807 004a 2046     		mov	r0, r4
 2808 004c FFF7FEFF 		bl	softi2c_read_nack
 2809              	.LVL215:
 470:src/main.c    **** 	softi2c_sig_repeated_start(scl_port, scl_pin, sda_port, sda_pin);
 2810              		.loc 1 470 2 is_stmt 1 view .LVU686
 2811 0050 3B46     		mov	r3, r7
 2812 0052 3246     		mov	r2, r6
 2813 0054 2946     		mov	r1, r5
 2814 0056 2046     		mov	r0, r4
 2815 0058 FFF7FEFF 		bl	softi2c_sig_repeated_start
 2816              	.LVL216:
 471:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, device_addr << 1 | 1);
 2817              		.loc 1 471 2 view .LVU687
 2818 005c 48F00103 		orr	r3, r8, #1
 2819 0060 0093     		str	r3, [sp]
 2820 0062 3B46     		mov	r3, r7
 2821 0064 3246     		mov	r2, r6
 2822 0066 2946     		mov	r1, r5
 2823 0068 2046     		mov	r0, r4
 2824 006a FFF7FEFF 		bl	softi2c_send8
 2825              	.LVL217:
 472:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2826              		.loc 1 472 2 view .LVU688
 2827              		.loc 1 472 10 is_stmt 0 view .LVU689
 2828 006e 3B46     		mov	r3, r7
 2829 0070 3246     		mov	r2, r6
 2830 0072 2946     		mov	r1, r5
 2831 0074 2046     		mov	r0, r4
 2832 0076 FFF7FEFF 		bl	softi2c_read_nack
ARM GAS  /tmp/ccY6rBif.s 			page 62


 2833              	.LVL218:
 473:src/main.c    **** 	int data = softi2c_read8(scl_port, scl_pin, sda_port, sda_pin);
 2834              		.loc 1 473 2 is_stmt 1 view .LVU690
 2835              		.loc 1 473 13 is_stmt 0 view .LVU691
 2836 007a 3B46     		mov	r3, r7
 2837 007c 3246     		mov	r2, r6
 2838 007e 2946     		mov	r1, r5
 2839 0080 2046     		mov	r0, r4
 2840 0082 FFF7FEFF 		bl	softi2c_read8
 2841              	.LVL219:
 2842 0086 8046     		mov	r8, r0
 2843              	.LVL220:
 474:src/main.c    **** 	softi2c_send_nack(scl_port, scl_pin, sda_port, sda_pin);
 2844              		.loc 1 474 2 is_stmt 1 view .LVU692
 2845 0088 3B46     		mov	r3, r7
 2846 008a 3246     		mov	r2, r6
 2847 008c 2946     		mov	r1, r5
 2848 008e 2046     		mov	r0, r4
 2849              	.LVL221:
 2850              		.loc 1 474 2 is_stmt 0 view .LVU693
 2851 0090 FFF7FEFF 		bl	softi2c_send_nack
 2852              	.LVL222:
 475:src/main.c    **** 	softi2c_sig_stop(scl_port, scl_pin, sda_port, sda_pin);
 2853              		.loc 1 475 2 is_stmt 1 view .LVU694
 2854 0094 3B46     		mov	r3, r7
 2855 0096 3246     		mov	r2, r6
 2856 0098 2946     		mov	r1, r5
 2857 009a 2046     		mov	r0, r4
 2858 009c FFF7FEFF 		bl	softi2c_sig_stop
 2859              	.LVL223:
 476:src/main.c    **** 	return data;
 2860              		.loc 1 476 2 view .LVU695
 477:src/main.c    **** }
 2861              		.loc 1 477 1 is_stmt 0 view .LVU696
 2862 00a0 4046     		mov	r0, r8
 2863 00a2 02B0     		add	sp, sp, #8
 2864              	.LCFI33:
 2865              		.cfi_def_cfa_offset 24
 2866              		@ sp needed
 2867 00a4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2868              		.loc 1 477 1 view .LVU697
 2869              		.cfi_endproc
 2870              	.LFE171:
 2872              		.section	.text.softi2c_probe,"ax",%progbits
 2873              		.align	1
 2874              		.global	softi2c_probe
 2875              		.syntax unified
 2876              		.thumb
 2877              		.thumb_func
 2879              	softi2c_probe:
 2880              	.LVL224:
 2881              	.LFB172:
 478:src/main.c    **** 
 479:src/main.c    **** bool softi2c_probe(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_pin, int 
 2882              		.loc 1 479 113 is_stmt 1 view -0
 2883              		.cfi_startproc
 2884              		@ args = 4, pretend = 0, frame = 0
ARM GAS  /tmp/ccY6rBif.s 			page 63


 2885              		@ frame_needed = 0, uses_anonymous_args = 0
 2886              		.loc 1 479 113 is_stmt 0 view .LVU699
 2887 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2888              	.LCFI34:
 2889              		.cfi_def_cfa_offset 24
 2890              		.cfi_offset 4, -24
 2891              		.cfi_offset 5, -20
 2892              		.cfi_offset 6, -16
 2893              		.cfi_offset 7, -12
 2894              		.cfi_offset 8, -8
 2895              		.cfi_offset 14, -4
 2896 0004 82B0     		sub	sp, sp, #8
 2897              	.LCFI35:
 2898              		.cfi_def_cfa_offset 32
 2899 0006 0446     		mov	r4, r0
 2900 0008 0D46     		mov	r5, r1
 2901 000a 1646     		mov	r6, r2
 2902 000c 1F46     		mov	r7, r3
 480:src/main.c    **** 	int nack = 0; 
 2903              		.loc 1 480 2 is_stmt 1 view .LVU700
 2904              	.LVL225:
 481:src/main.c    **** 	softi2c_sig_start(scl_port, scl_pin, sda_port, sda_pin);
 2905              		.loc 1 481 2 view .LVU701
 2906 000e FFF7FEFF 		bl	softi2c_sig_start
 2907              	.LVL226:
 482:src/main.c    **** 	softi2c_send8(scl_port, scl_pin, sda_port, sda_pin, device_addr << 1 | 1);
 2908              		.loc 1 482 2 view .LVU702
 2909              		.loc 1 482 66 is_stmt 0 view .LVU703
 2910 0012 089B     		ldr	r3, [sp, #32]
 2911 0014 5B00     		lsls	r3, r3, #1
 2912              		.loc 1 482 2 view .LVU704
 2913 0016 43F00103 		orr	r3, r3, #1
 2914 001a 0093     		str	r3, [sp]
 2915 001c 3B46     		mov	r3, r7
 2916 001e 3246     		mov	r2, r6
 2917 0020 2946     		mov	r1, r5
 2918 0022 2046     		mov	r0, r4
 2919 0024 FFF7FEFF 		bl	softi2c_send8
 2920              	.LVL227:
 483:src/main.c    **** 	nack += softi2c_read_nack(scl_port, scl_pin, sda_port, sda_pin);
 2921              		.loc 1 483 2 is_stmt 1 view .LVU705
 2922              		.loc 1 483 10 is_stmt 0 view .LVU706
 2923 0028 3B46     		mov	r3, r7
 2924 002a 3246     		mov	r2, r6
 2925 002c 2946     		mov	r1, r5
 2926 002e 2046     		mov	r0, r4
 2927 0030 FFF7FEFF 		bl	softi2c_read_nack
 2928              	.LVL228:
 2929 0034 8046     		mov	r8, r0
 2930              	.LVL229:
 484:src/main.c    **** 	softi2c_sig_stop(scl_port, scl_pin, sda_port, sda_pin);
 2931              		.loc 1 484 2 is_stmt 1 view .LVU707
 2932 0036 3B46     		mov	r3, r7
 2933 0038 3246     		mov	r2, r6
 2934 003a 2946     		mov	r1, r5
 2935 003c 2046     		mov	r0, r4
 2936              	.LVL230:
ARM GAS  /tmp/ccY6rBif.s 			page 64


 2937              		.loc 1 484 2 is_stmt 0 view .LVU708
 2938 003e FFF7FEFF 		bl	softi2c_sig_stop
 2939              	.LVL231:
 485:src/main.c    **** 	if (nack) {
 2940              		.loc 1 485 2 is_stmt 1 view .LVU709
 2941              		.loc 1 485 5 is_stmt 0 view .LVU710
 2942 0042 B8F1000F 		cmp	r8, #0
 2943 0046 03D0     		beq	.L150
 486:src/main.c    **** 		return 0;
 2944              		.loc 1 486 10 view .LVU711
 2945 0048 0020     		movs	r0, #0
 2946              	.L149:
 487:src/main.c    **** 	} else {
 488:src/main.c    **** 		return 1; 
 489:src/main.c    **** 	}
 490:src/main.c    **** }
 2947              		.loc 1 490 1 view .LVU712
 2948 004a 02B0     		add	sp, sp, #8
 2949              	.LCFI36:
 2950              		.cfi_remember_state
 2951              		.cfi_def_cfa_offset 24
 2952              		@ sp needed
 2953 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2954              	.LVL232:
 2955              	.L150:
 2956              	.LCFI37:
 2957              		.cfi_restore_state
 488:src/main.c    **** 	}
 2958              		.loc 1 488 10 view .LVU713
 2959 0050 0120     		movs	r0, #1
 2960 0052 FAE7     		b	.L149
 2961              		.cfi_endproc
 2962              	.LFE172:
 2964              		.section	.text.softi2c_read_reg_hl,"ax",%progbits
 2965              		.align	1
 2966              		.global	softi2c_read_reg_hl
 2967              		.syntax unified
 2968              		.thumb
 2969              		.thumb_func
 2971              	softi2c_read_reg_hl:
 2972              	.LVL233:
 2973              	.LFB173:
 491:src/main.c    **** 
 492:src/main.c    **** int16_t softi2c_read_reg_hl(GPIO_TypeDef * scl_port, int scl_pin, GPIO_TypeDef * sda_port, int sda_
 2974              		.loc 1 492 159 is_stmt 1 view -0
 2975              		.cfi_startproc
 2976              		@ args = 12, pretend = 0, frame = 0
 2977              		@ frame_needed = 0, uses_anonymous_args = 0
 2978              		.loc 1 492 159 is_stmt 0 view .LVU715
 2979 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2980              	.LCFI38:
 2981              		.cfi_def_cfa_offset 28
 2982              		.cfi_offset 4, -28
 2983              		.cfi_offset 5, -24
 2984              		.cfi_offset 6, -20
 2985              		.cfi_offset 7, -16
 2986              		.cfi_offset 8, -12
ARM GAS  /tmp/ccY6rBif.s 			page 65


 2987              		.cfi_offset 9, -8
 2988              		.cfi_offset 14, -4
 2989 0004 83B0     		sub	sp, sp, #12
 2990              	.LCFI39:
 2991              		.cfi_def_cfa_offset 40
 2992 0006 0546     		mov	r5, r0
 2993 0008 0E46     		mov	r6, r1
 2994 000a 1746     		mov	r7, r2
 2995 000c 9846     		mov	r8, r3
 2996 000e DDF82890 		ldr	r9, [sp, #40]
 493:src/main.c    **** 	return softi2c_read_reg(scl_port, scl_pin, sda_port, sda_pin, device_addr, high_reg_addr) << 8 | s
 2997              		.loc 1 493 2 is_stmt 1 view .LVU716
 2998              		.loc 1 493 9 is_stmt 0 view .LVU717
 2999 0012 0B9C     		ldr	r4, [sp, #44]
 3000 0014 0194     		str	r4, [sp, #4]
 3001 0016 CDF80090 		str	r9, [sp]
 3002 001a FFF7FEFF 		bl	softi2c_read_reg
 3003              	.LVL234:
 3004              		.loc 1 493 92 view .LVU718
 3005 001e 0402     		lsls	r4, r0, #8
 3006              		.loc 1 493 99 view .LVU719
 3007 0020 0C9B     		ldr	r3, [sp, #48]
 3008 0022 0193     		str	r3, [sp, #4]
 3009 0024 CDF80090 		str	r9, [sp]
 3010 0028 4346     		mov	r3, r8
 3011 002a 3A46     		mov	r2, r7
 3012 002c 3146     		mov	r1, r6
 3013 002e 2846     		mov	r0, r5
 3014 0030 FFF7FEFF 		bl	softi2c_read_reg
 3015              	.LVL235:
 3016              		.loc 1 493 97 view .LVU720
 3017 0034 2043     		orrs	r0, r0, r4
 494:src/main.c    **** }
 3018              		.loc 1 494 1 view .LVU721
 3019 0036 00B2     		sxth	r0, r0
 3020 0038 03B0     		add	sp, sp, #12
 3021              	.LCFI40:
 3022              		.cfi_def_cfa_offset 28
 3023              		@ sp needed
 3024 003a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3025              		.loc 1 494 1 view .LVU722
 3026              		.cfi_endproc
 3027              	.LFE173:
 3029              		.section	.text.init_adc,"ax",%progbits
 3030              		.align	1
 3031              		.global	init_adc
 3032              		.syntax unified
 3033              		.thumb
 3034              		.thumb_func
 3036              	init_adc:
 3037              	.LFB174:
 495:src/main.c    **** 
 496:src/main.c    **** void init_adc() {
 3038              		.loc 1 496 17 is_stmt 1 view -0
 3039              		.cfi_startproc
 3040              		@ args = 0, pretend = 0, frame = 0
 3041              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccY6rBif.s 			page 66


 3042              		@ link register save eliminated.
 497:src/main.c    **** 	GPIOA->MODER |= 0x3 << (1*2);
 3043              		.loc 1 497 2 view .LVU724
 3044              		.loc 1 497 7 is_stmt 0 view .LVU725
 3045 0000 4FF09042 		mov	r2, #1207959552
 3046 0004 1368     		ldr	r3, [r2]
 3047              		.loc 1 497 15 view .LVU726
 3048 0006 43F00C03 		orr	r3, r3, #12
 3049 000a 1360     		str	r3, [r2]
 498:src/main.c    **** 	
 499:src/main.c    **** }
 3050              		.loc 1 499 1 view .LVU727
 3051 000c 7047     		bx	lr
 3052              		.cfi_endproc
 3053              	.LFE174:
 3055              		.section	.text.op2_imu_write8,"ax",%progbits
 3056              		.align	1
 3057              		.global	op2_imu_write8
 3058              		.syntax unified
 3059              		.thumb
 3060              		.thumb_func
 3062              	op2_imu_write8:
 3063              	.LVL236:
 3064              	.LFB175:
 500:src/main.c    **** 
 501:src/main.c    **** #define OP2_SCI_UART LPUART1 
 502:src/main.c    **** #define OP2_SCI_UART_PINS GPIOC, 1, 8, GPIOC, 0, 8 
 503:src/main.c    **** //#define OP2_SCI_UART GPIOC, 1, GPIOC, 0 
 504:src/main.c    **** #define OP2_IMU_SPI SPI3 
 505:src/main.c    **** #define OP2_IMU_SPI_NCS GPIOG, 15 
 506:src/main.c    **** #define OP2_IMU_SPI_PINS GPIOB, 5, 6, GPIOB, 4, 6, GPIOB, 3, 6, OP2_IMU_SPI_NCS 
 507:src/main.c    **** #define OP2_MAG_I2C GPIOB, 8, GPIOB, 9 
 508:src/main.c    **** #define MAG_ADDR 0x0D 
 509:src/main.c    **** 
 510:src/main.c    **** #define IMU_ODR_OFF 		0 
 511:src/main.c    **** #define IMU_ODR_12_5_Hz 	1 
 512:src/main.c    **** #define IMU_ODR_26_Hz 		2 
 513:src/main.c    **** #define IMU_ODR_52_Hz 		3 
 514:src/main.c    **** #define IMU_ODR_104_Hz 		4 
 515:src/main.c    **** #define IMU_ODR_208_Hz 		5 
 516:src/main.c    **** #define IMU_ODR_417_Hz 		6 
 517:src/main.c    **** #define IMU_ODR_833_Hz 		7 
 518:src/main.c    **** #define IMU_ODR_1667_Hz 	8 
 519:src/main.c    **** #define IMU_ODR_3333_Hz 	9 
 520:src/main.c    **** #define IMU_ODR_6667_Hz 	10 
 521:src/main.c    **** #define IMU_FS_2_g 			0 
 522:src/main.c    **** #define IMU_FS_4_g 			2 
 523:src/main.c    **** #define IMU_FS_8_g 			3 
 524:src/main.c    **** #define IMU_FS_16_g 		1 
 525:src/main.c    **** #define IMU_FS_125_dps 		2 
 526:src/main.c    **** #define IMU_FS_250_dps 		0 
 527:src/main.c    **** #define IMU_FS_500_dps 		4 
 528:src/main.c    **** #define IMU_FS_1000_dps 	8 
 529:src/main.c    **** #define IMU_FS_2000_dps 	12 
 530:src/main.c    **** #define IMU_FS_4000_dps 	1 
 531:src/main.c    **** 
 532:src/main.c    **** #define MAG_ODR_OFF 		0 
ARM GAS  /tmp/ccY6rBif.s 			page 67


 533:src/main.c    **** #define MAG_ODR_10_Hz 		1 
 534:src/main.c    **** #define MAG_ODR_50_Hz 		2 
 535:src/main.c    **** #define MAG_ODR_100_Hz 		3 
 536:src/main.c    **** #define MAG_ODR_200_Hz		4 
 537:src/main.c    **** #define MAG_FS_2_G 			0 // btw: "G" is not a typo, it stands for gauss 
 538:src/main.c    **** #define MAG_FS_8_G	 		1 
 539:src/main.c    **** #define MAG_OVERSAMPLE_512 	0 
 540:src/main.c    **** #define MAG_OVERSAMPLE_256 	1 
 541:src/main.c    **** #define MAG_OVERSAMPLE_128 	2 
 542:src/main.c    **** #define MAG_OVERSAMPLE_64  	3 
 543:src/main.c    **** 
 544:src/main.c    **** void op2_imu_write8(int addr, int data) {
 3065              		.loc 1 544 41 is_stmt 1 view -0
 3066              		.cfi_startproc
 3067              		@ args = 0, pretend = 0, frame = 0
 3068              		@ frame_needed = 0, uses_anonymous_args = 0
 3069              		.loc 1 544 41 is_stmt 0 view .LVU729
 3070 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3071              	.LCFI41:
 3072              		.cfi_def_cfa_offset 24
 3073              		.cfi_offset 3, -24
 3074              		.cfi_offset 4, -20
 3075              		.cfi_offset 5, -16
 3076              		.cfi_offset 6, -12
 3077              		.cfi_offset 7, -8
 3078              		.cfi_offset 14, -4
 3079 0002 0546     		mov	r5, r0
 3080 0004 0E46     		mov	r6, r1
 545:src/main.c    **** 	gpio_set(OP2_IMU_SPI_NCS, 0);
 3081              		.loc 1 545 2 is_stmt 1 view .LVU730
 3082 0006 134F     		ldr	r7, .L157
 3083 0008 0022     		movs	r2, #0
 3084 000a 0F21     		movs	r1, #15
 3085              	.LVL237:
 3086              		.loc 1 545 2 is_stmt 0 view .LVU731
 3087 000c 3846     		mov	r0, r7
 3088              	.LVL238:
 3089              		.loc 1 545 2 view .LVU732
 3090 000e FFF7FEFF 		bl	gpio_set
 3091              	.LVL239:
 546:src/main.c    **** 	nop(10);
 3092              		.loc 1 546 2 is_stmt 1 view .LVU733
 3093 0012 0A20     		movs	r0, #10
 3094 0014 FFF7FEFF 		bl	nop
 3095              	.LVL240:
 547:src/main.c    **** 	spi_tx8x2(OP2_IMU_SPI, addr | (0<<7), data); // 0 is write 1 is read
 3096              		.loc 1 547 2 view .LVU734
 3097 0018 0F4C     		ldr	r4, .L157+4
 3098 001a 3246     		mov	r2, r6
 3099 001c 2946     		mov	r1, r5
 3100 001e 2046     		mov	r0, r4
 3101 0020 FFF7FEFF 		bl	spi_tx8x2
 3102              	.LVL241:
 548:src/main.c    **** 	spi_rx8(OP2_IMU_SPI); 
 3103              		.loc 1 548 2 view .LVU735
 3104 0024 2046     		mov	r0, r4
 3105 0026 FFF7FEFF 		bl	spi_rx8
ARM GAS  /tmp/ccY6rBif.s 			page 68


 3106              	.LVL242:
 549:src/main.c    **** 	spi_rx8(OP2_IMU_SPI); 
 3107              		.loc 1 549 2 view .LVU736
 3108 002a 2046     		mov	r0, r4
 3109 002c FFF7FEFF 		bl	spi_rx8
 3110              	.LVL243:
 550:src/main.c    **** 	spi_rx8(OP2_IMU_SPI); 
 3111              		.loc 1 550 2 view .LVU737
 3112 0030 2046     		mov	r0, r4
 3113 0032 FFF7FEFF 		bl	spi_rx8
 3114              	.LVL244:
 551:src/main.c    **** 	spi_block_while_busy(OP2_IMU_SPI);
 3115              		.loc 1 551 2 view .LVU738
 3116 0036 2046     		mov	r0, r4
 3117 0038 FFF7FEFF 		bl	spi_block_while_busy
 3118              	.LVL245:
 552:src/main.c    **** 	nop(10);
 3119              		.loc 1 552 2 view .LVU739
 3120 003c 0A20     		movs	r0, #10
 3121 003e FFF7FEFF 		bl	nop
 3122              	.LVL246:
 553:src/main.c    **** 	gpio_set(OP2_IMU_SPI_NCS, 1);
 3123              		.loc 1 553 2 view .LVU740
 3124 0042 0122     		movs	r2, #1
 3125 0044 0F21     		movs	r1, #15
 3126 0046 3846     		mov	r0, r7
 3127 0048 FFF7FEFF 		bl	gpio_set
 3128              	.LVL247:
 554:src/main.c    **** 	nop(10);
 3129              		.loc 1 554 2 view .LVU741
 3130 004c 0A20     		movs	r0, #10
 3131 004e FFF7FEFF 		bl	nop
 3132              	.LVL248:
 555:src/main.c    **** }
 3133              		.loc 1 555 1 is_stmt 0 view .LVU742
 3134 0052 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3135              	.LVL249:
 3136              	.L158:
 3137              		.loc 1 555 1 view .LVU743
 3138              		.align	2
 3139              	.L157:
 3140 0054 00180048 		.word	1207965696
 3141 0058 003C0040 		.word	1073757184
 3142              		.cfi_endproc
 3143              	.LFE175:
 3145              		.section	.text.op2_imu_read8,"ax",%progbits
 3146              		.align	1
 3147              		.global	op2_imu_read8
 3148              		.syntax unified
 3149              		.thumb
 3150              		.thumb_func
 3152              	op2_imu_read8:
 3153              	.LVL250:
 3154              	.LFB176:
 556:src/main.c    **** 
 557:src/main.c    **** int op2_imu_read8(int addr) {
 3155              		.loc 1 557 29 is_stmt 1 view -0
ARM GAS  /tmp/ccY6rBif.s 			page 69


 3156              		.cfi_startproc
 3157              		@ args = 0, pretend = 0, frame = 0
 3158              		@ frame_needed = 0, uses_anonymous_args = 0
 3159              		.loc 1 557 29 is_stmt 0 view .LVU745
 3160 0000 70B5     		push	{r4, r5, r6, lr}
 3161              	.LCFI42:
 3162              		.cfi_def_cfa_offset 16
 3163              		.cfi_offset 4, -16
 3164              		.cfi_offset 5, -12
 3165              		.cfi_offset 6, -8
 3166              		.cfi_offset 14, -4
 3167 0002 0546     		mov	r5, r0
 558:src/main.c    **** 	gpio_set(OP2_IMU_SPI_NCS, 0);
 3168              		.loc 1 558 2 is_stmt 1 view .LVU746
 3169 0004 144E     		ldr	r6, .L161
 3170 0006 0022     		movs	r2, #0
 3171 0008 0F21     		movs	r1, #15
 3172 000a 3046     		mov	r0, r6
 3173              	.LVL251:
 3174              		.loc 1 558 2 is_stmt 0 view .LVU747
 3175 000c FFF7FEFF 		bl	gpio_set
 3176              	.LVL252:
 559:src/main.c    **** 	nop(10);
 3177              		.loc 1 559 2 is_stmt 1 view .LVU748
 3178 0010 0A20     		movs	r0, #10
 3179 0012 FFF7FEFF 		bl	nop
 3180              	.LVL253:
 560:src/main.c    **** 	spi_tx8(OP2_IMU_SPI, addr | (1<<7)); // 0 is write 1 is read  
 3181              		.loc 1 560 2 view .LVU749
 3182 0016 114C     		ldr	r4, .L161+4
 3183 0018 45F08001 		orr	r1, r5, #128
 3184 001c 2046     		mov	r0, r4
 3185 001e FFF7FEFF 		bl	spi_tx8
 3186              	.LVL254:
 561:src/main.c    **** 	spi_rx8(OP2_IMU_SPI); 
 3187              		.loc 1 561 2 view .LVU750
 3188 0022 2046     		mov	r0, r4
 3189 0024 FFF7FEFF 		bl	spi_rx8
 3190              	.LVL255:
 562:src/main.c    **** 	spi_tx8(OP2_IMU_SPI, 0xFF); // tx dummy 
 3191              		.loc 1 562 2 view .LVU751
 3192 0028 FF21     		movs	r1, #255
 3193 002a 2046     		mov	r0, r4
 3194 002c FFF7FEFF 		bl	spi_tx8
 3195              	.LVL256:
 563:src/main.c    **** 	int data = spi_rx8(OP2_IMU_SPI); 
 3196              		.loc 1 563 2 view .LVU752
 3197              		.loc 1 563 13 is_stmt 0 view .LVU753
 3198 0030 2046     		mov	r0, r4
 3199 0032 FFF7FEFF 		bl	spi_rx8
 3200              	.LVL257:
 3201 0036 0546     		mov	r5, r0
 3202              	.LVL258:
 564:src/main.c    **** 	spi_block_while_busy(OP2_IMU_SPI);
 3203              		.loc 1 564 2 is_stmt 1 view .LVU754
 3204 0038 2046     		mov	r0, r4
 3205              	.LVL259:
ARM GAS  /tmp/ccY6rBif.s 			page 70


 3206              		.loc 1 564 2 is_stmt 0 view .LVU755
 3207 003a FFF7FEFF 		bl	spi_block_while_busy
 3208              	.LVL260:
 565:src/main.c    **** 	nop(10);
 3209              		.loc 1 565 2 is_stmt 1 view .LVU756
 3210 003e 0A20     		movs	r0, #10
 3211 0040 FFF7FEFF 		bl	nop
 3212              	.LVL261:
 566:src/main.c    **** 	gpio_set(OP2_IMU_SPI_NCS, 1);
 3213              		.loc 1 566 2 view .LVU757
 3214 0044 0122     		movs	r2, #1
 3215 0046 0F21     		movs	r1, #15
 3216 0048 3046     		mov	r0, r6
 3217 004a FFF7FEFF 		bl	gpio_set
 3218              	.LVL262:
 567:src/main.c    **** 	nop(10);
 3219              		.loc 1 567 2 view .LVU758
 3220 004e 0A20     		movs	r0, #10
 3221 0050 FFF7FEFF 		bl	nop
 3222              	.LVL263:
 568:src/main.c    **** 	return data; 
 3223              		.loc 1 568 2 view .LVU759
 569:src/main.c    **** }
 3224              		.loc 1 569 1 is_stmt 0 view .LVU760
 3225 0054 2846     		mov	r0, r5
 3226 0056 70BD     		pop	{r4, r5, r6, pc}
 3227              	.LVL264:
 3228              	.L162:
 3229              		.loc 1 569 1 view .LVU761
 3230              		.align	2
 3231              	.L161:
 3232 0058 00180048 		.word	1207965696
 3233 005c 003C0040 		.word	1073757184
 3234              		.cfi_endproc
 3235              	.LFE176:
 3237              		.section	.text.op2_imu_read8x2,"ax",%progbits
 3238              		.align	1
 3239              		.global	op2_imu_read8x2
 3240              		.syntax unified
 3241              		.thumb
 3242              		.thumb_func
 3244              	op2_imu_read8x2:
 3245              	.LVL265:
 3246              	.LFB177:
 570:src/main.c    **** 
 571:src/main.c    **** int16_t op2_imu_read8x2(int addrl) {
 3247              		.loc 1 571 36 is_stmt 1 view -0
 3248              		.cfi_startproc
 3249              		@ args = 0, pretend = 0, frame = 0
 3250              		@ frame_needed = 0, uses_anonymous_args = 0
 3251              		.loc 1 571 36 is_stmt 0 view .LVU763
 3252 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3253              	.LCFI43:
 3254              		.cfi_def_cfa_offset 24
 3255              		.cfi_offset 3, -24
 3256              		.cfi_offset 4, -20
 3257              		.cfi_offset 5, -16
ARM GAS  /tmp/ccY6rBif.s 			page 71


 3258              		.cfi_offset 6, -12
 3259              		.cfi_offset 7, -8
 3260              		.cfi_offset 14, -4
 3261 0002 0546     		mov	r5, r0
 572:src/main.c    **** 	gpio_set(OP2_IMU_SPI_NCS, 0);
 3262              		.loc 1 572 2 is_stmt 1 view .LVU764
 3263 0004 194F     		ldr	r7, .L165
 3264 0006 0022     		movs	r2, #0
 3265 0008 0F21     		movs	r1, #15
 3266 000a 3846     		mov	r0, r7
 3267              	.LVL266:
 3268              		.loc 1 572 2 is_stmt 0 view .LVU765
 3269 000c FFF7FEFF 		bl	gpio_set
 3270              	.LVL267:
 573:src/main.c    **** 	nop(10);
 3271              		.loc 1 573 2 is_stmt 1 view .LVU766
 3272 0010 0A20     		movs	r0, #10
 3273 0012 FFF7FEFF 		bl	nop
 3274              	.LVL268:
 574:src/main.c    **** 	spi_tx8(OP2_IMU_SPI, addrl | (1<<7)); // 0 is write 1 is read  
 3275              		.loc 1 574 2 view .LVU767
 3276 0016 164C     		ldr	r4, .L165+4
 3277 0018 45F08001 		orr	r1, r5, #128
 3278 001c 2046     		mov	r0, r4
 3279 001e FFF7FEFF 		bl	spi_tx8
 3280              	.LVL269:
 575:src/main.c    **** 	spi_rx8(OP2_IMU_SPI); 
 3281              		.loc 1 575 2 view .LVU768
 3282 0022 2046     		mov	r0, r4
 3283 0024 FFF7FEFF 		bl	spi_rx8
 3284              	.LVL270:
 576:src/main.c    **** 	spi_tx8(OP2_IMU_SPI, 0xFF); // tx dummy 
 3285              		.loc 1 576 2 view .LVU769
 3286 0028 FF21     		movs	r1, #255
 3287 002a 2046     		mov	r0, r4
 3288 002c FFF7FEFF 		bl	spi_tx8
 3289              	.LVL271:
 577:src/main.c    **** 	int datal = spi_rx8(OP2_IMU_SPI); 
 3290              		.loc 1 577 2 view .LVU770
 3291              		.loc 1 577 14 is_stmt 0 view .LVU771
 3292 0030 2046     		mov	r0, r4
 3293 0032 FFF7FEFF 		bl	spi_rx8
 3294              	.LVL272:
 3295 0036 0546     		mov	r5, r0
 3296              	.LVL273:
 578:src/main.c    **** 	spi_tx8(OP2_IMU_SPI, 0xFF); // tx dummy 
 3297              		.loc 1 578 2 is_stmt 1 view .LVU772
 3298 0038 FF21     		movs	r1, #255
 3299 003a 2046     		mov	r0, r4
 3300 003c FFF7FEFF 		bl	spi_tx8
 3301              	.LVL274:
 579:src/main.c    **** 	int datah = spi_rx8(OP2_IMU_SPI); 
 3302              		.loc 1 579 2 view .LVU773
 3303              		.loc 1 579 14 is_stmt 0 view .LVU774
 3304 0040 2046     		mov	r0, r4
 3305 0042 FFF7FEFF 		bl	spi_rx8
 3306              	.LVL275:
ARM GAS  /tmp/ccY6rBif.s 			page 72


 3307 0046 0646     		mov	r6, r0
 3308              	.LVL276:
 580:src/main.c    **** 	spi_block_while_busy(OP2_IMU_SPI);
 3309              		.loc 1 580 2 is_stmt 1 view .LVU775
 3310 0048 2046     		mov	r0, r4
 3311              	.LVL277:
 3312              		.loc 1 580 2 is_stmt 0 view .LVU776
 3313 004a FFF7FEFF 		bl	spi_block_while_busy
 3314              	.LVL278:
 581:src/main.c    **** 	nop(10);
 3315              		.loc 1 581 2 is_stmt 1 view .LVU777
 3316 004e 0A20     		movs	r0, #10
 3317 0050 FFF7FEFF 		bl	nop
 3318              	.LVL279:
 582:src/main.c    **** 	gpio_set(OP2_IMU_SPI_NCS, 1);
 3319              		.loc 1 582 2 view .LVU778
 3320 0054 0122     		movs	r2, #1
 3321 0056 0F21     		movs	r1, #15
 3322 0058 3846     		mov	r0, r7
 3323 005a FFF7FEFF 		bl	gpio_set
 3324              	.LVL280:
 583:src/main.c    **** 	nop(10);
 3325              		.loc 1 583 2 view .LVU779
 3326 005e 0A20     		movs	r0, #10
 3327 0060 FFF7FEFF 		bl	nop
 3328              	.LVL281:
 584:src/main.c    **** 	return (datah << 8) | datal; 
 3329              		.loc 1 584 2 view .LVU780
 3330              		.loc 1 584 22 is_stmt 0 view .LVU781
 3331 0064 45EA0620 		orr	r0, r5, r6, lsl #8
 585:src/main.c    **** }
 3332              		.loc 1 585 1 view .LVU782
 3333 0068 00B2     		sxth	r0, r0
 3334 006a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3335              	.LVL282:
 3336              	.L166:
 3337              		.loc 1 585 1 view .LVU783
 3338              		.align	2
 3339              	.L165:
 3340 006c 00180048 		.word	1207965696
 3341 0070 003C0040 		.word	1073757184
 3342              		.cfi_endproc
 3343              	.LFE177:
 3345              		.section	.text.op2_imu_acel_ctrl,"ax",%progbits
 3346              		.align	1
 3347              		.global	op2_imu_acel_ctrl
 3348              		.syntax unified
 3349              		.thumb
 3350              		.thumb_func
 3352              	op2_imu_acel_ctrl:
 3353              	.LVL283:
 3354              	.LFB178:
 586:src/main.c    **** 
 587:src/main.c    **** void op2_imu_acel_ctrl(int acel_rate, int acel_scale, int digital_filter_on) {
 3355              		.loc 1 587 78 is_stmt 1 view -0
 3356              		.cfi_startproc
 3357              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccY6rBif.s 			page 73


 3358              		@ frame_needed = 0, uses_anonymous_args = 0
 3359              		.loc 1 587 78 is_stmt 0 view .LVU785
 3360 0000 08B5     		push	{r3, lr}
 3361              	.LCFI44:
 3362              		.cfi_def_cfa_offset 8
 3363              		.cfi_offset 3, -8
 3364              		.cfi_offset 14, -4
 588:src/main.c    **** 	acel_rate &= 0xFF;
 3365              		.loc 1 588 2 is_stmt 1 view .LVU786
 3366              	.LVL284:
 589:src/main.c    **** 	acel_scale &= 0xF;
 3367              		.loc 1 589 2 view .LVU787
 590:src/main.c    **** 	digital_filter_on &= 1;
 3368              		.loc 1 590 2 view .LVU788
 591:src/main.c    **** 	int data = acel_rate << 4 | acel_scale << 2 | digital_filter_on << 1;
 3369              		.loc 1 591 2 view .LVU789
 3370              		.loc 1 591 23 is_stmt 0 view .LVU790
 3371 0002 0001     		lsls	r0, r0, #4
 3372              	.LVL285:
 3373              		.loc 1 591 23 view .LVU791
 3374 0004 00F47F60 		and	r0, r0, #4080
 3375              		.loc 1 591 41 view .LVU792
 3376 0008 8900     		lsls	r1, r1, #2
 3377              	.LVL286:
 3378              		.loc 1 591 41 view .LVU793
 3379 000a 01F03C01 		and	r1, r1, #60
 3380              		.loc 1 591 28 view .LVU794
 3381 000e 0843     		orrs	r0, r0, r1
 3382              		.loc 1 591 66 view .LVU795
 3383 0010 5200     		lsls	r2, r2, #1
 3384              	.LVL287:
 3385              		.loc 1 591 66 view .LVU796
 3386 0012 02F00201 		and	r1, r2, #2
 3387              	.LVL288:
 592:src/main.c    **** 	op2_imu_write8(0x10, data);
 3388              		.loc 1 592 2 is_stmt 1 view .LVU797
 3389 0016 0143     		orrs	r1, r1, r0
 3390              	.LVL289:
 3391              		.loc 1 592 2 is_stmt 0 view .LVU798
 3392 0018 1020     		movs	r0, #16
 3393 001a FFF7FEFF 		bl	op2_imu_write8
 3394              	.LVL290:
 593:src/main.c    **** }
 3395              		.loc 1 593 1 view .LVU799
 3396 001e 08BD     		pop	{r3, pc}
 3397              		.cfi_endproc
 3398              	.LFE178:
 3400              		.section	.text.op2_imu_gyro_ctrl,"ax",%progbits
 3401              		.align	1
 3402              		.global	op2_imu_gyro_ctrl
 3403              		.syntax unified
 3404              		.thumb
 3405              		.thumb_func
 3407              	op2_imu_gyro_ctrl:
 3408              	.LVL291:
 3409              	.LFB179:
 594:src/main.c    **** 
ARM GAS  /tmp/ccY6rBif.s 			page 74


 595:src/main.c    **** void op2_imu_gyro_ctrl(int gyro_rate, int gyro_scale) {
 3410              		.loc 1 595 55 is_stmt 1 view -0
 3411              		.cfi_startproc
 3412              		@ args = 0, pretend = 0, frame = 0
 3413              		@ frame_needed = 0, uses_anonymous_args = 0
 3414              		.loc 1 595 55 is_stmt 0 view .LVU801
 3415 0000 08B5     		push	{r3, lr}
 3416              	.LCFI45:
 3417              		.cfi_def_cfa_offset 8
 3418              		.cfi_offset 3, -8
 3419              		.cfi_offset 14, -4
 596:src/main.c    **** 	gyro_rate &= 0xFF;
 3420              		.loc 1 596 2 is_stmt 1 view .LVU802
 3421              	.LVL292:
 597:src/main.c    **** 	gyro_scale &= 0xFF; 
 3422              		.loc 1 597 2 view .LVU803
 3423              		.loc 1 597 13 is_stmt 0 view .LVU804
 3424 0002 C9B2     		uxtb	r1, r1
 3425              	.LVL293:
 598:src/main.c    **** 	int data = gyro_rate << 4 | gyro_scale;
 3426              		.loc 1 598 2 is_stmt 1 view .LVU805
 3427              		.loc 1 598 23 is_stmt 0 view .LVU806
 3428 0004 0001     		lsls	r0, r0, #4
 3429              	.LVL294:
 3430              		.loc 1 598 23 view .LVU807
 3431 0006 00F47F60 		and	r0, r0, #4080
 3432              	.LVL295:
 599:src/main.c    **** 	op2_imu_write8(0x11, data);
 3433              		.loc 1 599 2 is_stmt 1 view .LVU808
 3434 000a 0143     		orrs	r1, r1, r0
 3435              	.LVL296:
 3436              		.loc 1 599 2 is_stmt 0 view .LVU809
 3437 000c 1120     		movs	r0, #17
 3438 000e FFF7FEFF 		bl	op2_imu_write8
 3439              	.LVL297:
 600:src/main.c    **** }
 3440              		.loc 1 600 1 view .LVU810
 3441 0012 08BD     		pop	{r3, pc}
 3442              		.cfi_endproc
 3443              	.LFE179:
 3445              		.section	.text.op2_imu_init,"ax",%progbits
 3446              		.align	1
 3447              		.global	op2_imu_init
 3448              		.syntax unified
 3449              		.thumb
 3450              		.thumb_func
 3452              	op2_imu_init:
 3453              	.LVL298:
 3454              	.LFB180:
 601:src/main.c    **** 
 602:src/main.c    **** void op2_imu_init(int acel_rate, int acel_scale, int gyro_rate, int gyro_scale) {
 3455              		.loc 1 602 81 is_stmt 1 view -0
 3456              		.cfi_startproc
 3457              		@ args = 0, pretend = 0, frame = 0
 3458              		@ frame_needed = 0, uses_anonymous_args = 0
 3459              		.loc 1 602 81 is_stmt 0 view .LVU812
 3460 0000 F0B5     		push	{r4, r5, r6, r7, lr}
ARM GAS  /tmp/ccY6rBif.s 			page 75


 3461              	.LCFI46:
 3462              		.cfi_def_cfa_offset 20
 3463              		.cfi_offset 4, -20
 3464              		.cfi_offset 5, -16
 3465              		.cfi_offset 6, -12
 3466              		.cfi_offset 7, -8
 3467              		.cfi_offset 14, -4
 3468 0002 89B0     		sub	sp, sp, #36
 3469              	.LCFI47:
 3470              		.cfi_def_cfa_offset 56
 3471 0004 0646     		mov	r6, r0
 3472 0006 0F46     		mov	r7, r1
 3473 0008 1446     		mov	r4, r2
 3474 000a 1D46     		mov	r5, r3
 603:src/main.c    **** 	init_spi_master(OP2_IMU_SPI, OP2_IMU_SPI_PINS);
 3475              		.loc 1 603 2 is_stmt 1 view .LVU813
 3476 000c 1249     		ldr	r1, .L173
 3477              	.LVL299:
 3478              		.loc 1 603 2 is_stmt 0 view .LVU814
 3479 000e 0F23     		movs	r3, #15
 3480              	.LVL300:
 3481              		.loc 1 603 2 view .LVU815
 3482 0010 0793     		str	r3, [sp, #28]
 3483 0012 124B     		ldr	r3, .L173+4
 3484 0014 0693     		str	r3, [sp, #24]
 3485 0016 0623     		movs	r3, #6
 3486 0018 0593     		str	r3, [sp, #20]
 3487 001a 0322     		movs	r2, #3
 3488              	.LVL301:
 3489              		.loc 1 603 2 view .LVU816
 3490 001c 0492     		str	r2, [sp, #16]
 3491 001e 0391     		str	r1, [sp, #12]
 3492 0020 0293     		str	r3, [sp, #8]
 3493 0022 0422     		movs	r2, #4
 3494 0024 0192     		str	r2, [sp, #4]
 3495 0026 0091     		str	r1, [sp]
 3496 0028 0522     		movs	r2, #5
 3497 002a 0D48     		ldr	r0, .L173+8
 3498              	.LVL302:
 3499              		.loc 1 603 2 view .LVU817
 3500 002c FFF7FEFF 		bl	init_spi_master
 3501              	.LVL303:
 604:src/main.c    **** 	op2_imu_write8(0x12, 0x1); // soft reset imu  
 3502              		.loc 1 604 2 is_stmt 1 view .LVU818
 3503 0030 0121     		movs	r1, #1
 3504 0032 1220     		movs	r0, #18
 3505 0034 FFF7FEFF 		bl	op2_imu_write8
 3506              	.LVL304:
 605:src/main.c    **** 	nop(500); 
 3507              		.loc 1 605 2 view .LVU819
 3508 0038 4FF4FA70 		mov	r0, #500
 3509 003c FFF7FEFF 		bl	nop
 3510              	.LVL305:
 606:src/main.c    **** 	op2_imu_acel_ctrl(acel_rate, acel_scale, 0);
 3511              		.loc 1 606 2 view .LVU820
 3512 0040 0022     		movs	r2, #0
 3513 0042 3946     		mov	r1, r7
ARM GAS  /tmp/ccY6rBif.s 			page 76


 3514 0044 3046     		mov	r0, r6
 3515 0046 FFF7FEFF 		bl	op2_imu_acel_ctrl
 3516              	.LVL306:
 607:src/main.c    **** 	op2_imu_gyro_ctrl(gyro_rate, gyro_scale);
 3517              		.loc 1 607 2 view .LVU821
 3518 004a 2946     		mov	r1, r5
 3519 004c 2046     		mov	r0, r4
 3520 004e FFF7FEFF 		bl	op2_imu_gyro_ctrl
 3521              	.LVL307:
 608:src/main.c    **** }
 3522              		.loc 1 608 1 is_stmt 0 view .LVU822
 3523 0052 09B0     		add	sp, sp, #36
 3524              	.LCFI48:
 3525              		.cfi_def_cfa_offset 20
 3526              		@ sp needed
 3527 0054 F0BD     		pop	{r4, r5, r6, r7, pc}
 3528              	.LVL308:
 3529              	.L174:
 3530              		.loc 1 608 1 view .LVU823
 3531 0056 00BF     		.align	2
 3532              	.L173:
 3533 0058 00040048 		.word	1207960576
 3534 005c 00180048 		.word	1207965696
 3535 0060 003C0040 		.word	1073757184
 3536              		.cfi_endproc
 3537              	.LFE180:
 3539              		.section	.text.op2_imu_read_whoami,"ax",%progbits
 3540              		.align	1
 3541              		.global	op2_imu_read_whoami
 3542              		.syntax unified
 3543              		.thumb
 3544              		.thumb_func
 3546              	op2_imu_read_whoami:
 3547              	.LFB181:
 609:src/main.c    **** 
 610:src/main.c    **** int16_t op2_imu_read_whoami() { 
 3548              		.loc 1 610 31 is_stmt 1 view -0
 3549              		.cfi_startproc
 3550              		@ args = 0, pretend = 0, frame = 0
 3551              		@ frame_needed = 0, uses_anonymous_args = 0
 3552 0000 08B5     		push	{r3, lr}
 3553              	.LCFI49:
 3554              		.cfi_def_cfa_offset 8
 3555              		.cfi_offset 3, -8
 3556              		.cfi_offset 14, -4
 611:src/main.c    **** 	return op2_imu_read8(0x0F);
 3557              		.loc 1 611 2 view .LVU825
 3558              		.loc 1 611 9 is_stmt 0 view .LVU826
 3559 0002 0F20     		movs	r0, #15
 3560 0004 FFF7FEFF 		bl	op2_imu_read8
 3561              	.LVL309:
 612:src/main.c    **** } 
 3562              		.loc 1 612 1 view .LVU827
 3563 0008 00B2     		sxth	r0, r0
 3564 000a 08BD     		pop	{r3, pc}
 3565              		.cfi_endproc
 3566              	.LFE181:
ARM GAS  /tmp/ccY6rBif.s 			page 77


 3568              		.section	.text.op2_imu_read_acel_x,"ax",%progbits
 3569              		.align	1
 3570              		.global	op2_imu_read_acel_x
 3571              		.syntax unified
 3572              		.thumb
 3573              		.thumb_func
 3575              	op2_imu_read_acel_x:
 3576              	.LFB182:
 613:src/main.c    **** 
 614:src/main.c    **** int16_t op2_imu_read_acel_x() { 
 3577              		.loc 1 614 31 is_stmt 1 view -0
 3578              		.cfi_startproc
 3579              		@ args = 0, pretend = 0, frame = 0
 3580              		@ frame_needed = 0, uses_anonymous_args = 0
 3581 0000 08B5     		push	{r3, lr}
 3582              	.LCFI50:
 3583              		.cfi_def_cfa_offset 8
 3584              		.cfi_offset 3, -8
 3585              		.cfi_offset 14, -4
 615:src/main.c    **** 	return op2_imu_read8x2(0x28);
 3586              		.loc 1 615 2 view .LVU829
 3587              		.loc 1 615 9 is_stmt 0 view .LVU830
 3588 0002 2820     		movs	r0, #40
 3589 0004 FFF7FEFF 		bl	op2_imu_read8x2
 3590              	.LVL310:
 616:src/main.c    **** } 
 3591              		.loc 1 616 1 view .LVU831
 3592 0008 08BD     		pop	{r3, pc}
 3593              		.cfi_endproc
 3594              	.LFE182:
 3596              		.section	.text.op2_imu_read_acel_y,"ax",%progbits
 3597              		.align	1
 3598              		.global	op2_imu_read_acel_y
 3599              		.syntax unified
 3600              		.thumb
 3601              		.thumb_func
 3603              	op2_imu_read_acel_y:
 3604              	.LFB183:
 617:src/main.c    **** 
 618:src/main.c    **** int16_t op2_imu_read_acel_y() { 
 3605              		.loc 1 618 31 is_stmt 1 view -0
 3606              		.cfi_startproc
 3607              		@ args = 0, pretend = 0, frame = 0
 3608              		@ frame_needed = 0, uses_anonymous_args = 0
 3609 0000 08B5     		push	{r3, lr}
 3610              	.LCFI51:
 3611              		.cfi_def_cfa_offset 8
 3612              		.cfi_offset 3, -8
 3613              		.cfi_offset 14, -4
 619:src/main.c    **** 	return op2_imu_read8x2(0x2A);
 3614              		.loc 1 619 2 view .LVU833
 3615              		.loc 1 619 9 is_stmt 0 view .LVU834
 3616 0002 2A20     		movs	r0, #42
 3617 0004 FFF7FEFF 		bl	op2_imu_read8x2
 3618              	.LVL311:
 620:src/main.c    **** } 
 3619              		.loc 1 620 1 view .LVU835
ARM GAS  /tmp/ccY6rBif.s 			page 78


 3620 0008 08BD     		pop	{r3, pc}
 3621              		.cfi_endproc
 3622              	.LFE183:
 3624              		.section	.text.op2_imu_read_acel_z,"ax",%progbits
 3625              		.align	1
 3626              		.global	op2_imu_read_acel_z
 3627              		.syntax unified
 3628              		.thumb
 3629              		.thumb_func
 3631              	op2_imu_read_acel_z:
 3632              	.LFB184:
 621:src/main.c    **** 
 622:src/main.c    **** int16_t op2_imu_read_acel_z() { 
 3633              		.loc 1 622 31 is_stmt 1 view -0
 3634              		.cfi_startproc
 3635              		@ args = 0, pretend = 0, frame = 0
 3636              		@ frame_needed = 0, uses_anonymous_args = 0
 3637 0000 08B5     		push	{r3, lr}
 3638              	.LCFI52:
 3639              		.cfi_def_cfa_offset 8
 3640              		.cfi_offset 3, -8
 3641              		.cfi_offset 14, -4
 623:src/main.c    **** 	return op2_imu_read8x2(0x2C);
 3642              		.loc 1 623 2 view .LVU837
 3643              		.loc 1 623 9 is_stmt 0 view .LVU838
 3644 0002 2C20     		movs	r0, #44
 3645 0004 FFF7FEFF 		bl	op2_imu_read8x2
 3646              	.LVL312:
 624:src/main.c    **** } 
 3647              		.loc 1 624 1 view .LVU839
 3648 0008 08BD     		pop	{r3, pc}
 3649              		.cfi_endproc
 3650              	.LFE184:
 3652              		.section	.text.op2_imu_read_gyro_x,"ax",%progbits
 3653              		.align	1
 3654              		.global	op2_imu_read_gyro_x
 3655              		.syntax unified
 3656              		.thumb
 3657              		.thumb_func
 3659              	op2_imu_read_gyro_x:
 3660              	.LFB185:
 625:src/main.c    **** 
 626:src/main.c    **** int16_t op2_imu_read_gyro_x() {
 3661              		.loc 1 626 31 is_stmt 1 view -0
 3662              		.cfi_startproc
 3663              		@ args = 0, pretend = 0, frame = 0
 3664              		@ frame_needed = 0, uses_anonymous_args = 0
 3665 0000 08B5     		push	{r3, lr}
 3666              	.LCFI53:
 3667              		.cfi_def_cfa_offset 8
 3668              		.cfi_offset 3, -8
 3669              		.cfi_offset 14, -4
 627:src/main.c    **** 	return op2_imu_read8x2(0x22);
 3670              		.loc 1 627 2 view .LVU841
 3671              		.loc 1 627 9 is_stmt 0 view .LVU842
 3672 0002 2220     		movs	r0, #34
 3673 0004 FFF7FEFF 		bl	op2_imu_read8x2
ARM GAS  /tmp/ccY6rBif.s 			page 79


 3674              	.LVL313:
 628:src/main.c    **** }
 3675              		.loc 1 628 1 view .LVU843
 3676 0008 08BD     		pop	{r3, pc}
 3677              		.cfi_endproc
 3678              	.LFE185:
 3680              		.section	.text.op2_imu_read_gyro_y,"ax",%progbits
 3681              		.align	1
 3682              		.global	op2_imu_read_gyro_y
 3683              		.syntax unified
 3684              		.thumb
 3685              		.thumb_func
 3687              	op2_imu_read_gyro_y:
 3688              	.LFB186:
 629:src/main.c    **** 
 630:src/main.c    **** int16_t op2_imu_read_gyro_y() {
 3689              		.loc 1 630 31 is_stmt 1 view -0
 3690              		.cfi_startproc
 3691              		@ args = 0, pretend = 0, frame = 0
 3692              		@ frame_needed = 0, uses_anonymous_args = 0
 3693 0000 08B5     		push	{r3, lr}
 3694              	.LCFI54:
 3695              		.cfi_def_cfa_offset 8
 3696              		.cfi_offset 3, -8
 3697              		.cfi_offset 14, -4
 631:src/main.c    **** 	return op2_imu_read8x2(0x24);
 3698              		.loc 1 631 2 view .LVU845
 3699              		.loc 1 631 9 is_stmt 0 view .LVU846
 3700 0002 2420     		movs	r0, #36
 3701 0004 FFF7FEFF 		bl	op2_imu_read8x2
 3702              	.LVL314:
 632:src/main.c    **** }
 3703              		.loc 1 632 1 view .LVU847
 3704 0008 08BD     		pop	{r3, pc}
 3705              		.cfi_endproc
 3706              	.LFE186:
 3708              		.section	.text.op2_imu_read_gyro_z,"ax",%progbits
 3709              		.align	1
 3710              		.global	op2_imu_read_gyro_z
 3711              		.syntax unified
 3712              		.thumb
 3713              		.thumb_func
 3715              	op2_imu_read_gyro_z:
 3716              	.LFB187:
 633:src/main.c    **** 
 634:src/main.c    **** int16_t op2_imu_read_gyro_z() {
 3717              		.loc 1 634 31 is_stmt 1 view -0
 3718              		.cfi_startproc
 3719              		@ args = 0, pretend = 0, frame = 0
 3720              		@ frame_needed = 0, uses_anonymous_args = 0
 3721 0000 08B5     		push	{r3, lr}
 3722              	.LCFI55:
 3723              		.cfi_def_cfa_offset 8
 3724              		.cfi_offset 3, -8
 3725              		.cfi_offset 14, -4
 635:src/main.c    **** 	return op2_imu_read8x2(0x26);
 3726              		.loc 1 635 2 view .LVU849
ARM GAS  /tmp/ccY6rBif.s 			page 80


 3727              		.loc 1 635 9 is_stmt 0 view .LVU850
 3728 0002 2620     		movs	r0, #38
 3729 0004 FFF7FEFF 		bl	op2_imu_read8x2
 3730              	.LVL315:
 636:src/main.c    **** }
 3731              		.loc 1 636 1 view .LVU851
 3732 0008 08BD     		pop	{r3, pc}
 3733              		.cfi_endproc
 3734              	.LFE187:
 3736              		.section	.text.op2_imu_read_temp,"ax",%progbits
 3737              		.align	1
 3738              		.global	op2_imu_read_temp
 3739              		.syntax unified
 3740              		.thumb
 3741              		.thumb_func
 3743              	op2_imu_read_temp:
 3744              	.LFB188:
 637:src/main.c    **** 
 638:src/main.c    **** int16_t op2_imu_read_temp() {
 3745              		.loc 1 638 29 is_stmt 1 view -0
 3746              		.cfi_startproc
 3747              		@ args = 0, pretend = 0, frame = 0
 3748              		@ frame_needed = 0, uses_anonymous_args = 0
 3749 0000 08B5     		push	{r3, lr}
 3750              	.LCFI56:
 3751              		.cfi_def_cfa_offset 8
 3752              		.cfi_offset 3, -8
 3753              		.cfi_offset 14, -4
 639:src/main.c    **** 	return op2_imu_read8x2(0x20);
 3754              		.loc 1 639 2 view .LVU853
 3755              		.loc 1 639 9 is_stmt 0 view .LVU854
 3756 0002 2020     		movs	r0, #32
 3757 0004 FFF7FEFF 		bl	op2_imu_read8x2
 3758              	.LVL316:
 640:src/main.c    **** }
 3759              		.loc 1 640 1 view .LVU855
 3760 0008 08BD     		pop	{r3, pc}
 3761              		.cfi_endproc
 3762              	.LFE188:
 3764              		.section	.text.op2_mag_ctrl,"ax",%progbits
 3765              		.align	1
 3766              		.global	op2_mag_ctrl
 3767              		.syntax unified
 3768              		.thumb
 3769              		.thumb_func
 3771              	op2_mag_ctrl:
 3772              	.LVL317:
 3773              	.LFB189:
 641:src/main.c    **** 
 642:src/main.c    **** void op2_mag_ctrl(int rate, int scale, int oversample) {
 3774              		.loc 1 642 56 is_stmt 1 view -0
 3775              		.cfi_startproc
 3776              		@ args = 0, pretend = 0, frame = 0
 3777              		@ frame_needed = 0, uses_anonymous_args = 0
 3778              		.loc 1 642 56 is_stmt 0 view .LVU857
 3779 0000 00B5     		push	{lr}
 3780              	.LCFI57:
ARM GAS  /tmp/ccY6rBif.s 			page 81


 3781              		.cfi_def_cfa_offset 4
 3782              		.cfi_offset 14, -4
 3783 0002 85B0     		sub	sp, sp, #20
 3784              	.LCFI58:
 3785              		.cfi_def_cfa_offset 24
 643:src/main.c    **** 	if (rate) {
 3786              		.loc 1 643 2 is_stmt 1 view .LVU858
 3787              		.loc 1 643 5 is_stmt 0 view .LVU859
 3788 0004 A0B1     		cbz	r0, .L192
 644:src/main.c    **** 		softi2c_write_reg(OP2_MAG_I2C, MAG_ADDR, 0x09, oversample << 6 | scale << 4 | (rate-1) << 2 | 1);
 3789              		.loc 1 644 3 is_stmt 1 view .LVU860
 3790              		.loc 1 644 74 is_stmt 0 view .LVU861
 3791 0006 0901     		lsls	r1, r1, #4
 3792              	.LVL318:
 3793              		.loc 1 644 66 view .LVU862
 3794 0008 41EA8211 		orr	r1, r1, r2, lsl #6
 3795              		.loc 1 644 86 view .LVU863
 3796 000c 431E     		subs	r3, r0, #1
 3797              		.loc 1 644 79 view .LVU864
 3798 000e 41EA8301 		orr	r1, r1, r3, lsl #2
 3799              		.loc 1 644 3 view .LVU865
 3800 0012 0D48     		ldr	r0, .L195
 3801              	.LVL319:
 3802              		.loc 1 644 3 view .LVU866
 3803 0014 41F00101 		orr	r1, r1, #1
 3804 0018 0291     		str	r1, [sp, #8]
 3805 001a 0923     		movs	r3, #9
 3806              	.LVL320:
 3807              		.loc 1 644 3 view .LVU867
 3808 001c 0193     		str	r3, [sp, #4]
 3809 001e 0D22     		movs	r2, #13
 3810              	.LVL321:
 3811              		.loc 1 644 3 view .LVU868
 3812 0020 0092     		str	r2, [sp]
 3813 0022 0246     		mov	r2, r0
 3814 0024 0821     		movs	r1, #8
 3815 0026 FFF7FEFF 		bl	softi2c_write_reg
 3816              	.LVL322:
 3817              	.L191:
 645:src/main.c    **** 	} else {
 646:src/main.c    **** 		softi2c_write_reg(OP2_MAG_I2C, MAG_ADDR, 0x09, 0);
 647:src/main.c    **** 	}
 648:src/main.c    **** }
 3818              		.loc 1 648 1 view .LVU869
 3819 002a 05B0     		add	sp, sp, #20
 3820              	.LCFI59:
 3821              		.cfi_remember_state
 3822              		.cfi_def_cfa_offset 4
 3823              		@ sp needed
 3824 002c 5DF804FB 		ldr	pc, [sp], #4
 3825              	.LVL323:
 3826              	.L192:
 3827              	.LCFI60:
 3828              		.cfi_restore_state
 646:src/main.c    **** 	}
 3829              		.loc 1 646 3 is_stmt 1 view .LVU870
 3830 0030 0548     		ldr	r0, .L195
ARM GAS  /tmp/ccY6rBif.s 			page 82


 3831              	.LVL324:
 646:src/main.c    **** 	}
 3832              		.loc 1 646 3 is_stmt 0 view .LVU871
 3833 0032 0023     		movs	r3, #0
 3834 0034 0293     		str	r3, [sp, #8]
 3835 0036 0923     		movs	r3, #9
 3836 0038 0193     		str	r3, [sp, #4]
 3837 003a 0D22     		movs	r2, #13
 3838              	.LVL325:
 646:src/main.c    **** 	}
 3839              		.loc 1 646 3 view .LVU872
 3840 003c 0092     		str	r2, [sp]
 3841 003e 0246     		mov	r2, r0
 3842 0040 0821     		movs	r1, #8
 3843              	.LVL326:
 646:src/main.c    **** 	}
 3844              		.loc 1 646 3 view .LVU873
 3845 0042 FFF7FEFF 		bl	softi2c_write_reg
 3846              	.LVL327:
 3847              		.loc 1 648 1 view .LVU874
 3848 0046 F0E7     		b	.L191
 3849              	.L196:
 3850              		.align	2
 3851              	.L195:
 3852 0048 00040048 		.word	1207960576
 3853              		.cfi_endproc
 3854              	.LFE189:
 3856              		.section	.text.op2_mag_init,"ax",%progbits
 3857              		.align	1
 3858              		.global	op2_mag_init
 3859              		.syntax unified
 3860              		.thumb
 3861              		.thumb_func
 3863              	op2_mag_init:
 3864              	.LVL328:
 3865              	.LFB190:
 649:src/main.c    **** 
 650:src/main.c    **** void op2_mag_init(int rate, int scale, int oversample) {
 3866              		.loc 1 650 56 is_stmt 1 view -0
 3867              		.cfi_startproc
 3868              		@ args = 0, pretend = 0, frame = 0
 3869              		@ frame_needed = 0, uses_anonymous_args = 0
 3870              		.loc 1 650 56 is_stmt 0 view .LVU876
 3871 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3872              	.LCFI61:
 3873              		.cfi_def_cfa_offset 28
 3874              		.cfi_offset 4, -28
 3875              		.cfi_offset 5, -24
 3876              		.cfi_offset 6, -20
 3877              		.cfi_offset 7, -16
 3878              		.cfi_offset 8, -12
 3879              		.cfi_offset 9, -8
 3880              		.cfi_offset 14, -4
 3881 0004 85B0     		sub	sp, sp, #20
 3882              	.LCFI62:
 3883              		.cfi_def_cfa_offset 48
 3884 0006 0546     		mov	r5, r0
ARM GAS  /tmp/ccY6rBif.s 			page 83


 3885 0008 0E46     		mov	r6, r1
 3886 000a 1746     		mov	r7, r2
 651:src/main.c    **** 	init_softi2c(OP2_MAG_I2C);
 3887              		.loc 1 651 2 is_stmt 1 view .LVU877
 3888 000c 1E4C     		ldr	r4, .L199
 3889 000e 0923     		movs	r3, #9
 3890 0010 2246     		mov	r2, r4
 3891              	.LVL329:
 3892              		.loc 1 651 2 is_stmt 0 view .LVU878
 3893 0012 0821     		movs	r1, #8
 3894              	.LVL330:
 3895              		.loc 1 651 2 view .LVU879
 3896 0014 2046     		mov	r0, r4
 3897              	.LVL331:
 3898              		.loc 1 651 2 view .LVU880
 3899 0016 FFF7FEFF 		bl	init_softi2c
 3900              	.LVL332:
 652:src/main.c    **** 	softi2c_write_reg(OP2_MAG_I2C, MAG_ADDR, 0x0A, 0x80); // soft reset 
 3901              		.loc 1 652 2 is_stmt 1 view .LVU881
 3902 001a 8023     		movs	r3, #128
 3903 001c 0293     		str	r3, [sp, #8]
 3904 001e 4FF00A09 		mov	r9, #10
 3905 0022 CDF80490 		str	r9, [sp, #4]
 3906 0026 4FF00D08 		mov	r8, #13
 3907 002a CDF80080 		str	r8, [sp]
 3908 002e 0923     		movs	r3, #9
 3909 0030 2246     		mov	r2, r4
 3910 0032 0821     		movs	r1, #8
 3911 0034 2046     		mov	r0, r4
 3912 0036 FFF7FEFF 		bl	softi2c_write_reg
 3913              	.LVL333:
 653:src/main.c    **** 	nop(50); 
 3914              		.loc 1 653 2 view .LVU882
 3915 003a 3220     		movs	r0, #50
 3916 003c FFF7FEFF 		bl	nop
 3917              	.LVL334:
 654:src/main.c    **** 	softi2c_write_reg(OP2_MAG_I2C, MAG_ADDR, 0x0A, 0x00); 
 3918              		.loc 1 654 2 view .LVU883
 3919 0040 0023     		movs	r3, #0
 3920 0042 0293     		str	r3, [sp, #8]
 3921 0044 CDF80490 		str	r9, [sp, #4]
 3922 0048 CDF80080 		str	r8, [sp]
 3923 004c 0923     		movs	r3, #9
 3924 004e 2246     		mov	r2, r4
 3925 0050 0821     		movs	r1, #8
 3926 0052 2046     		mov	r0, r4
 3927 0054 FFF7FEFF 		bl	softi2c_write_reg
 3928              	.LVL335:
 655:src/main.c    **** 	softi2c_write_reg(OP2_MAG_I2C, MAG_ADDR, 0x0B, 1);
 3929              		.loc 1 655 2 view .LVU884
 3930 0058 0123     		movs	r3, #1
 3931 005a 0293     		str	r3, [sp, #8]
 3932 005c 0B23     		movs	r3, #11
 3933 005e 0193     		str	r3, [sp, #4]
 3934 0060 CDF80080 		str	r8, [sp]
 3935 0064 0923     		movs	r3, #9
 3936 0066 2246     		mov	r2, r4
ARM GAS  /tmp/ccY6rBif.s 			page 84


 3937 0068 0821     		movs	r1, #8
 3938 006a 2046     		mov	r0, r4
 3939 006c FFF7FEFF 		bl	softi2c_write_reg
 3940              	.LVL336:
 656:src/main.c    **** 	nop(50); 
 3941              		.loc 1 656 2 view .LVU885
 3942 0070 3220     		movs	r0, #50
 3943 0072 FFF7FEFF 		bl	nop
 3944              	.LVL337:
 657:src/main.c    **** 	op2_mag_ctrl(rate, scale, oversample);
 3945              		.loc 1 657 2 view .LVU886
 3946 0076 3A46     		mov	r2, r7
 3947 0078 3146     		mov	r1, r6
 3948 007a 2846     		mov	r0, r5
 3949 007c FFF7FEFF 		bl	op2_mag_ctrl
 3950              	.LVL338:
 658:src/main.c    **** }
 3951              		.loc 1 658 1 is_stmt 0 view .LVU887
 3952 0080 05B0     		add	sp, sp, #20
 3953              	.LCFI63:
 3954              		.cfi_def_cfa_offset 28
 3955              		@ sp needed
 3956 0082 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3957              	.LVL339:
 3958              	.L200:
 3959              		.loc 1 658 1 view .LVU888
 3960 0086 00BF     		.align	2
 3961              	.L199:
 3962 0088 00040048 		.word	1207960576
 3963              		.cfi_endproc
 3964              	.LFE190:
 3966              		.section	.text.op2_mag_read_x,"ax",%progbits
 3967              		.align	1
 3968              		.global	op2_mag_read_x
 3969              		.syntax unified
 3970              		.thumb
 3971              		.thumb_func
 3973              	op2_mag_read_x:
 3974              	.LFB191:
 659:src/main.c    **** 
 660:src/main.c    **** int16_t op2_mag_read_x() {
 3975              		.loc 1 660 26 is_stmt 1 view -0
 3976              		.cfi_startproc
 3977              		@ args = 0, pretend = 0, frame = 0
 3978              		@ frame_needed = 0, uses_anonymous_args = 0
 3979 0000 00B5     		push	{lr}
 3980              	.LCFI64:
 3981              		.cfi_def_cfa_offset 4
 3982              		.cfi_offset 14, -4
 3983 0002 85B0     		sub	sp, sp, #20
 3984              	.LCFI65:
 3985              		.cfi_def_cfa_offset 24
 661:src/main.c    **** 	return softi2c_read_reg_hl(OP2_MAG_I2C, MAG_ADDR, 0x01, 0x00);
 3986              		.loc 1 661 2 view .LVU890
 3987              		.loc 1 661 9 is_stmt 0 view .LVU891
 3988 0004 0748     		ldr	r0, .L203
 3989 0006 0023     		movs	r3, #0
ARM GAS  /tmp/ccY6rBif.s 			page 85


 3990 0008 0293     		str	r3, [sp, #8]
 3991 000a 0123     		movs	r3, #1
 3992 000c 0193     		str	r3, [sp, #4]
 3993 000e 0D23     		movs	r3, #13
 3994 0010 0093     		str	r3, [sp]
 3995 0012 0923     		movs	r3, #9
 3996 0014 0246     		mov	r2, r0
 3997 0016 0821     		movs	r1, #8
 3998 0018 FFF7FEFF 		bl	softi2c_read_reg_hl
 3999              	.LVL340:
 662:src/main.c    **** }
 4000              		.loc 1 662 1 view .LVU892
 4001 001c 05B0     		add	sp, sp, #20
 4002              	.LCFI66:
 4003              		.cfi_def_cfa_offset 4
 4004              		@ sp needed
 4005 001e 5DF804FB 		ldr	pc, [sp], #4
 4006              	.L204:
 4007 0022 00BF     		.align	2
 4008              	.L203:
 4009 0024 00040048 		.word	1207960576
 4010              		.cfi_endproc
 4011              	.LFE191:
 4013              		.section	.text.op2_mag_read_y,"ax",%progbits
 4014              		.align	1
 4015              		.global	op2_mag_read_y
 4016              		.syntax unified
 4017              		.thumb
 4018              		.thumb_func
 4020              	op2_mag_read_y:
 4021              	.LFB192:
 663:src/main.c    **** 
 664:src/main.c    **** int16_t op2_mag_read_y() {
 4022              		.loc 1 664 26 is_stmt 1 view -0
 4023              		.cfi_startproc
 4024              		@ args = 0, pretend = 0, frame = 0
 4025              		@ frame_needed = 0, uses_anonymous_args = 0
 4026 0000 00B5     		push	{lr}
 4027              	.LCFI67:
 4028              		.cfi_def_cfa_offset 4
 4029              		.cfi_offset 14, -4
 4030 0002 85B0     		sub	sp, sp, #20
 4031              	.LCFI68:
 4032              		.cfi_def_cfa_offset 24
 665:src/main.c    **** 	return softi2c_read_reg_hl(OP2_MAG_I2C, MAG_ADDR, 0x03, 0x02);
 4033              		.loc 1 665 2 view .LVU894
 4034              		.loc 1 665 9 is_stmt 0 view .LVU895
 4035 0004 0748     		ldr	r0, .L207
 4036 0006 0223     		movs	r3, #2
 4037 0008 0293     		str	r3, [sp, #8]
 4038 000a 0323     		movs	r3, #3
 4039 000c 0193     		str	r3, [sp, #4]
 4040 000e 0D23     		movs	r3, #13
 4041 0010 0093     		str	r3, [sp]
 4042 0012 0923     		movs	r3, #9
 4043 0014 0246     		mov	r2, r0
 4044 0016 0821     		movs	r1, #8
ARM GAS  /tmp/ccY6rBif.s 			page 86


 4045 0018 FFF7FEFF 		bl	softi2c_read_reg_hl
 4046              	.LVL341:
 666:src/main.c    **** }
 4047              		.loc 1 666 1 view .LVU896
 4048 001c 05B0     		add	sp, sp, #20
 4049              	.LCFI69:
 4050              		.cfi_def_cfa_offset 4
 4051              		@ sp needed
 4052 001e 5DF804FB 		ldr	pc, [sp], #4
 4053              	.L208:
 4054 0022 00BF     		.align	2
 4055              	.L207:
 4056 0024 00040048 		.word	1207960576
 4057              		.cfi_endproc
 4058              	.LFE192:
 4060              		.section	.text.op2_mag_read_z,"ax",%progbits
 4061              		.align	1
 4062              		.global	op2_mag_read_z
 4063              		.syntax unified
 4064              		.thumb
 4065              		.thumb_func
 4067              	op2_mag_read_z:
 4068              	.LFB193:
 667:src/main.c    **** 
 668:src/main.c    **** int16_t op2_mag_read_z() {
 4069              		.loc 1 668 26 is_stmt 1 view -0
 4070              		.cfi_startproc
 4071              		@ args = 0, pretend = 0, frame = 0
 4072              		@ frame_needed = 0, uses_anonymous_args = 0
 4073 0000 00B5     		push	{lr}
 4074              	.LCFI70:
 4075              		.cfi_def_cfa_offset 4
 4076              		.cfi_offset 14, -4
 4077 0002 85B0     		sub	sp, sp, #20
 4078              	.LCFI71:
 4079              		.cfi_def_cfa_offset 24
 669:src/main.c    **** 	return softi2c_read_reg_hl(OP2_MAG_I2C, MAG_ADDR, 0x05, 0x04);
 4080              		.loc 1 669 2 view .LVU898
 4081              		.loc 1 669 9 is_stmt 0 view .LVU899
 4082 0004 0748     		ldr	r0, .L211
 4083 0006 0423     		movs	r3, #4
 4084 0008 0293     		str	r3, [sp, #8]
 4085 000a 0523     		movs	r3, #5
 4086 000c 0193     		str	r3, [sp, #4]
 4087 000e 0D23     		movs	r3, #13
 4088 0010 0093     		str	r3, [sp]
 4089 0012 0923     		movs	r3, #9
 4090 0014 0246     		mov	r2, r0
 4091 0016 0821     		movs	r1, #8
 4092 0018 FFF7FEFF 		bl	softi2c_read_reg_hl
 4093              	.LVL342:
 670:src/main.c    **** }
 4094              		.loc 1 670 1 view .LVU900
 4095 001c 05B0     		add	sp, sp, #20
 4096              	.LCFI72:
 4097              		.cfi_def_cfa_offset 4
 4098              		@ sp needed
ARM GAS  /tmp/ccY6rBif.s 			page 87


 4099 001e 5DF804FB 		ldr	pc, [sp], #4
 4100              	.L212:
 4101 0022 00BF     		.align	2
 4102              	.L211:
 4103 0024 00040048 		.word	1207960576
 4104              		.cfi_endproc
 4105              	.LFE193:
 4107              		.section	.text.op2_mag_read_temp,"ax",%progbits
 4108              		.align	1
 4109              		.global	op2_mag_read_temp
 4110              		.syntax unified
 4111              		.thumb
 4112              		.thumb_func
 4114              	op2_mag_read_temp:
 4115              	.LFB194:
 671:src/main.c    **** 
 672:src/main.c    **** int16_t op2_mag_read_temp() {
 4116              		.loc 1 672 29 is_stmt 1 view -0
 4117              		.cfi_startproc
 4118              		@ args = 0, pretend = 0, frame = 0
 4119              		@ frame_needed = 0, uses_anonymous_args = 0
 4120 0000 00B5     		push	{lr}
 4121              	.LCFI73:
 4122              		.cfi_def_cfa_offset 4
 4123              		.cfi_offset 14, -4
 4124 0002 85B0     		sub	sp, sp, #20
 4125              	.LCFI74:
 4126              		.cfi_def_cfa_offset 24
 673:src/main.c    **** 	return softi2c_read_reg_hl(OP2_MAG_I2C, MAG_ADDR, 0x08, 0x07);
 4127              		.loc 1 673 2 view .LVU902
 4128              		.loc 1 673 9 is_stmt 0 view .LVU903
 4129 0004 0648     		ldr	r0, .L215
 4130 0006 0723     		movs	r3, #7
 4131 0008 0293     		str	r3, [sp, #8]
 4132 000a 0821     		movs	r1, #8
 4133 000c 0191     		str	r1, [sp, #4]
 4134 000e 0D23     		movs	r3, #13
 4135 0010 0093     		str	r3, [sp]
 4136 0012 0923     		movs	r3, #9
 4137 0014 0246     		mov	r2, r0
 4138 0016 FFF7FEFF 		bl	softi2c_read_reg_hl
 4139              	.LVL343:
 674:src/main.c    **** }
 4140              		.loc 1 674 1 view .LVU904
 4141 001a 05B0     		add	sp, sp, #20
 4142              	.LCFI75:
 4143              		.cfi_def_cfa_offset 4
 4144              		@ sp needed
 4145 001c 5DF804FB 		ldr	pc, [sp], #4
 4146              	.L216:
 4147              		.align	2
 4148              	.L215:
 4149 0020 00040048 		.word	1207960576
 4150              		.cfi_endproc
 4151              	.LFE194:
 4153              		.section	.text.op2_sci_uart_init,"ax",%progbits
 4154              		.align	1
ARM GAS  /tmp/ccY6rBif.s 			page 88


 4155              		.global	op2_sci_uart_init
 4156              		.syntax unified
 4157              		.thumb
 4158              		.thumb_func
 4160              	op2_sci_uart_init:
 4161              	.LFB195:
 675:src/main.c    **** 
 676:src/main.c    **** void op2_sci_uart_init() {
 4162              		.loc 1 676 26 is_stmt 1 view -0
 4163              		.cfi_startproc
 4164              		@ args = 0, pretend = 0, frame = 0
 4165              		@ frame_needed = 0, uses_anonymous_args = 0
 4166 0000 00B5     		push	{lr}
 4167              	.LCFI76:
 4168              		.cfi_def_cfa_offset 4
 4169              		.cfi_offset 14, -4
 4170 0002 85B0     		sub	sp, sp, #20
 4171              	.LCFI77:
 4172              		.cfi_def_cfa_offset 24
 677:src/main.c    **** 	init_lpuart(OP2_SCI_UART, OP2_SCI_UART_PINS);
 4173              		.loc 1 677 2 view .LVU906
 4174 0004 0649     		ldr	r1, .L219
 4175 0006 0823     		movs	r3, #8
 4176 0008 0293     		str	r3, [sp, #8]
 4177 000a 0022     		movs	r2, #0
 4178 000c 0192     		str	r2, [sp, #4]
 4179 000e 0091     		str	r1, [sp]
 4180 0010 0122     		movs	r2, #1
 4181 0012 0448     		ldr	r0, .L219+4
 4182 0014 FFF7FEFF 		bl	init_lpuart
 4183              	.LVL344:
 678:src/main.c    **** }
 4184              		.loc 1 678 1 is_stmt 0 view .LVU907
 4185 0018 05B0     		add	sp, sp, #20
 4186              	.LCFI78:
 4187              		.cfi_def_cfa_offset 4
 4188              		@ sp needed
 4189 001a 5DF804FB 		ldr	pc, [sp], #4
 4190              	.L220:
 4191 001e 00BF     		.align	2
 4192              	.L219:
 4193 0020 00080048 		.word	1207961600
 4194 0024 00800040 		.word	1073774592
 4195              		.cfi_endproc
 4196              	.LFE195:
 4198              		.section	.text.op2_printstr,"ax",%progbits
 4199              		.align	1
 4200              		.global	op2_printstr
 4201              		.syntax unified
 4202              		.thumb
 4203              		.thumb_func
 4205              	op2_printstr:
 4206              	.LVL345:
 4207              	.LFB196:
 679:src/main.c    **** 
 680:src/main.c    **** void op2_printstr(char data[]) {
 4208              		.loc 1 680 32 is_stmt 1 view -0
ARM GAS  /tmp/ccY6rBif.s 			page 89


 4209              		.cfi_startproc
 4210              		@ args = 0, pretend = 0, frame = 0
 4211              		@ frame_needed = 0, uses_anonymous_args = 0
 4212              		.loc 1 680 32 is_stmt 0 view .LVU909
 4213 0000 38B5     		push	{r3, r4, r5, lr}
 4214              	.LCFI79:
 4215              		.cfi_def_cfa_offset 16
 4216              		.cfi_offset 3, -16
 4217              		.cfi_offset 4, -12
 4218              		.cfi_offset 5, -8
 4219              		.cfi_offset 14, -4
 4220 0002 0546     		mov	r5, r0
 681:src/main.c    **** 	for (int i = 0; i < strlen(data); i++) {
 4221              		.loc 1 681 2 is_stmt 1 view .LVU910
 4222              	.LBB23:
 4223              		.loc 1 681 7 view .LVU911
 4224              	.LVL346:
 4225              		.loc 1 681 11 is_stmt 0 view .LVU912
 4226 0004 0024     		movs	r4, #0
 4227              		.loc 1 681 2 view .LVU913
 4228 0006 04E0     		b	.L222
 4229              	.LVL347:
 4230              	.L223:
 682:src/main.c    **** 		uart_tx_char(OP2_SCI_UART, data[i]);
 4231              		.loc 1 682 3 is_stmt 1 discriminator 3 view .LVU914
 4232 0008 295D     		ldrb	r1, [r5, r4]	@ zero_extendqisi2
 4233 000a 0548     		ldr	r0, .L225
 4234 000c FFF7FEFF 		bl	uart_tx_char
 4235              	.LVL348:
 681:src/main.c    **** 	for (int i = 0; i < strlen(data); i++) {
 4236              		.loc 1 681 37 discriminator 3 view .LVU915
 4237 0010 0134     		adds	r4, r4, #1
 4238              	.LVL349:
 4239              	.L222:
 681:src/main.c    **** 	for (int i = 0; i < strlen(data); i++) {
 4240              		.loc 1 681 20 discriminator 1 view .LVU916
 681:src/main.c    **** 	for (int i = 0; i < strlen(data); i++) {
 4241              		.loc 1 681 22 is_stmt 0 discriminator 1 view .LVU917
 4242 0012 2846     		mov	r0, r5
 4243 0014 FFF7FEFF 		bl	strlen
 4244              	.LVL350:
 681:src/main.c    **** 	for (int i = 0; i < strlen(data); i++) {
 4245              		.loc 1 681 20 discriminator 1 view .LVU918
 4246 0018 A042     		cmp	r0, r4
 4247 001a F5D8     		bhi	.L223
 4248              	.LBE23:
 683:src/main.c    **** 	}
 684:src/main.c    **** }
 4249              		.loc 1 684 1 view .LVU919
 4250 001c 38BD     		pop	{r3, r4, r5, pc}
 4251              	.LVL351:
 4252              	.L226:
 4253              		.loc 1 684 1 view .LVU920
 4254 001e 00BF     		.align	2
 4255              	.L225:
 4256 0020 00800040 		.word	1073774592
 4257              		.cfi_endproc
ARM GAS  /tmp/ccY6rBif.s 			page 90


 4258              	.LFE196:
 4260              		.section	.text.op2_printint16,"ax",%progbits
 4261              		.align	1
 4262              		.global	op2_printint16
 4263              		.syntax unified
 4264              		.thumb
 4265              		.thumb_func
 4267              	op2_printint16:
 4268              	.LVL352:
 4269              	.LFB197:
 685:src/main.c    **** 
 686:src/main.c    **** char textbuf[255] = {0};
 687:src/main.c    **** 
 688:src/main.c    **** void op2_printint16(int16_t value) {
 4270              		.loc 1 688 36 is_stmt 1 view -0
 4271              		.cfi_startproc
 4272              		@ args = 0, pretend = 0, frame = 0
 4273              		@ frame_needed = 0, uses_anonymous_args = 0
 4274              		.loc 1 688 36 is_stmt 0 view .LVU922
 4275 0000 10B5     		push	{r4, lr}
 4276              	.LCFI80:
 4277              		.cfi_def_cfa_offset 8
 4278              		.cfi_offset 4, -8
 4279              		.cfi_offset 14, -4
 689:src/main.c    **** 	if (value < 0) uart_tx_char(OP2_SCI_UART, '-');
 4280              		.loc 1 689 2 is_stmt 1 view .LVU923
 4281              		.loc 1 689 5 is_stmt 0 view .LVU924
 4282 0002 041E     		subs	r4, r0, #0
 4283 0004 0ADB     		blt	.L230
 4284              	.LVL353:
 4285              	.L228:
 690:src/main.c    **** 	itoa(abs16(value), textbuf);
 4286              		.loc 1 690 2 is_stmt 1 view .LVU925
 4287              		.loc 1 690 7 is_stmt 0 view .LVU926
 4288 0006 2046     		mov	r0, r4
 4289 0008 FFF7FEFF 		bl	abs16
 4290              	.LVL354:
 4291              		.loc 1 690 2 view .LVU927
 4292 000c 064C     		ldr	r4, .L231
 4293 000e 2146     		mov	r1, r4
 4294 0010 FFF7FEFF 		bl	itoa
 4295              	.LVL355:
 691:src/main.c    **** 	op2_printstr(textbuf);
 4296              		.loc 1 691 2 is_stmt 1 view .LVU928
 4297 0014 2046     		mov	r0, r4
 4298 0016 FFF7FEFF 		bl	op2_printstr
 4299              	.LVL356:
 692:src/main.c    **** }
 4300              		.loc 1 692 1 is_stmt 0 view .LVU929
 4301 001a 10BD     		pop	{r4, pc}
 4302              	.LVL357:
 4303              	.L230:
 689:src/main.c    **** 	itoa(abs16(value), textbuf);
 4304              		.loc 1 689 17 is_stmt 1 discriminator 1 view .LVU930
 4305 001c 2D21     		movs	r1, #45
 4306 001e 0348     		ldr	r0, .L231+4
 4307              	.LVL358:
ARM GAS  /tmp/ccY6rBif.s 			page 91


 689:src/main.c    **** 	itoa(abs16(value), textbuf);
 4308              		.loc 1 689 17 is_stmt 0 discriminator 1 view .LVU931
 4309 0020 FFF7FEFF 		bl	uart_tx_char
 4310              	.LVL359:
 4311 0024 EFE7     		b	.L228
 4312              	.L232:
 4313 0026 00BF     		.align	2
 4314              	.L231:
 4315 0028 00000000 		.word	textbuf
 4316 002c 00800040 		.word	1073774592
 4317              		.cfi_endproc
 4318              	.LFE197:
 4320              		.section	.text.op2_printuint32,"ax",%progbits
 4321              		.align	1
 4322              		.global	op2_printuint32
 4323              		.syntax unified
 4324              		.thumb
 4325              		.thumb_func
 4327              	op2_printuint32:
 4328              	.LVL360:
 4329              	.LFB198:
 693:src/main.c    **** 
 694:src/main.c    **** void op2_printuint32(uint32_t value) {
 4330              		.loc 1 694 38 is_stmt 1 view -0
 4331              		.cfi_startproc
 4332              		@ args = 0, pretend = 0, frame = 0
 4333              		@ frame_needed = 0, uses_anonymous_args = 0
 4334              		.loc 1 694 38 is_stmt 0 view .LVU933
 4335 0000 10B5     		push	{r4, lr}
 4336              	.LCFI81:
 4337              		.cfi_def_cfa_offset 8
 4338              		.cfi_offset 4, -8
 4339              		.cfi_offset 14, -4
 695:src/main.c    **** 	itoa(value, textbuf);
 4340              		.loc 1 695 2 is_stmt 1 view .LVU934
 4341 0002 044C     		ldr	r4, .L235
 4342 0004 2146     		mov	r1, r4
 4343 0006 FFF7FEFF 		bl	itoa
 4344              	.LVL361:
 696:src/main.c    **** 	op2_printstr(textbuf);
 4345              		.loc 1 696 2 view .LVU935
 4346 000a 2046     		mov	r0, r4
 4347 000c FFF7FEFF 		bl	op2_printstr
 4348              	.LVL362:
 697:src/main.c    **** }
 4349              		.loc 1 697 1 is_stmt 0 view .LVU936
 4350 0010 10BD     		pop	{r4, pc}
 4351              	.L236:
 4352 0012 00BF     		.align	2
 4353              	.L235:
 4354 0014 00000000 		.word	textbuf
 4355              		.cfi_endproc
 4356              	.LFE198:
 4358              		.section	.text.op2_printnewline,"ax",%progbits
 4359              		.align	1
 4360              		.global	op2_printnewline
 4361              		.syntax unified
ARM GAS  /tmp/ccY6rBif.s 			page 92


 4362              		.thumb
 4363              		.thumb_func
 4365              	op2_printnewline:
 4366              	.LFB199:
 698:src/main.c    **** 
 699:src/main.c    **** void op2_printnewline() {
 4367              		.loc 1 699 25 is_stmt 1 view -0
 4368              		.cfi_startproc
 4369              		@ args = 0, pretend = 0, frame = 0
 4370              		@ frame_needed = 0, uses_anonymous_args = 0
 4371 0000 10B5     		push	{r4, lr}
 4372              	.LCFI82:
 4373              		.cfi_def_cfa_offset 8
 4374              		.cfi_offset 4, -8
 4375              		.cfi_offset 14, -4
 700:src/main.c    **** 	uart_tx_char(OP2_SCI_UART, '\r');
 4376              		.loc 1 700 2 view .LVU938
 4377 0002 054C     		ldr	r4, .L239
 4378 0004 0D21     		movs	r1, #13
 4379 0006 2046     		mov	r0, r4
 4380 0008 FFF7FEFF 		bl	uart_tx_char
 4381              	.LVL363:
 701:src/main.c    **** 	uart_tx_char(OP2_SCI_UART, '\n');
 4382              		.loc 1 701 2 view .LVU939
 4383 000c 0A21     		movs	r1, #10
 4384 000e 2046     		mov	r0, r4
 4385 0010 FFF7FEFF 		bl	uart_tx_char
 4386              	.LVL364:
 702:src/main.c    **** }
 4387              		.loc 1 702 1 is_stmt 0 view .LVU940
 4388 0014 10BD     		pop	{r4, pc}
 4389              	.L240:
 4390 0016 00BF     		.align	2
 4391              	.L239:
 4392 0018 00800040 		.word	1073774592
 4393              		.cfi_endproc
 4394              	.LFE199:
 4396              		.section	.text.op2_core_init,"ax",%progbits
 4397              		.align	1
 4398              		.global	op2_core_init
 4399              		.syntax unified
 4400              		.thumb
 4401              		.thumb_func
 4403              	op2_core_init:
 4404              	.LFB200:
 703:src/main.c    **** 
 704:src/main.c    **** void op2_core_init() { // not really necessary to group like this but it fits better with all the o
 4405              		.loc 1 704 22 is_stmt 1 view -0
 4406              		.cfi_startproc
 4407              		@ args = 0, pretend = 0, frame = 0
 4408              		@ frame_needed = 0, uses_anonymous_args = 0
 4409 0000 08B5     		push	{r3, lr}
 4410              	.LCFI83:
 4411              		.cfi_def_cfa_offset 8
 4412              		.cfi_offset 3, -8
 4413              		.cfi_offset 14, -4
 705:src/main.c    **** 	init_clocks();
ARM GAS  /tmp/ccY6rBif.s 			page 93


 4414              		.loc 1 705 2 view .LVU942
 4415 0002 FFF7FEFF 		bl	init_clocks
 4416              	.LVL365:
 706:src/main.c    **** 	init_gpio();
 4417              		.loc 1 706 2 view .LVU943
 4418 0006 FFF7FEFF 		bl	init_gpio
 4419              	.LVL366:
 707:src/main.c    **** 	init_nvic();
 4420              		.loc 1 707 2 view .LVU944
 4421 000a FFF7FEFF 		bl	init_nvic
 4422              	.LVL367:
 708:src/main.c    **** }
 4423              		.loc 1 708 1 is_stmt 0 view .LVU945
 4424 000e 08BD     		pop	{r3, pc}
 4425              		.cfi_endproc
 4426              	.LFE200:
 4428              		.section	.rodata.main.str1.4,"aMS",%progbits,1
 4429              		.align	2
 4430              	.LC0:
 4431 0000 6F726269 		.ascii	"orbital platform r2. mcu serial bytes: \000"
 4431      74616C20 
 4431      706C6174 
 4431      666F726D 
 4431      2072322E 
 4432              		.align	2
 4433              	.LC1:
 4434 0028 2C2000   		.ascii	", \000"
 4435 002b 00       		.align	2
 4436              	.LC2:
 4437 002c 63616E6E 		.ascii	"cannot keep up! reduce output data rate.\015\012\000"
 4437      6F74206B 
 4437      65657020 
 4437      75702120 
 4437      72656475 
 4438 0057 00       		.align	2
 4439              	.LC3:
 4440 0058 6C696D69 		.ascii	"limited by uart baud rate.\015\012\000"
 4440      74656420 
 4440      62792075 
 4440      61727420 
 4440      62617564 
 4441 0075 000000   		.align	2
 4442              	.LC4:
 4443 0078 2C00     		.ascii	",\000"
 4444              		.section	.text.main,"ax",%progbits
 4445              		.align	1
 4446              		.global	main
 4447              		.syntax unified
 4448              		.thumb
 4449              		.thumb_func
 4451              	main:
 4452              	.LFB201:
 709:src/main.c    **** 
 710:src/main.c    **** int main() {
 4453              		.loc 1 710 12 is_stmt 1 view -0
 4454              		.cfi_startproc
 4455              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccY6rBif.s 			page 94


 4456              		@ frame_needed = 0, uses_anonymous_args = 0
 4457 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4458              	.LCFI84:
 4459              		.cfi_def_cfa_offset 24
 4460              		.cfi_offset 3, -24
 4461              		.cfi_offset 4, -20
 4462              		.cfi_offset 5, -16
 4463              		.cfi_offset 6, -12
 4464              		.cfi_offset 7, -8
 4465              		.cfi_offset 14, -4
 711:src/main.c    **** 	op2_core_init(); 
 4466              		.loc 1 711 2 view .LVU947
 4467 0002 FFF7FEFF 		bl	op2_core_init
 4468              	.LVL368:
 712:src/main.c    **** 	
 713:src/main.c    **** 	gpio_set(GPIOE, 2, 1); 
 4469              		.loc 1 713 2 view .LVU948
 4470 0006 6C4C     		ldr	r4, .L260
 4471 0008 0122     		movs	r2, #1
 4472 000a 0221     		movs	r1, #2
 4473 000c 2046     		mov	r0, r4
 4474 000e FFF7FEFF 		bl	gpio_set
 4475              	.LVL369:
 714:src/main.c    **** 	
 715:src/main.c    **** 	op2_sci_uart_init();
 4476              		.loc 1 715 2 view .LVU949
 4477 0012 FFF7FEFF 		bl	op2_sci_uart_init
 4478              	.LVL370:
 716:src/main.c    **** 	op2_imu_init(IMU_ODR_3333_Hz, IMU_FS_2_g, IMU_ODR_3333_Hz, IMU_FS_1000_dps);
 4479              		.loc 1 716 2 view .LVU950
 4480 0016 0823     		movs	r3, #8
 4481 0018 0922     		movs	r2, #9
 4482 001a 0021     		movs	r1, #0
 4483 001c 1046     		mov	r0, r2
 4484 001e FFF7FEFF 		bl	op2_imu_init
 4485              	.LVL371:
 717:src/main.c    **** 	op2_mag_init(MAG_ODR_200_Hz, MAG_FS_8_G, MAG_OVERSAMPLE_512);
 4486              		.loc 1 717 2 view .LVU951
 4487 0022 0022     		movs	r2, #0
 4488 0024 0121     		movs	r1, #1
 4489 0026 0420     		movs	r0, #4
 4490 0028 FFF7FEFF 		bl	op2_mag_init
 4491              	.LVL372:
 718:src/main.c    **** 	
 719:src/main.c    **** 	int state = 0;
 4492              		.loc 1 719 2 view .LVU952
 720:src/main.c    **** 	int btn_debounce = 0;
 4493              		.loc 1 720 2 view .LVU953
 721:src/main.c    **** 	
 722:src/main.c    **** 	gpio_set(GPIOE, 2, 0); 
 4494              		.loc 1 722 2 view .LVU954
 4495 002c 0022     		movs	r2, #0
 4496 002e 0221     		movs	r1, #2
 4497 0030 2046     		mov	r0, r4
 4498 0032 FFF7FEFF 		bl	gpio_set
 4499              	.LVL373:
 723:src/main.c    **** 	
ARM GAS  /tmp/ccY6rBif.s 			page 95


 724:src/main.c    **** 	// output factory info 
 725:src/main.c    **** 	op2_printstr("orbital platform r2. mcu serial bytes: "); 
 4500              		.loc 1 725 2 view .LVU955
 4501 0036 6148     		ldr	r0, .L260+4
 4502 0038 FFF7FEFF 		bl	op2_printstr
 4503              	.LVL374:
 726:src/main.c    **** 	op2_printuint32(*(uint32_t*)(UID_BASE));
 4504              		.loc 1 726 2 view .LVU956
 4505 003c 604C     		ldr	r4, .L260+8
 4506 003e D4F89005 		ldr	r0, [r4, #1424]
 4507 0042 FFF7FEFF 		bl	op2_printuint32
 4508              	.LVL375:
 727:src/main.c    **** 	op2_printstr(", ");
 4509              		.loc 1 727 2 view .LVU957
 4510 0046 5F4D     		ldr	r5, .L260+12
 4511 0048 2846     		mov	r0, r5
 4512 004a FFF7FEFF 		bl	op2_printstr
 4513              	.LVL376:
 728:src/main.c    **** 	op2_printuint32(*(uint32_t*)(UID_BASE+0x4));
 4514              		.loc 1 728 2 view .LVU958
 4515 004e D4F89405 		ldr	r0, [r4, #1428]
 4516 0052 FFF7FEFF 		bl	op2_printuint32
 4517              	.LVL377:
 729:src/main.c    **** 	op2_printstr(", ");
 4518              		.loc 1 729 2 view .LVU959
 4519 0056 2846     		mov	r0, r5
 4520 0058 FFF7FEFF 		bl	op2_printstr
 4521              	.LVL378:
 730:src/main.c    **** 	op2_printuint32(*(uint32_t*)(UID_BASE+0x8));
 4522              		.loc 1 730 2 view .LVU960
 4523 005c D4F89805 		ldr	r0, [r4, #1432]
 4524 0060 FFF7FEFF 		bl	op2_printuint32
 4525              	.LVL379:
 731:src/main.c    **** 	op2_printnewline();
 4526              		.loc 1 731 2 view .LVU961
 4527 0064 FFF7FEFF 		bl	op2_printnewline
 4528              	.LVL380:
 732:src/main.c    **** 	
 733:src/main.c    **** 	op2_imu_read_whoami();
 4529              		.loc 1 733 2 view .LVU962
 4530 0068 FFF7FEFF 		bl	op2_imu_read_whoami
 4531              	.LVL381:
 734:src/main.c    **** 	
 735:src/main.c    **** 	
 736:src/main.c    **** 	int btna_pressed_at_start = gpio_read(GPIOB, 10); 
 4532              		.loc 1 736 2 view .LVU963
 4533              		.loc 1 736 30 is_stmt 0 view .LVU964
 4534 006c 0A21     		movs	r1, #10
 4535 006e 5648     		ldr	r0, .L260+16
 4536 0070 FFF7FEFF 		bl	gpio_read
 4537              	.LVL382:
 737:src/main.c    **** 	
 738:src/main.c    **** 	if (!btna_pressed_at_start) {gpio_set(GPIOE, 4, 1);}  // diagnostic mode if btna is pressed 
 4538              		.loc 1 738 2 is_stmt 1 view .LVU965
 4539              		.loc 1 738 5 is_stmt 0 view .LVU966
 4540 0074 0746     		mov	r7, r0
 4541 0076 58BB     		cbnz	r0, .L244
ARM GAS  /tmp/ccY6rBif.s 			page 96


 4542              		.loc 1 738 31 is_stmt 1 discriminator 1 view .LVU967
 4543 0078 0122     		movs	r2, #1
 4544 007a 0421     		movs	r1, #4
 4545 007c 4E48     		ldr	r0, .L260
 4546              	.LVL383:
 4547              		.loc 1 738 31 is_stmt 0 discriminator 1 view .LVU968
 4548 007e FFF7FEFF 		bl	gpio_set
 4549              	.LVL384:
 4550              	.L245:
 739:src/main.c    **** 	else {
 740:src/main.c    **** 		gpio_set(GPIOE, 2, 1);
 741:src/main.c    **** 		gpio_set(GPIOE, 3, 1);
 742:src/main.c    **** 	}
 743:src/main.c    **** 	
 744:src/main.c    **** 	while (1) {
 4551              		.loc 1 744 2 is_stmt 1 view .LVU969
 4552              	.LBB24:
 745:src/main.c    **** 	//	if (btna_pressed_at_start) {gpio_af(GPIOA, 15, 1);} // output pwm if NOT in diagnostic mode 		
 746:src/main.c    **** 		gpio_af(GPIOA, 15, 1);
 4553              		.loc 1 746 3 view .LVU970
 4554 0082 0122     		movs	r2, #1
 4555 0084 0F21     		movs	r1, #15
 4556 0086 4FF09040 		mov	r0, #1207959552
 4557 008a FFF7FEFF 		bl	gpio_af
 4558              	.LVL385:
 747:src/main.c    **** 		RCC->APB1ENR1 |= 1<<0; 					// enable TIM2 
 4559              		.loc 1 747 3 view .LVU971
 4560              		.loc 1 747 6 is_stmt 0 view .LVU972
 4561 008e 4F4A     		ldr	r2, .L260+20
 4562 0090 936D     		ldr	r3, [r2, #88]
 4563              		.loc 1 747 17 view .LVU973
 4564 0092 43F00103 		orr	r3, r3, #1
 4565 0096 9365     		str	r3, [r2, #88]
 748:src/main.c    **** 		delay_ms(1);
 4566              		.loc 1 748 3 is_stmt 1 view .LVU974
 4567 0098 0120     		movs	r0, #1
 4568 009a FFF7FEFF 		bl	delay_ms
 4569              	.LVL386:
 749:src/main.c    **** 		TIM2->PSC = 81; 						// clock prescaler 
 4570              		.loc 1 749 3 view .LVU975
 4571              		.loc 1 749 13 is_stmt 0 view .LVU976
 4572 009e 4FF08043 		mov	r3, #1073741824
 4573 00a2 5122     		movs	r2, #81
 4574 00a4 9A62     		str	r2, [r3, #40]
 750:src/main.c    **** 		TIM2->CCER = 1<<0;						// 
 4575              		.loc 1 750 3 is_stmt 1 view .LVU977
 4576              		.loc 1 750 14 is_stmt 0 view .LVU978
 4577 00a6 0122     		movs	r2, #1
 4578 00a8 1A62     		str	r2, [r3, #32]
 751:src/main.c    **** 		TIM2->CCMR1 = (6 << 4) | (1 << 3);	// pwm mode, enable 
 4579              		.loc 1 751 3 is_stmt 1 view .LVU979
 4580              		.loc 1 751 15 is_stmt 0 view .LVU980
 4581 00aa 6822     		movs	r2, #104
 4582 00ac 9A61     		str	r2, [r3, #24]
 752:src/main.c    **** 		TIM2->EGR = 1<<1; 						// give an event trigger to update shadow registers 
 4583              		.loc 1 752 3 is_stmt 1 view .LVU981
 4584              		.loc 1 752 13 is_stmt 0 view .LVU982
ARM GAS  /tmp/ccY6rBif.s 			page 97


 4585 00ae 0222     		movs	r2, #2
 4586 00b0 5A61     		str	r2, [r3, #20]
 753:src/main.c    **** 		TIM2->ARR = 10000;						// reload register 
 4587              		.loc 1 753 3 is_stmt 1 view .LVU983
 4588              		.loc 1 753 13 is_stmt 0 view .LVU984
 4589 00b2 42F21072 		movw	r2, #10000
 4590 00b6 DA62     		str	r2, [r3, #44]
 754:src/main.c    **** 		TIM2->CCR1 = 1000;					
 4591              		.loc 1 754 3 is_stmt 1 view .LVU985
 4592              		.loc 1 754 14 is_stmt 0 view .LVU986
 4593 00b8 4FF47A72 		mov	r2, #1000
 4594 00bc 5A63     		str	r2, [r3, #52]
 755:src/main.c    **** 		TIM2->CR1 = 
 4595              		.loc 1 755 3 is_stmt 1 view .LVU987
 4596              		.loc 1 755 13 is_stmt 0 view .LVU988
 4597 00be 8122     		movs	r2, #129
 4598 00c0 1A60     		str	r2, [r3]
 756:src/main.c    **** 			(1 << 7) | 1; 						// enable auto reload preload and enable tim2 
 757:src/main.c    **** 		
 758:src/main.c    **** 		TIM2->CCR1 = 1500; // rc protocol: 1 ms is minimum, 2 ms is maximum 
 4599              		.loc 1 758 3 is_stmt 1 view .LVU989
 4600              		.loc 1 758 14 is_stmt 0 view .LVU990
 4601 00c2 40F2DC52 		movw	r2, #1500
 4602 00c6 5A63     		str	r2, [r3, #52]
 759:src/main.c    **** 		
 760:src/main.c    **** 		int th = 0 * 5; // esc throttle, plus or minus 100 
 4603              		.loc 1 760 3 is_stmt 1 view .LVU991
 4604              	.LVL387:
 761:src/main.c    **** 		TIM2->CCR1 = 1500 + th * 5;
 4605              		.loc 1 761 3 view .LVU992
 4606              		.loc 1 761 14 is_stmt 0 view .LVU993
 4607 00c8 5A63     		str	r2, [r3, #52]
 762:src/main.c    **** 		
 763:src/main.c    **** 	//	while(1);
 764:src/main.c    **** 		
 765:src/main.c    **** 		int targetms = 10; // delay before starting program 
 4608              		.loc 1 765 3 is_stmt 1 view .LVU994
 4609              	.LVL388:
 4610              		.loc 1 765 7 is_stmt 0 view .LVU995
 4611 00ca 0A26     		movs	r6, #10
 760:src/main.c    **** 		TIM2->CCR1 = 1500 + th * 5;
 4612              		.loc 1 760 7 view .LVU996
 4613 00cc 0024     		movs	r4, #0
 4614 00ce 4EE0     		b	.L254
 4615              	.LVL389:
 4616              	.L244:
 760:src/main.c    **** 		TIM2->CCR1 = 1500 + th * 5;
 4617              		.loc 1 760 7 view .LVU997
 4618              	.LBE24:
 740:src/main.c    **** 		gpio_set(GPIOE, 3, 1);
 4619              		.loc 1 740 3 is_stmt 1 view .LVU998
 4620 00d0 394C     		ldr	r4, .L260
 4621 00d2 0122     		movs	r2, #1
 4622 00d4 0221     		movs	r1, #2
 4623 00d6 2046     		mov	r0, r4
 4624              	.LVL390:
 740:src/main.c    **** 		gpio_set(GPIOE, 3, 1);
ARM GAS  /tmp/ccY6rBif.s 			page 98


 4625              		.loc 1 740 3 is_stmt 0 view .LVU999
 4626 00d8 FFF7FEFF 		bl	gpio_set
 4627              	.LVL391:
 741:src/main.c    **** 	}
 4628              		.loc 1 741 3 is_stmt 1 view .LVU1000
 4629 00dc 0122     		movs	r2, #1
 4630 00de 0321     		movs	r1, #3
 4631 00e0 2046     		mov	r0, r4
 4632 00e2 FFF7FEFF 		bl	gpio_set
 4633              	.LVL392:
 4634 00e6 CCE7     		b	.L245
 4635              	.LVL393:
 4636              	.L259:
 4637              	.LBB25:
 766:src/main.c    **** 		while (1) {
 767:src/main.c    **** 			if (systick_time >= targetms) {
 768:src/main.c    **** 				op2_printstr("cannot keep up! reduce output data rate.\r\n");
 4638              		.loc 1 768 5 view .LVU1001
 4639 00e8 3948     		ldr	r0, .L260+24
 4640 00ea FFF7FEFF 		bl	op2_printstr
 4641              	.LVL394:
 769:src/main.c    **** 				op2_printstr("limited by uart baud rate.\r\n");
 4642              		.loc 1 769 5 view .LVU1002
 4643 00ee 3948     		ldr	r0, .L260+28
 4644 00f0 FFF7FEFF 		bl	op2_printstr
 4645              	.LVL395:
 4646              	.L247:
 770:src/main.c    **** 				while (1) __NOP();
 4647              		.loc 1 770 5 discriminator 1 view .LVU1003
 4648              		.loc 1 770 15 discriminator 1 view .LVU1004
 4649              		.syntax unified
 4650              	@ 770 "src/main.c" 1
 4651 00f4 00BF     		nop
 4652              	@ 0 "" 2
 4653              		.loc 1 770 11 discriminator 1 view .LVU1005
 4654              		.thumb
 4655              		.syntax unified
 4656 00f6 FDE7     		b	.L247
 4657              	.LVL396:
 4658              	.L253:
 771:src/main.c    **** 			}
 772:src/main.c    **** 			
 773:src/main.c    **** 			if (systick_time> 5000) {
 774:src/main.c    **** 				th = (systick_time - 5000) / 100; 
 775:src/main.c    **** 				// 5 seconds: take 10 seconds to ramp to full throttle 
 776:src/main.c    **** 			} 
 777:src/main.c    **** 			if (systick_time > 15000) {
 778:src/main.c    **** 				th = 100; 
 779:src/main.c    **** 				// 15 seconds: full throttle 
 780:src/main.c    **** 			} 
 781:src/main.c    **** 			if (systick_time > 20000) {
 782:src/main.c    **** 				th = 0; 
 783:src/main.c    **** 				// 20 seconds: zero throttle 
 784:src/main.c    **** 			} 
 785:src/main.c    **** 			if (!btna_pressed_at_start) th = 0; 
 786:src/main.c    **** 			TIM2->CCR1 = 1500 + th * 5;
 787:src/main.c    **** 			
ARM GAS  /tmp/ccY6rBif.s 			page 99


 788:src/main.c    **** 			while (systick_time < targetms) __NOP();
 4659              		.loc 1 788 36 discriminator 2 view .LVU1006
 4660              		.syntax unified
 4661              	@ 788 "src/main.c" 1
 4662 00f8 00BF     		nop
 4663              	@ 0 "" 2
 4664              		.thumb
 4665              		.syntax unified
 4666              	.L252:
 4667              		.loc 1 788 24 discriminator 1 view .LVU1007
 4668 00fa 374B     		ldr	r3, .L260+32
 4669 00fc 1868     		ldr	r0, [r3]
 4670 00fe 8242     		cmp	r2, r0
 4671 0100 FAD8     		bhi	.L253
 789:src/main.c    **** 			
 790:src/main.c    **** 			op2_printuint32(systick_time);
 4672              		.loc 1 790 4 view .LVU1008
 4673 0102 FFF7FEFF 		bl	op2_printuint32
 4674              	.LVL397:
 791:src/main.c    **** 			op2_printstr(",");
 4675              		.loc 1 791 4 view .LVU1009
 4676 0106 354D     		ldr	r5, .L260+36
 4677 0108 2846     		mov	r0, r5
 4678 010a FFF7FEFF 		bl	op2_printstr
 4679              	.LVL398:
 792:src/main.c    **** 			op2_printint16(op2_imu_read_acel_x());
 4680              		.loc 1 792 4 view .LVU1010
 4681 010e FFF7FEFF 		bl	op2_imu_read_acel_x
 4682              	.LVL399:
 4683 0112 FFF7FEFF 		bl	op2_printint16
 4684              	.LVL400:
 793:src/main.c    **** 			op2_printstr(",");
 4685              		.loc 1 793 4 view .LVU1011
 4686 0116 2846     		mov	r0, r5
 4687 0118 FFF7FEFF 		bl	op2_printstr
 4688              	.LVL401:
 794:src/main.c    **** 			op2_printint16(op2_imu_read_acel_y());
 4689              		.loc 1 794 4 view .LVU1012
 4690 011c FFF7FEFF 		bl	op2_imu_read_acel_y
 4691              	.LVL402:
 4692 0120 FFF7FEFF 		bl	op2_printint16
 4693              	.LVL403:
 795:src/main.c    **** 			op2_printstr(",");
 4694              		.loc 1 795 4 view .LVU1013
 4695 0124 2846     		mov	r0, r5
 4696 0126 FFF7FEFF 		bl	op2_printstr
 4697              	.LVL404:
 796:src/main.c    **** 			op2_printint16(op2_imu_read_acel_z());
 4698              		.loc 1 796 4 view .LVU1014
 4699 012a FFF7FEFF 		bl	op2_imu_read_acel_z
 4700              	.LVL405:
 4701 012e FFF7FEFF 		bl	op2_printint16
 4702              	.LVL406:
 797:src/main.c    **** 			op2_printstr(",");
 4703              		.loc 1 797 4 view .LVU1015
 4704 0132 2846     		mov	r0, r5
 4705 0134 FFF7FEFF 		bl	op2_printstr
ARM GAS  /tmp/ccY6rBif.s 			page 100


 4706              	.LVL407:
 798:src/main.c    **** 			op2_printint16(op2_imu_read_gyro_x());
 4707              		.loc 1 798 4 view .LVU1016
 4708 0138 FFF7FEFF 		bl	op2_imu_read_gyro_x
 4709              	.LVL408:
 4710 013c FFF7FEFF 		bl	op2_printint16
 4711              	.LVL409:
 799:src/main.c    **** 			op2_printstr(",");
 4712              		.loc 1 799 4 view .LVU1017
 4713 0140 2846     		mov	r0, r5
 4714 0142 FFF7FEFF 		bl	op2_printstr
 4715              	.LVL410:
 800:src/main.c    **** 			op2_printint16(op2_imu_read_gyro_y());
 4716              		.loc 1 800 4 view .LVU1018
 4717 0146 FFF7FEFF 		bl	op2_imu_read_gyro_y
 4718              	.LVL411:
 4719 014a FFF7FEFF 		bl	op2_printint16
 4720              	.LVL412:
 801:src/main.c    **** 			op2_printstr(",");
 4721              		.loc 1 801 4 view .LVU1019
 4722 014e 2846     		mov	r0, r5
 4723 0150 FFF7FEFF 		bl	op2_printstr
 4724              	.LVL413:
 802:src/main.c    **** 			op2_printint16(op2_imu_read_gyro_z());
 4725              		.loc 1 802 4 view .LVU1020
 4726 0154 FFF7FEFF 		bl	op2_imu_read_gyro_z
 4727              	.LVL414:
 4728 0158 FFF7FEFF 		bl	op2_printint16
 4729              	.LVL415:
 803:src/main.c    **** 			op2_printstr(",");
 4730              		.loc 1 803 4 view .LVU1021
 4731 015c 2846     		mov	r0, r5
 4732 015e FFF7FEFF 		bl	op2_printstr
 4733              	.LVL416:
 804:src/main.c    **** 			op2_printuint32(th);
 4734              		.loc 1 804 4 view .LVU1022
 4735 0162 2046     		mov	r0, r4
 4736 0164 FFF7FEFF 		bl	op2_printuint32
 4737              	.LVL417:
 805:src/main.c    **** 			op2_printnewline();
 4738              		.loc 1 805 4 view .LVU1023
 4739 0168 FFF7FEFF 		bl	op2_printnewline
 4740              	.LVL418:
 806:src/main.c    **** 			
 807:src/main.c    **** 			targetms += 5;
 4741              		.loc 1 807 4 view .LVU1024
 4742              		.loc 1 807 13 is_stmt 0 view .LVU1025
 4743 016c 0536     		adds	r6, r6, #5
 4744              	.LVL419:
 766:src/main.c    **** 			if (systick_time >= targetms) {
 4745              		.loc 1 766 9 is_stmt 1 view .LVU1026
 4746              	.L254:
 766:src/main.c    **** 			if (systick_time >= targetms) {
 4747              		.loc 1 766 3 view .LVU1027
 767:src/main.c    **** 				op2_printstr("cannot keep up! reduce output data rate.\r\n");
 4748              		.loc 1 767 4 view .LVU1028
 767:src/main.c    **** 				op2_printstr("cannot keep up! reduce output data rate.\r\n");
ARM GAS  /tmp/ccY6rBif.s 			page 101


 4749              		.loc 1 767 21 is_stmt 0 view .LVU1029
 4750 016e 1A4B     		ldr	r3, .L260+32
 4751 0170 1B68     		ldr	r3, [r3]
 4752 0172 3246     		mov	r2, r6
 767:src/main.c    **** 				op2_printstr("cannot keep up! reduce output data rate.\r\n");
 4753              		.loc 1 767 7 view .LVU1030
 4754 0174 B342     		cmp	r3, r6
 4755 0176 B7D2     		bcs	.L259
 773:src/main.c    **** 				th = (systick_time - 5000) / 100; 
 4756              		.loc 1 773 4 is_stmt 1 view .LVU1031
 773:src/main.c    **** 				th = (systick_time - 5000) / 100; 
 4757              		.loc 1 773 7 is_stmt 0 view .LVU1032
 4758 0178 41F28831 		movw	r1, #5000
 4759 017c 8B42     		cmp	r3, r1
 4760 017e 06D9     		bls	.L248
 774:src/main.c    **** 				// 5 seconds: take 10 seconds to ramp to full throttle 
 4761              		.loc 1 774 5 is_stmt 1 view .LVU1033
 774:src/main.c    **** 				// 5 seconds: take 10 seconds to ramp to full throttle 
 4762              		.loc 1 774 24 is_stmt 0 view .LVU1034
 4763 0180 A3F59C54 		sub	r4, r3, #4992
 4764              	.LVL420:
 774:src/main.c    **** 				// 5 seconds: take 10 seconds to ramp to full throttle 
 4765              		.loc 1 774 24 view .LVU1035
 4766 0184 083C     		subs	r4, r4, #8
 774:src/main.c    **** 				// 5 seconds: take 10 seconds to ramp to full throttle 
 4767              		.loc 1 774 32 view .LVU1036
 4768 0186 1649     		ldr	r1, .L260+40
 4769 0188 A1FB0414 		umull	r1, r4, r1, r4
 4770 018c 6409     		lsrs	r4, r4, #5
 4771              	.LVL421:
 4772              	.L248:
 777:src/main.c    **** 				th = 100; 
 4773              		.loc 1 777 4 is_stmt 1 view .LVU1037
 777:src/main.c    **** 				th = 100; 
 4774              		.loc 1 777 7 is_stmt 0 view .LVU1038
 4775 018e 43F69821 		movw	r1, #15000
 4776 0192 8B42     		cmp	r3, r1
 4777 0194 00D9     		bls	.L249
 778:src/main.c    **** 				// 15 seconds: full throttle 
 4778              		.loc 1 778 8 view .LVU1039
 4779 0196 6424     		movs	r4, #100
 4780              	.LVL422:
 4781              	.L249:
 781:src/main.c    **** 				th = 0; 
 4782              		.loc 1 781 4 is_stmt 1 view .LVU1040
 781:src/main.c    **** 				th = 0; 
 4783              		.loc 1 781 7 is_stmt 0 view .LVU1041
 4784 0198 44F62061 		movw	r1, #20000
 4785 019c 8B42     		cmp	r3, r1
 4786 019e 00D9     		bls	.L250
 782:src/main.c    **** 				// 20 seconds: zero throttle 
 4787              		.loc 1 782 8 view .LVU1042
 4788 01a0 0024     		movs	r4, #0
 4789              	.LVL423:
 4790              	.L250:
 785:src/main.c    **** 			TIM2->CCR1 = 1500 + th * 5;
 4791              		.loc 1 785 4 is_stmt 1 view .LVU1043
ARM GAS  /tmp/ccY6rBif.s 			page 102


 785:src/main.c    **** 			TIM2->CCR1 = 1500 + th * 5;
 4792              		.loc 1 785 7 is_stmt 0 view .LVU1044
 4793 01a2 07B9     		cbnz	r7, .L251
 785:src/main.c    **** 			TIM2->CCR1 = 1500 + th * 5;
 4794              		.loc 1 785 35 view .LVU1045
 4795 01a4 3C46     		mov	r4, r7
 4796              	.LVL424:
 4797              	.L251:
 786:src/main.c    **** 			
 4798              		.loc 1 786 4 is_stmt 1 view .LVU1046
 786:src/main.c    **** 			
 4799              		.loc 1 786 27 is_stmt 0 view .LVU1047
 4800 01a6 04EB8403 		add	r3, r4, r4, lsl #2
 786:src/main.c    **** 			
 4801              		.loc 1 786 22 view .LVU1048
 4802 01aa 03F2DC53 		addw	r3, r3, #1500
 786:src/main.c    **** 			
 4803              		.loc 1 786 15 view .LVU1049
 4804 01ae 4FF08041 		mov	r1, #1073741824
 4805 01b2 4B63     		str	r3, [r1, #52]
 788:src/main.c    **** 			
 4806              		.loc 1 788 4 is_stmt 1 view .LVU1050
 788:src/main.c    **** 			
 4807              		.loc 1 788 10 is_stmt 0 view .LVU1051
 4808 01b4 A1E7     		b	.L252
 4809              	.L261:
 4810 01b6 00BF     		.align	2
 4811              	.L260:
 4812 01b8 00100048 		.word	1207963648
 4813 01bc 00000000 		.word	.LC0
 4814 01c0 0070FF1F 		.word	536834048
 4815 01c4 28000000 		.word	.LC1
 4816 01c8 00040048 		.word	1207960576
 4817 01cc 00100240 		.word	1073876992
 4818 01d0 2C000000 		.word	.LC2
 4819 01d4 58000000 		.word	.LC3
 4820 01d8 00000000 		.word	systick_time
 4821 01dc 78000000 		.word	.LC4
 4822 01e0 1F85EB51 		.word	1374389535
 4823              	.LBE25:
 4824              		.cfi_endproc
 4825              	.LFE201:
 4827              		.global	textbuf
 4828              		.section	.bss.textbuf,"aw",%nobits
 4829              		.align	2
 4832              	textbuf:
 4833 0000 00000000 		.space	255
 4833      00000000 
 4833      00000000 
 4833      00000000 
 4833      00000000 
 4834              		.global	systick_time
 4835              		.section	.bss.systick_time,"aw",%nobits
 4836              		.align	2
 4839              	systick_time:
 4840 0000 00000000 		.space	4
 4841              		.global	core_MHz
ARM GAS  /tmp/ccY6rBif.s 			page 103


 4842              		.section	.bss.core_MHz,"aw",%nobits
 4843              		.align	2
 4846              	core_MHz:
 4847 0000 00000000 		.space	4
 4848              		.text
 4849              	.Letext0:
 4850              		.file 3 "lib/st/stm32l476xx.h"
 4851              		.file 4 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 4852              		.file 5 "lib/st/core_cm4.h"
 4853              		.file 6 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stddef.h"
 4854              		.file 7 "/usr/include/newlib/string.h"
ARM GAS  /tmp/ccY6rBif.s 			page 104


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
     /tmp/ccY6rBif.s:21     .text.reverse:00000000 $t
     /tmp/ccY6rBif.s:26     .text.reverse:00000000 reverse
     /tmp/ccY6rBif.s:86     .text.itoa:00000000 $t
     /tmp/ccY6rBif.s:91     .text.itoa:00000000 itoa
     /tmp/ccY6rBif.s:183    .text.itoa:00000058 $d
     /tmp/ccY6rBif.s:188    .text.abs16:00000000 $t
     /tmp/ccY6rBif.s:194    .text.abs16:00000000 abs16
     /tmp/ccY6rBif.s:220    .text.nop:00000000 $t
     /tmp/ccY6rBif.s:226    .text.nop:00000000 nop
     /tmp/ccY6rBif.s:264    .text.nop_ms:00000000 $t
     /tmp/ccY6rBif.s:270    .text.nop_ms:00000000 nop_ms
     /tmp/ccY6rBif.s:296    .text.init_clocks:00000000 $t
     /tmp/ccY6rBif.s:302    .text.init_clocks:00000000 init_clocks
     /tmp/ccY6rBif.s:461    .text.init_clocks:000000c8 $d
     /tmp/ccY6rBif.s:4846   .bss.core_MHz:00000000 core_MHz
     /tmp/ccY6rBif.s:473    .text.gpio_high:00000000 $t
     /tmp/ccY6rBif.s:479    .text.gpio_high:00000000 gpio_high
     /tmp/ccY6rBif.s:499    .text.gpio_low:00000000 $t
     /tmp/ccY6rBif.s:505    .text.gpio_low:00000000 gpio_low
     /tmp/ccY6rBif.s:528    .text.gpio_set:00000000 $t
     /tmp/ccY6rBif.s:534    .text.gpio_set:00000000 gpio_set
     /tmp/ccY6rBif.s:567    .text.gpio_read:00000000 $t
     /tmp/ccY6rBif.s:573    .text.gpio_read:00000000 gpio_read
     /tmp/ccY6rBif.s:606    .text.gpio_mode:00000000 $t
     /tmp/ccY6rBif.s:612    .text.gpio_mode:00000000 gpio_mode
     /tmp/ccY6rBif.s:697    .text.gpio_af:00000000 $t
     /tmp/ccY6rBif.s:703    .text.gpio_af:00000000 gpio_af
     /tmp/ccY6rBif.s:790    .text.init_gpio:00000000 $t
     /tmp/ccY6rBif.s:796    .text.init_gpio:00000000 init_gpio
     /tmp/ccY6rBif.s:952    .text.init_gpio:000000d4 $d
     /tmp/ccY6rBif.s:963    .text.SysTick_Handler:00000000 $t
     /tmp/ccY6rBif.s:969    .text.SysTick_Handler:00000000 SysTick_Handler
     /tmp/ccY6rBif.s:987    .text.SysTick_Handler:0000000c $d
     /tmp/ccY6rBif.s:4839   .bss.systick_time:00000000 systick_time
     /tmp/ccY6rBif.s:992    .text.delay_ms:00000000 $t
     /tmp/ccY6rBif.s:998    .text.delay_ms:00000000 delay_ms
     /tmp/ccY6rBif.s:1055   .text.delay_ms:00000024 $d
     /tmp/ccY6rBif.s:1060   .text.init_nvic:00000000 $t
     /tmp/ccY6rBif.s:1066   .text.init_nvic:00000000 init_nvic
     /tmp/ccY6rBif.s:1130   .text.init_nvic:00000028 $d
     /tmp/ccY6rBif.s:1135   .text.init_lpuart:00000000 $t
     /tmp/ccY6rBif.s:1141   .text.init_lpuart:00000000 init_lpuart
     /tmp/ccY6rBif.s:1197   .text.init_lpuart:00000030 $d
     /tmp/ccY6rBif.s:1202   .text.uart_tx_char:00000000 $t
     /tmp/ccY6rBif.s:1208   .text.uart_tx_char:00000000 uart_tx_char
     /tmp/ccY6rBif.s:1244   .text.uart_tx_long:00000000 $t
     /tmp/ccY6rBif.s:1250   .text.uart_tx_long:00000000 uart_tx_long
     /tmp/ccY6rBif.s:1317   .text.init_softuart:00000000 $t
     /tmp/ccY6rBif.s:1323   .text.init_softuart:00000000 init_softuart
     /tmp/ccY6rBif.s:1385   .text.softuart_tx_char:00000000 $t
     /tmp/ccY6rBif.s:1391   .text.softuart_tx_char:00000000 softuart_tx_char
     /tmp/ccY6rBif.s:1405   .text.init_spi_master:00000000 $t
     /tmp/ccY6rBif.s:1411   .text.init_spi_master:00000000 init_spi_master
     /tmp/ccY6rBif.s:1493   .text.spi_block_while_busy:00000000 $t
     /tmp/ccY6rBif.s:1499   .text.spi_block_while_busy:00000000 spi_block_while_busy
ARM GAS  /tmp/ccY6rBif.s 			page 105


     /tmp/ccY6rBif.s:1532   .text.spi_tx8:00000000 $t
     /tmp/ccY6rBif.s:1538   .text.spi_tx8:00000000 spi_tx8
     /tmp/ccY6rBif.s:1594   .text.spi_rx8:00000000 $t
     /tmp/ccY6rBif.s:1600   .text.spi_rx8:00000000 spi_rx8
     /tmp/ccY6rBif.s:1619   .text.spi_tx8x2:00000000 $t
     /tmp/ccY6rBif.s:1625   .text.spi_tx8x2:00000000 spi_tx8x2
     /tmp/ccY6rBif.s:1705   .text.spi_tx8_long:00000000 $t
     /tmp/ccY6rBif.s:1711   .text.spi_tx8_long:00000000 spi_tx8_long
     /tmp/ccY6rBif.s:1782   .text.spi_txrx8_long:00000000 $t
     /tmp/ccY6rBif.s:1788   .text.spi_txrx8_long:00000000 spi_txrx8_long
     /tmp/ccY6rBif.s:1871   .text.softi2c_line_mode:00000000 $t
     /tmp/ccY6rBif.s:1877   .text.softi2c_line_mode:00000000 softi2c_line_mode
     /tmp/ccY6rBif.s:1931   .text.init_softi2c:00000000 $t
     /tmp/ccY6rBif.s:1937   .text.init_softi2c:00000000 init_softi2c
     /tmp/ccY6rBif.s:2035   .text.softi2c_delay:00000000 $t
     /tmp/ccY6rBif.s:2041   .text.softi2c_delay:00000000 softi2c_delay
     /tmp/ccY6rBif.s:2062   .text.softi2c_sig_start:00000000 $t
     /tmp/ccY6rBif.s:2068   .text.softi2c_sig_start:00000000 softi2c_sig_start
     /tmp/ccY6rBif.s:2135   .text.softi2c_sig_repeated_start:00000000 $t
     /tmp/ccY6rBif.s:2141   .text.softi2c_sig_repeated_start:00000000 softi2c_sig_repeated_start
     /tmp/ccY6rBif.s:2217   .text.softi2c_sig_stop:00000000 $t
     /tmp/ccY6rBif.s:2223   .text.softi2c_sig_stop:00000000 softi2c_sig_stop
     /tmp/ccY6rBif.s:2290   .text.softi2c_send8:00000000 $t
     /tmp/ccY6rBif.s:2296   .text.softi2c_send8:00000000 softi2c_send8
     /tmp/ccY6rBif.s:2378   .text.softi2c_read8:00000000 $t
     /tmp/ccY6rBif.s:2384   .text.softi2c_read8:00000000 softi2c_read8
     /tmp/ccY6rBif.s:2488   .text.softi2c_send_nack:00000000 $t
     /tmp/ccY6rBif.s:2494   .text.softi2c_send_nack:00000000 softi2c_send_nack
     /tmp/ccY6rBif.s:2549   .text.softi2c_read_nack:00000000 $t
     /tmp/ccY6rBif.s:2555   .text.softi2c_read_nack:00000000 softi2c_read_nack
     /tmp/ccY6rBif.s:2623   .text.softi2c_write_reg:00000000 $t
     /tmp/ccY6rBif.s:2629   .text.softi2c_write_reg:00000000 softi2c_write_reg
     /tmp/ccY6rBif.s:2740   .text.softi2c_read_reg:00000000 $t
     /tmp/ccY6rBif.s:2746   .text.softi2c_read_reg:00000000 softi2c_read_reg
     /tmp/ccY6rBif.s:2873   .text.softi2c_probe:00000000 $t
     /tmp/ccY6rBif.s:2879   .text.softi2c_probe:00000000 softi2c_probe
     /tmp/ccY6rBif.s:2965   .text.softi2c_read_reg_hl:00000000 $t
     /tmp/ccY6rBif.s:2971   .text.softi2c_read_reg_hl:00000000 softi2c_read_reg_hl
     /tmp/ccY6rBif.s:3030   .text.init_adc:00000000 $t
     /tmp/ccY6rBif.s:3036   .text.init_adc:00000000 init_adc
     /tmp/ccY6rBif.s:3056   .text.op2_imu_write8:00000000 $t
     /tmp/ccY6rBif.s:3062   .text.op2_imu_write8:00000000 op2_imu_write8
     /tmp/ccY6rBif.s:3140   .text.op2_imu_write8:00000054 $d
     /tmp/ccY6rBif.s:3146   .text.op2_imu_read8:00000000 $t
     /tmp/ccY6rBif.s:3152   .text.op2_imu_read8:00000000 op2_imu_read8
     /tmp/ccY6rBif.s:3232   .text.op2_imu_read8:00000058 $d
     /tmp/ccY6rBif.s:3238   .text.op2_imu_read8x2:00000000 $t
     /tmp/ccY6rBif.s:3244   .text.op2_imu_read8x2:00000000 op2_imu_read8x2
     /tmp/ccY6rBif.s:3340   .text.op2_imu_read8x2:0000006c $d
     /tmp/ccY6rBif.s:3346   .text.op2_imu_acel_ctrl:00000000 $t
     /tmp/ccY6rBif.s:3352   .text.op2_imu_acel_ctrl:00000000 op2_imu_acel_ctrl
     /tmp/ccY6rBif.s:3401   .text.op2_imu_gyro_ctrl:00000000 $t
     /tmp/ccY6rBif.s:3407   .text.op2_imu_gyro_ctrl:00000000 op2_imu_gyro_ctrl
     /tmp/ccY6rBif.s:3446   .text.op2_imu_init:00000000 $t
     /tmp/ccY6rBif.s:3452   .text.op2_imu_init:00000000 op2_imu_init
     /tmp/ccY6rBif.s:3533   .text.op2_imu_init:00000058 $d
     /tmp/ccY6rBif.s:3540   .text.op2_imu_read_whoami:00000000 $t
ARM GAS  /tmp/ccY6rBif.s 			page 106


     /tmp/ccY6rBif.s:3546   .text.op2_imu_read_whoami:00000000 op2_imu_read_whoami
     /tmp/ccY6rBif.s:3569   .text.op2_imu_read_acel_x:00000000 $t
     /tmp/ccY6rBif.s:3575   .text.op2_imu_read_acel_x:00000000 op2_imu_read_acel_x
     /tmp/ccY6rBif.s:3597   .text.op2_imu_read_acel_y:00000000 $t
     /tmp/ccY6rBif.s:3603   .text.op2_imu_read_acel_y:00000000 op2_imu_read_acel_y
     /tmp/ccY6rBif.s:3625   .text.op2_imu_read_acel_z:00000000 $t
     /tmp/ccY6rBif.s:3631   .text.op2_imu_read_acel_z:00000000 op2_imu_read_acel_z
     /tmp/ccY6rBif.s:3653   .text.op2_imu_read_gyro_x:00000000 $t
     /tmp/ccY6rBif.s:3659   .text.op2_imu_read_gyro_x:00000000 op2_imu_read_gyro_x
     /tmp/ccY6rBif.s:3681   .text.op2_imu_read_gyro_y:00000000 $t
     /tmp/ccY6rBif.s:3687   .text.op2_imu_read_gyro_y:00000000 op2_imu_read_gyro_y
     /tmp/ccY6rBif.s:3709   .text.op2_imu_read_gyro_z:00000000 $t
     /tmp/ccY6rBif.s:3715   .text.op2_imu_read_gyro_z:00000000 op2_imu_read_gyro_z
     /tmp/ccY6rBif.s:3737   .text.op2_imu_read_temp:00000000 $t
     /tmp/ccY6rBif.s:3743   .text.op2_imu_read_temp:00000000 op2_imu_read_temp
     /tmp/ccY6rBif.s:3765   .text.op2_mag_ctrl:00000000 $t
     /tmp/ccY6rBif.s:3771   .text.op2_mag_ctrl:00000000 op2_mag_ctrl
     /tmp/ccY6rBif.s:3852   .text.op2_mag_ctrl:00000048 $d
     /tmp/ccY6rBif.s:3857   .text.op2_mag_init:00000000 $t
     /tmp/ccY6rBif.s:3863   .text.op2_mag_init:00000000 op2_mag_init
     /tmp/ccY6rBif.s:3962   .text.op2_mag_init:00000088 $d
     /tmp/ccY6rBif.s:3967   .text.op2_mag_read_x:00000000 $t
     /tmp/ccY6rBif.s:3973   .text.op2_mag_read_x:00000000 op2_mag_read_x
     /tmp/ccY6rBif.s:4009   .text.op2_mag_read_x:00000024 $d
     /tmp/ccY6rBif.s:4014   .text.op2_mag_read_y:00000000 $t
     /tmp/ccY6rBif.s:4020   .text.op2_mag_read_y:00000000 op2_mag_read_y
     /tmp/ccY6rBif.s:4056   .text.op2_mag_read_y:00000024 $d
     /tmp/ccY6rBif.s:4061   .text.op2_mag_read_z:00000000 $t
     /tmp/ccY6rBif.s:4067   .text.op2_mag_read_z:00000000 op2_mag_read_z
     /tmp/ccY6rBif.s:4103   .text.op2_mag_read_z:00000024 $d
     /tmp/ccY6rBif.s:4108   .text.op2_mag_read_temp:00000000 $t
     /tmp/ccY6rBif.s:4114   .text.op2_mag_read_temp:00000000 op2_mag_read_temp
     /tmp/ccY6rBif.s:4149   .text.op2_mag_read_temp:00000020 $d
     /tmp/ccY6rBif.s:4154   .text.op2_sci_uart_init:00000000 $t
     /tmp/ccY6rBif.s:4160   .text.op2_sci_uart_init:00000000 op2_sci_uart_init
     /tmp/ccY6rBif.s:4193   .text.op2_sci_uart_init:00000020 $d
     /tmp/ccY6rBif.s:4199   .text.op2_printstr:00000000 $t
     /tmp/ccY6rBif.s:4205   .text.op2_printstr:00000000 op2_printstr
     /tmp/ccY6rBif.s:4256   .text.op2_printstr:00000020 $d
     /tmp/ccY6rBif.s:4261   .text.op2_printint16:00000000 $t
     /tmp/ccY6rBif.s:4267   .text.op2_printint16:00000000 op2_printint16
     /tmp/ccY6rBif.s:4315   .text.op2_printint16:00000028 $d
     /tmp/ccY6rBif.s:4832   .bss.textbuf:00000000 textbuf
     /tmp/ccY6rBif.s:4321   .text.op2_printuint32:00000000 $t
     /tmp/ccY6rBif.s:4327   .text.op2_printuint32:00000000 op2_printuint32
     /tmp/ccY6rBif.s:4354   .text.op2_printuint32:00000014 $d
     /tmp/ccY6rBif.s:4359   .text.op2_printnewline:00000000 $t
     /tmp/ccY6rBif.s:4365   .text.op2_printnewline:00000000 op2_printnewline
     /tmp/ccY6rBif.s:4392   .text.op2_printnewline:00000018 $d
     /tmp/ccY6rBif.s:4397   .text.op2_core_init:00000000 $t
     /tmp/ccY6rBif.s:4403   .text.op2_core_init:00000000 op2_core_init
     /tmp/ccY6rBif.s:4429   .rodata.main.str1.4:00000000 $d
     /tmp/ccY6rBif.s:4445   .text.main:00000000 $t
     /tmp/ccY6rBif.s:4451   .text.main:00000000 main
     /tmp/ccY6rBif.s:4812   .text.main:000001b8 $d
     /tmp/ccY6rBif.s:4829   .bss.textbuf:00000000 $d
     /tmp/ccY6rBif.s:4836   .bss.systick_time:00000000 $d
ARM GAS  /tmp/ccY6rBif.s 			page 107


     /tmp/ccY6rBif.s:4843   .bss.core_MHz:00000000 $d

UNDEFINED SYMBOLS
strlen
